!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([,function(e,t,n){var r;
/**
 * @license Complex.js v2.0.11 11/02/2016
 *
 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/!function(n){"use strict";var i=function(e){return.5*(Math.exp(e)+Math.exp(-e))},o=function(e){return.5*(Math.exp(e)-Math.exp(-e))},a=function(){throw SyntaxError("Invalid Param")};function s(e,t){var n=Math.abs(e),r=Math.abs(t);return 0===e?Math.log(r):0===t?Math.log(n):n<3e3&&r<3e3?.5*Math.log(e*e+t*t):Math.log(e/Math.cos(Math.atan2(t,e)))}var u=function(e,t){var n={re:0,im:0};if(null==e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return c.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return c.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else 2===e.length?(n.re=e[0],n.im=e[1]):a();break;case"string":n.im=n.re=0;var r=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,o=0;null===r&&a();for(var s=0;s<r.length;s++){var u=r[s];" "===u||"\t"===u||"\n"===u||("+"===u?i++:"-"===u?o++:"i"===u||"I"===u?(i+o===0&&a()," "===r[s+1]||isNaN(r[s+1])?n.im+=parseFloat((o%2?"-":"")+"1"):(n.im+=parseFloat((o%2?"-":"")+r[s+1]),s++),i=o=0):((i+o===0||isNaN(u))&&a(),"i"===r[s+1]||"I"===r[s+1]?(n.im+=parseFloat((o%2?"-":"")+u),s++):n.re+=parseFloat((o%2?"-":"")+u),i=o=0))}i+o>0&&a();break;case"number":n.im=0,n.re=e;break;default:a()}return isNaN(n.re)||isNaN(n.im),n};function c(e,t){if(!(this instanceof c))return new c(e,t);var n=u(e,t);this.re=n.re,this.im=n.im}c.prototype={re:0,im:0,sign:function(){var e=this.abs();return new c(this.re/e,this.im/e)},add:function(e,t){var n=new c(e,t);return this.isInfinite()&&n.isInfinite()?c.NAN:this.isInfinite()||n.isInfinite()?c.INFINITY:new c(this.re+n.re,this.im+n.im)},sub:function(e,t){var n=new c(e,t);return this.isInfinite()&&n.isInfinite()?c.NAN:this.isInfinite()||n.isInfinite()?c.INFINITY:new c(this.re-n.re,this.im-n.im)},mul:function(e,t){var n=new c(e,t);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?c.NAN:this.isInfinite()||n.isInfinite()?c.INFINITY:0===n.im&&0===this.im?new c(this.re*n.re,0):new c(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){var n=new c(e,t);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return c.NAN;if(this.isInfinite()||n.isZero())return c.INFINITY;if(this.isZero()||n.isInfinite())return c.ZERO;e=this.re,t=this.im;var r,i,o=n.re,a=n.im;return 0===a?new c(e/o,t/o):Math.abs(o)<Math.abs(a)?new c((e*(i=o/a)+t)/(r=o*i+a),(t*i-e)/r):new c((e+t*(i=a/o))/(r=a*i+o),(t-e*i)/r)},pow:function(e,t){var n=new c(e,t);if(e=this.re,t=this.im,n.isZero())return c.ONE;if(0===n.im){if(0===t&&e>=0)return new c(Math.pow(e,n.re),0);if(0===e)switch((n.re%4+4)%4){case 0:return new c(Math.pow(t,n.re),0);case 1:return new c(0,Math.pow(t,n.re));case 2:return new c(-Math.pow(t,n.re),0);case 3:return new c(0,-Math.pow(t,n.re))}}if(0===e&&0===t&&n.re>0&&n.im>=0)return c.ZERO;var r=Math.atan2(t,e),i=s(e,t);return e=Math.exp(n.re*i-n.im*r),t=n.im*i+n.re*r,new c(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,n=this.re,r=this.im,i=this.abs();if(n>=0){if(0===r)return new c(Math.sqrt(n),0);e=.5*Math.sqrt(2*(i+n))}else e=Math.abs(r)/Math.sqrt(2*(i-n));return t=n<=0?.5*Math.sqrt(2*(i-n)):Math.abs(r)/Math.sqrt(2*(i+n)),new c(e,r<0?-t:t)},exp:function(){var e=Math.exp(this.re);return this.im,new c(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new c(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(e<-t||e>t)return Math.cos(e)-1;var n=e*e;return n*(n*(1/24+n*(-1/720+n*(1/40320+n*(-1/3628800+n*(1/4790014600+n*(-1/87178291200+n*(1/20922789888e3)))))))-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new c(s(e,t),Math.atan2(t,e))},abs:function(){return e=this.re,t=this.im,n=Math.abs(e),r=Math.abs(t),n<3e3&&r<3e3?Math.sqrt(n*n+r*r):(n<r?(n=r,r=e/t):r=t/e,n*Math.sqrt(1+r*r));var e,t,n,r},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new c(Math.sin(e)*i(t),Math.cos(e)*o(t))},cos:function(){var e=this.re,t=this.im;return new c(Math.cos(e)*i(t),-Math.sin(e)*o(t))},tan:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)+i(t);return new c(Math.sin(e)/n,o(t)/n)},cot:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)-i(t);return new c(-Math.sin(e)/n,o(t)/n)},sec:function(){var e=this.re,t=this.im,n=.5*i(2*t)+.5*Math.cos(2*e);return new c(Math.cos(e)*i(t)/n,Math.sin(e)*o(t)/n)},csc:function(){var e=this.re,t=this.im,n=.5*i(2*t)-.5*Math.cos(2*e);return new c(Math.sin(e)*i(t)/n,-Math.cos(e)*o(t)/n)},asin:function(){var e=this.re,t=this.im,n=new c(t*t-e*e+1,-2*e*t).sqrt(),r=new c(n.re-t,n.im+e).log();return new c(r.im,-r.re)},acos:function(){var e=this.re,t=this.im,n=new c(t*t-e*e+1,-2*e*t).sqrt(),r=new c(n.re-t,n.im+e).log();return new c(Math.PI/2-r.im,r.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new c(0,1/0);if(-1===t)return new c(0,-1/0)}var n=e*e+(1-t)*(1-t),r=new c((1-t*t-e*e)/n,-2*e/n).log();return new c(-.5*r.im,.5*r.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new c(Math.atan2(1,e),0);var n=e*e+t*t;return 0!==n?new c(e/n,-t/n).atan():new c(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new c(0,1/0);var n=e*e+t*t;return 0!==n?new c(e/n,-t/n).acos():new c(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new c(Math.PI/2,1/0);var n=e*e+t*t;return 0!==n?new c(e/n,-t/n).asin():new c(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new c(o(e)*Math.cos(t),i(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new c(i(e)*Math.cos(t),o(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,n=i(e)+Math.cos(t);return new c(o(e)/n,Math.sin(t)/n)},coth:function(){var e=2*this.re,t=2*this.im,n=i(e)-Math.cos(t);return new c(o(e)/n,-Math.sin(t)/n)},csch:function(){var e=this.re,t=this.im,n=Math.cos(2*t)-i(2*e);return new c(-2*o(e)*Math.cos(t)/n,2*i(e)*Math.sin(t)/n)},sech:function(){var e=this.re,t=this.im,n=Math.cos(2*t)+i(2*e);return new c(2*i(e)*Math.cos(t)/n,-2*o(e)*Math.sin(t)/n)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else{t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){var e=this.re,t=this.im,n=e>1&&0===t,r=1-e,i=1+e,o=r*r+t*t,a=0!==o?new c((i*r-t*t)/o,(t*r+i*t)/o):new c(-1!==e?e/0:0,0!==t?t/0:0),u=a.re;return a.re=s(a.re,a.im)/2,a.im=Math.atan2(a.im,u)/2,n&&(a.im=-a.im),a},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new c(0,Math.PI/2);var n=e*e+t*t;return 0!==n?new c(e/n,-t/n).atanh():new c(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new c(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var n=e*e+t*t;return 0!==n?new c(e/n,-t/n).asinh():new c(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return c.INFINITY;var n=e*e+t*t;return 0!==n?new c(e/n,-t/n).acosh():new c(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var e=this.re,t=this.im,n=e*e+t*t;return new c(e/n,-t/n)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new c(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new c(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new c(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var n=new c(e,t);return Math.abs(n.re-this.re)<=c.EPSILON&&Math.abs(n.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isZero()?"0":this.isInfinite()?"Infinity":(0!==e&&(n+=e),0!==t&&(0!==e?n+=t<0?" - ":" + ":t<0&&(n+="-"),1!==(t=Math.abs(t))&&(n+=t),n+="i"),n||"0")},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return!(0!==this.re&&-0!==this.re||0!==this.im&&-0!==this.im)},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-16,void 0===(r=function(){return c}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){var r;
/**
 * @license Fraction.js v4.0.12 09/09/2015
 * http://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2015, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/!function(n){"use strict";var i=2e3,o={s:1,n:0,d:1};function a(e){function t(){var t=Error.apply(this,arguments);t.name=this.name=e,this.stack=t.stack,this.message=t.message}function n(){}return n.prototype=Error.prototype,t.prototype=new n,t}var s=p.DivisionByZero=a("DivisionByZero"),u=p.InvalidParameter=a("InvalidParameter");function c(e,t){return isNaN(e=parseInt(e,10))&&l(),e*t}function l(){throw new u}var f=function(e,t){var n,r=0,i=1,a=1,u=0,f=0,d=0,p=1,h=1,m=0,v=1,g=1,y=1,_=1e7;if(null==e);else if(void 0!==t)a=(r=e)*(i=t);else switch(typeof e){case"object":"d"in e&&"n"in e?(r=e.n,i=e.d,"s"in e&&(r*=e.s)):0 in e?(r=e[0],1 in e&&(i=e[1])):l(),a=r*i;break;case"number":if(e<0&&(a=e,e=-e),e%1==0)r=e;else if(e>0){for(e>=1&&(e/=h=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));v<=_&&y<=_;){if(e===(n=(m+g)/(v+y))){v+y<=_?(r=m+g,i=v+y):y>v?(r=g,i=y):(r=m,i=v);break}e>n?(m+=g,v+=y):(g+=m,y+=v),v>_?(r=g,i=y):(r=m,i=v)}r*=h}else(isNaN(e)||isNaN(t))&&(i=r=NaN);break;case"string":if(null===(v=e.match(/\d+|./g))&&l(),"-"===v[m]?(a=-1,m++):"+"===v[m]&&m++,v.length===m+1?f=c(v[m++],a):"."===v[m+1]||"."===v[m]?("."!==v[m]&&(u=c(v[m++],a)),(++m+1===v.length||"("===v[m+1]&&")"===v[m+3]||"'"===v[m+1]&&"'"===v[m+3])&&(f=c(v[m],a),p=Math.pow(10,v[m].length),m++),("("===v[m]&&")"===v[m+2]||"'"===v[m]&&"'"===v[m+2])&&(d=c(v[m+1],a),h=Math.pow(10,v[m+1].length)-1,m+=3)):"/"===v[m+1]||":"===v[m+1]?(f=c(v[m],a),p=c(v[m+2],1),m+=3):"/"===v[m+3]&&" "===v[m+1]&&(u=c(v[m],a),f=c(v[m+2],a),p=c(v[m+4],1),m+=5),v.length<=m){a=r=d+(i=p*h)*u+h*f;break}default:l()}if(0===i)throw new s;o.s=a<0?-1:1,o.n=Math.abs(r),o.d=Math.abs(i)};function d(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function p(e,t){if(!(this instanceof p))return new p(e,t);f(e,t),e=p.REDUCE?d(o.d,o.n):1,this.s=o.s,this.n=o.n/e,this.d=o.d/e}p.REDUCE=1,p.prototype={s:1,n:0,d:1,abs:function(){return new p(this.n,this.d)},neg:function(){return new p(-this.s*this.n,this.d)},add:function(e,t){return f(e,t),new p(this.s*this.n*o.d+o.s*this.d*o.n,this.d*o.d)},sub:function(e,t){return f(e,t),new p(this.s*this.n*o.d-o.s*this.d*o.n,this.d*o.d)},mul:function(e,t){return f(e,t),new p(this.s*o.s*this.n*o.n,this.d*o.d)},div:function(e,t){return f(e,t),new p(this.s*o.s*this.n*o.d,this.d*o.n)},clone:function(){return new p(this)},mod:function(e,t){return isNaN(this.n)||isNaN(this.d)?new p(NaN):void 0===e?new p(this.s*this.n%this.d,1):(f(e,t),0===o.n&&0===this.d&&p(0,0),new p(this.s*(o.d*this.n)%(o.n*this.d),o.d*this.d))},gcd:function(e,t){return f(e,t),new p(d(o.n,this.n)*d(o.d,this.d),o.d*this.d)},lcm:function(e,t){return f(e,t),0===o.n&&0===this.n?new p:new p(o.n*this.n,d(o.n,this.n)*d(o.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return new p(this.s*this.d,this.n)},pow:function(e){return e<0?new p(Math.pow(this.s*this.d,-e),Math.pow(this.n,-e)):new p(Math.pow(this.s*this.n,e),Math.pow(this.d,e))},equals:function(e,t){return f(e,t),this.s*this.n*o.d==o.s*o.n*this.d},compare:function(e,t){f(e,t);var n=this.s*this.n*o.d-o.s*o.n*this.d;return(0<n)-(n<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;var t=this.abs().toContinued();function n(e){return 1===e.length?new p(e[0]):n(e.slice(1)).inverse().add(e[0])}e=e||.001;for(var r=0;r<t.length;r++){var i=n(t.slice(0,r+1));if(i.sub(this.abs()).abs().valueOf()<e)return i.mul(this.s)}return this},divisible:function(e,t){return f(e,t),!(!(o.n*this.d)||this.n*o.d%(o.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(this.n)||isNaN(this.d))return r;do{r.push(Math.floor(t/n)),e=t%n,t=n,n=e}while(1!==t);return r},toString:function(e){var t,n=this.n,r=this.d;if(isNaN(n)||isNaN(r))return"NaN";p.REDUCE||(n/=t=d(n,r),r/=t),e=e||15;var o=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var n=10%t,r=1;1!==n;r++)if(n=10*n%t,r>i)return 0;return r}(0,r),a=function(e,t,n){for(var r=1,i=function(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)1&t&&(r=r*e%n);return r}(10,n,t),o=0;o<300;o++){if(r===i)return o;r=10*r%t,i=10*i%t}return 0}(0,r,o),s=-1===this.s?"-":"";if(s+=n/r|0,n%=r,(n*=10)&&(s+="."),o){for(var u=a;u--;)s+=n/r|0,n%=r,n*=10;s+="(";for(u=o;u--;)s+=n/r|0,n%=r,n*=10;s+=")"}else for(u=e;n&&u--;)s+=n/r|0,n%=r,n*=10;return s}},void 0===(r=function(){return p}.apply(t,[]))||(e.exports=r)}()},function(e,t){e.exports=function e(t,n){"use strict";var r,i,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,c=/^0/,l=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},f=l(t).replace(a,"")||"",d=l(n).replace(a,"")||"",p=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=d.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(f.match(u),16)||1!==p.length&&f.match(s)&&Date.parse(f),v=parseInt(d.match(u),16)||m&&d.match(s)&&Date.parse(d)||null;if(v){if(m<v)return-1;if(m>v)return 1}for(var g=0,y=Math.max(p.length,h.length);g<y;g++){if(r=!(p[g]||"").match(c)&&parseFloat(p[g])||p[g]||0,i=!(h[g]||"").match(c)&&parseFloat(h[g])||h[g]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!=typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0}},function(e,t,n){
/*!
 * @license twgl.js 4.11.2 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
var r;"undefined"!=typeof self&&self,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/twgl-full.js")}({"./src/attributes.js":
/*!***************************!*\
  !*** ./src/attributes.js ***!
  \***************************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0,t.createAttribsFromArrays=v,t.createBuffersFromArrays=function(e,t){var n={};return Object.keys(t).forEach((function(r){n[r]=y(e,t[r],r)})),t.indices?(n.numElements=t.indices.length,n.elementType=r.getGLTypeForTypedArray(m(t.indices),"indices")):n.numElements=function(e){var t,n;for(n=0;n<g.length&&!((t=g[n])in e);++n);n===g.length&&(t=Object.keys(e)[0]);var r=e[t],i=l(r).length,o=h(r,t),a=i/o;if(i%o>0)throw new Error("numComponents ".concat(o," not correct for length ").concat(i));return a}(t),n},t.createBufferFromArray=y,t.createBufferFromTypedArray=u,t.createBufferInfoFromArrays=function(e,t,n){var i=v(e,t),o=Object.assign({},n||{});o.attribs=Object.assign({},n?n.attribs:{},i);var s=t.indices;if(s){var c=m(s,"indices");o.indices=u(e,c,e.ELEMENT_ARRAY_BUFFER),o.numElements=c.length,o.elementType=r.getGLTypeForTypedArray(c)}else o.numElements||(o.numElements=function(e,t){var n,r;for(r=0;r<g.length&&!((n=g[r])in t)&&!((n=a.attribPrefix+n)in t);++r);r===g.length&&(n=Object.keys(t)[0]);var i=t[n];e.bindBuffer(e.ARRAY_BUFFER,i.buffer);var o=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);var s=function(e,t){return t===e.BYTE?1:t===e.UNSIGNED_BYTE?1:t===e.SHORT?2:t===e.UNSIGNED_SHORT?2:t===e.INT?4:t===e.UNSIGNED_INT?4:t===e.FLOAT?4:0}(e,i.type),u=o/s,c=i.numComponents||i.size,l=u/c;if(l%1!=0)throw new Error("numComponents ".concat(c," not correct for length ").concat(length));return l}(e,o.attribs));return o},t.setAttribInfoBufferFromArray=function(e,t,n,r){n=m(n),void 0!==r?(e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.bufferSubData(e.ARRAY_BUFFER,r,n)):s(e,e.ARRAY_BUFFER,t.buffer,n,t.drawType)},t.setAttributePrefix=function(e){a.attribPrefix=e},t.setAttributeDefaults_=function(e){i.copyExistingProperties(e,a)},t.getNumComponents_=h,t.getArray_=l;var r=o(n(/*! ./typedarrays.js */"./src/typedarrays.js")),i=o(n(/*! ./helper.js */"./src/helper.js"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}var a={attribPrefix:""};function s(e,t,n,r,i){e.bindBuffer(t,n),e.bufferData(t,r,i||e.STATIC_DRAW)}function u(e,t,n,r){if(i.isBuffer(e,t))return t;n=n||e.ARRAY_BUFFER;var o=e.createBuffer();return s(e,n,o,t,r),o}function c(e){return"indices"===e}function l(e){return e.length?e:e.data}var f=/coord|texture/i,d=/color|colour/i;function p(e,t){var n;if(t%(n=f.test(e)?2:d.test(e)?4:3)>0)throw new Error("Can not guess numComponents for attribute '".concat(e,"'. Tried ").concat(n," but ").concat(t," values is not evenly divisible by ").concat(n,". You should specify it."));return n}function h(e,t){return e.numComponents||e.size||p(t,l(e).length)}function m(e,t){if(r.isArrayBuffer(e))return e;if(r.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var n=e.type;return n||(n=c(t)?Uint16Array:Float32Array),new n(e.data)}function v(e,t){var n={};return Object.keys(t).forEach((function(i){if(!c(i)){var o=t[i],s=o.attrib||o.name||o.attribName||a.attribPrefix+i;if(o.value){if(!Array.isArray(o.value)&&!r.isArrayBuffer(o.value))throw new Error("array.value is not array or typedarray");n[s]={value:o.value}}else{var l,f,d,v;if(o.buffer&&o.buffer instanceof WebGLBuffer)l=o.buffer,v=o.numComponents||o.size,f=o.type,d=o.normalize;else if("number"==typeof o||"number"==typeof o.data){var g=o.data||o,y=o.type||Float32Array,_=g*y.BYTES_PER_ELEMENT;f=r.getGLTypeForTypedArrayType(y),d=void 0!==o.normalize?o.normalize:(w=y)===Int8Array||w===Uint8Array,v=o.numComponents||o.size||p(i,g),l=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,_,o.drawType||e.STATIC_DRAW)}else{var b=m(o,i);l=u(e,b,void 0,o.drawType),f=r.getGLTypeForTypedArray(b),d=void 0!==o.normalize?o.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(b),v=h(o,i)}n[s]={buffer:l,numComponents:v,type:f,normalize:d,stride:o.stride||0,offset:o.offset||0,divisor:void 0===o.divisor?void 0:o.divisor,drawType:o.drawType}}}var w})),e.bindBuffer(e.ARRAY_BUFFER,null),n}var g=["position","positions","a_position"];function y(e,t,n){var r="indices"===n?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return u(e,m(t,n),r)}},"./src/draw.js":
/*!*********************!*\
  !*** ./src/draw.js ***!
  \*********************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0,t.drawBufferInfo=i,t.drawObjectList=function(e,t){var n=null,o=null;t.forEach((function(t){if(!1!==t.active){var a=t.programInfo,s=t.vertexArrayInfo||t.bufferInfo,u=!1,c=void 0===t.type?e.TRIANGLES:t.type;a!==n&&(n=a,e.useProgram(a.program),u=!0),(u||s!==o)&&(o&&o.vertexArrayObject&&!s.vertexArrayObject&&e.bindVertexArray(null),o=s,r.setBuffersAndAttributes(e,a,s)),r.setUniforms(a,t.uniforms),i(e,s,c,t.count,t.offset,t.instanceCount)}})),o.vertexArrayObject&&e.bindVertexArray(null)};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(/*! ./programs.js */"./src/programs.js"));function i(e,t,n,r,i,o){n=void 0===n?e.TRIANGLES:n;var a=t.indices,s=t.elementType,u=void 0===r?t.numElements:r;i=void 0===i?0:i,s||a?void 0!==o?e.drawElementsInstanced(n,u,void 0===s?e.UNSIGNED_SHORT:t.elementType,i,o):e.drawElements(n,u,void 0===s?e.UNSIGNED_SHORT:t.elementType,i):void 0!==o?e.drawArraysInstanced(n,i,u,o):e.drawArrays(n,i,u)}},"./src/framebuffers.js":
/*!*****************************!*\
  !*** ./src/framebuffers.js ***!
  \*****************************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0,t.bindFramebufferInfo=function(e,t,n){n=n||e.FRAMEBUFFER,t?(e.bindFramebuffer(n,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(n,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))},t.createFramebufferInfo=function(e,t,n,o){var l=e.FRAMEBUFFER,f=e.createFramebuffer();e.bindFramebuffer(l,f),n=n||e.drawingBufferWidth,o=o||e.drawingBufferHeight;var d=0,p={framebuffer:f,attachments:[],width:n,height:o};return(t=t||s).forEach((function(t){var s=t.attachment,f=t.format,h=function(e){return u[e]}(f);if(h||(h=a+d++),!s)if(function(e){return c[e]}(f))s=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,s),e.renderbufferStorage(e.RENDERBUFFER,f,n,o);else{var m=Object.assign({},t);m.width=n,m.height=o,void 0===m.auto&&(m.auto=!1,m.min=m.min||m.minMag||e.LINEAR,m.mag=m.mag||m.minMag||e.LINEAR,m.wrapS=m.wrapS||m.wrap||e.CLAMP_TO_EDGE,m.wrapT=m.wrapT||m.wrap||e.CLAMP_TO_EDGE),s=r.createTexture(e,m)}if(i.isRenderbuffer(e,s))e.framebufferRenderbuffer(l,h,e.RENDERBUFFER,s);else{if(!i.isTexture(e,s))throw new Error("unknown attachment type");void 0!==t.layer?e.framebufferTextureLayer(l,h,s,t.level||0,t.layer):e.framebufferTexture2D(l,h,t.texTarget||e.TEXTURE_2D,s,t.level||0)}p.attachments.push(s)})),p},t.resizeFramebufferInfo=function(e,t,n,o,a){o=o||e.drawingBufferWidth,a=a||e.drawingBufferHeight,t.width=o,t.height=a,(n=n||s).forEach((function(n,s){var u=t.attachments[s],c=n.format;if(i.isRenderbuffer(e,u))e.bindRenderbuffer(e.RENDERBUFFER,u),e.renderbufferStorage(e.RENDERBUFFER,c,o,a);else{if(!i.isTexture(e,u))throw new Error("unknown attachment type");r.resizeTexture(e,u,n,o,a)}}))};var r=o(n(/*! ./textures.js */"./src/textures.js")),i=o(n(/*! ./helper.js */"./src/helper.js"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}var a=36064,s=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],u={34041:33306,6401:36128,36168:36128,6402:36096,33189:36096},c={32854:!0,32855:!0,36194:!0,34041:!0,33189:!0,6401:!0,36168:!0}},"./src/helper.js":
/*!***********************!*\
  !*** ./src/helper.js ***!
  \***********************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0,t.copyExistingProperties=function(e,t){Object.keys(t).forEach((function(n){t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(t[n]=e[n])}))},t.copyNamedProperties=function(e,t,n){e.forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)}))},t.isBuffer=function(e,t){return"undefined"!=typeof WebGLBuffer&&t instanceof WebGLBuffer},t.isRenderbuffer=function(e,t){return"undefined"!=typeof WebGLRenderbuffer&&t instanceof WebGLRenderbuffer},t.isShader=function(e,t){return"undefined"!=typeof WebGLShader&&t instanceof WebGLShader},t.isTexture=function(e,t){return"undefined"!=typeof WebGLTexture&&t instanceof WebGLTexture},t.isSampler=function(e,t){return"undefined"!=typeof WebGLSampler&&t instanceof WebGLSampler},t.warn=t.error=void 0;var r="undefined"!=typeof console&&console.error&&"function"==typeof console.error?console.error.bind(console):function(){};t.error=r;var i="undefined"!=typeof console&&console.warn&&"function"==typeof console.warn?console.warn.bind(console):function(){};t.warn=i},"./src/m4.js":
/*!*******************!*\
  !*** ./src/m4.js ***!
  \*******************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0,t.axisRotate=function(e,t,n,r){r=r||new i(16);var o=t[0],a=t[1],s=t[2],u=Math.sqrt(o*o+a*a+s*s),c=(o/=u)*o,l=(a/=u)*a,f=(s/=u)*s,d=Math.cos(n),p=Math.sin(n),h=1-d,m=c+(1-c)*d,v=o*a*h+s*p,g=o*s*h-a*p,y=o*a*h-s*p,_=l+(1-l)*d,b=a*s*h+o*p,w=o*s*h+a*p,x=a*s*h-o*p,E=f+(1-f)*d,A=e[0],S=e[1],T=e[2],M=e[3],N=e[4],O=e[5],C=e[6],R=e[7],F=e[8],P=e[9],I=e[10],k=e[11];return r[0]=m*A+v*N+g*F,r[1]=m*S+v*O+g*P,r[2]=m*T+v*C+g*I,r[3]=m*M+v*R+g*k,r[4]=y*A+_*N+b*F,r[5]=y*S+_*O+b*P,r[6]=y*T+_*C+b*I,r[7]=y*M+_*R+b*k,r[8]=w*A+x*N+E*F,r[9]=w*S+x*O+E*P,r[10]=w*T+x*C+E*I,r[11]=w*M+x*R+E*k,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.axisRotation=function(e,t,n){n=n||new i(16);var r=e[0],o=e[1],a=e[2],s=Math.sqrt(r*r+o*o+a*a),u=(r/=s)*r,c=(o/=s)*o,l=(a/=s)*a,f=Math.cos(t),d=Math.sin(t),p=1-f;return n[0]=u+(1-u)*f,n[1]=r*o*p+a*d,n[2]=r*a*p-o*d,n[3]=0,n[4]=r*o*p-a*d,n[5]=c+(1-c)*f,n[6]=o*a*p+r*d,n[7]=0,n[8]=r*a*p+o*d,n[9]=o*a*p-r*d,n[10]=l+(1-l)*f,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},t.copy=u,t.frustum=function(e,t,n,r,o,a,s){s=s||new i(16);var u=t-e,c=r-n,l=o-a;return s[0]=2*o/u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*o/c,s[6]=0,s[7]=0,s[8]=(e+t)/u,s[9]=(r+n)/c,s[10]=a/l,s[11]=-1,s[12]=0,s[13]=0,s[14]=o*a/l,s[15]=0,s},t.getAxis=function(e,t,n){n=n||r.create();var i=4*t;return n[0]=e[i+0],n[1]=e[i+1],n[2]=e[i+2],n},t.getTranslation=function(e,t){return(t=t||r.create())[0]=e[12],t[1]=e[13],t[2]=e[14],t},t.identity=c,t.inverse=l,t.lookAt=function(e,t,n,u){u=u||new i(16);var c=o,l=a,f=s;return r.normalize(r.subtract(e,t,f),f),r.normalize(r.cross(n,f,c),c),r.normalize(r.cross(f,c,l),l),u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=0,u[4]=l[0],u[5]=l[1],u[6]=l[2],u[7]=0,u[8]=f[0],u[9]=f[1],u[10]=f[2],u[11]=0,u[12]=e[0],u[13]=e[1],u[14]=e[2],u[15]=1,u},t.multiply=function(e,t,n){n=n||new i(16);var r=e[0],o=e[1],a=e[2],s=e[3],u=e[4],c=e[5],l=e[6],f=e[7],d=e[8],p=e[9],h=e[10],m=e[11],v=e[12],g=e[13],y=e[14],_=e[15],b=t[0],w=t[1],x=t[2],E=t[3],A=t[4],S=t[5],T=t[6],M=t[7],N=t[8],O=t[9],C=t[10],R=t[11],F=t[12],P=t[13],I=t[14],k=t[15];return n[0]=r*b+u*w+d*x+v*E,n[1]=o*b+c*w+p*x+g*E,n[2]=a*b+l*w+h*x+y*E,n[3]=s*b+f*w+m*x+_*E,n[4]=r*A+u*S+d*T+v*M,n[5]=o*A+c*S+p*T+g*M,n[6]=a*A+l*S+h*T+y*M,n[7]=s*A+f*S+m*T+_*M,n[8]=r*N+u*O+d*C+v*R,n[9]=o*N+c*O+p*C+g*R,n[10]=a*N+l*O+h*C+y*R,n[11]=s*N+f*O+m*C+_*R,n[12]=r*F+u*P+d*I+v*k,n[13]=o*F+c*P+p*I+g*k,n[14]=a*F+l*P+h*I+y*k,n[15]=s*F+f*P+m*I+_*k,n},t.negate=function(e,t){return(t=t||new i(16))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},t.ortho=function(e,t,n,r,o,a,s){return(s=s||new i(16))[0]=2/(t-e),s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2/(r-n),s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2/(o-a),s[11]=0,s[12]=(t+e)/(e-t),s[13]=(r+n)/(n-r),s[14]=(a+o)/(o-a),s[15]=1,s},t.perspective=function(e,t,n,r,o){o=o||new i(16);var a=Math.tan(.5*Math.PI-.5*e),s=1/(n-r);return o[0]=a/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(n+r)*s,o[11]=-1,o[12]=0,o[13]=0,o[14]=n*r*s*2,o[15]=0,o},t.rotateX=function(e,t,n){n=n||new i(16);var r=e[4],o=e[5],a=e[6],s=e[7],u=e[8],c=e[9],l=e[10],f=e[11],d=Math.cos(t),p=Math.sin(t);return n[4]=d*r+p*u,n[5]=d*o+p*c,n[6]=d*a+p*l,n[7]=d*s+p*f,n[8]=d*u-p*r,n[9]=d*c-p*o,n[10]=d*l-p*a,n[11]=d*f-p*s,e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},t.rotateY=function(e,t,n){n=n||new i(16);var r=e[0],o=e[1],a=e[2],s=e[3],u=e[8],c=e[9],l=e[10],f=e[11],d=Math.cos(t),p=Math.sin(t);return n[0]=d*r-p*u,n[1]=d*o-p*c,n[2]=d*a-p*l,n[3]=d*s-p*f,n[8]=d*u+p*r,n[9]=d*c+p*o,n[10]=d*l+p*a,n[11]=d*f+p*s,e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},t.rotateZ=function(e,t,n){n=n||new i(16);var r=e[0],o=e[1],a=e[2],s=e[3],u=e[4],c=e[5],l=e[6],f=e[7],d=Math.cos(t),p=Math.sin(t);return n[0]=d*r+p*u,n[1]=d*o+p*c,n[2]=d*a+p*l,n[3]=d*s+p*f,n[4]=d*u-p*r,n[5]=d*c-p*o,n[6]=d*l-p*a,n[7]=d*f-p*s,e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},t.rotationX=function(e,t){t=t||new i(16);var n=Math.cos(e),r=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.rotationY=function(e,t){t=t||new i(16);var n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.rotationZ=function(e,t){t=t||new i(16);var n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.scale=function(e,t,n){n=n||new i(16);var r=t[0],o=t[1],a=t[2];return n[0]=r*e[0],n[1]=r*e[1],n[2]=r*e[2],n[3]=r*e[3],n[4]=o*e[4],n[5]=o*e[5],n[6]=o*e[6],n[7]=o*e[7],n[8]=a*e[8],n[9]=a*e[9],n[10]=a*e[10],n[11]=a*e[11],e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},t.scaling=function(e,t){return(t=t||new i(16))[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.setAxis=function(e,t,n,r){r!==e&&(r=u(e,r));var i=4*n;return r[i+0]=t[0],r[i+1]=t[1],r[i+2]=t[2],r},t.setDefaultType=function(e){var t=i;return i=e,t},t.setTranslation=function(e,t,n){return n=n||c(),e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11]),n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n},t.transformDirection=function(e,t,n){n=n||r.create();var i=t[0],o=t[1],a=t[2];return n[0]=i*e[0]+o*e[4]+a*e[8],n[1]=i*e[1]+o*e[5]+a*e[9],n[2]=i*e[2]+o*e[6]+a*e[10],n},t.transformNormal=function(e,t,n){n=n||r.create();var i=l(e),o=t[0],a=t[1],s=t[2];return n[0]=o*i[0]+a*i[1]+s*i[2],n[1]=o*i[4]+a*i[5]+s*i[6],n[2]=o*i[8]+a*i[9]+s*i[10],n},t.transformPoint=function(e,t,n){n=n||r.create();var i=t[0],o=t[1],a=t[2],s=i*e[3]+o*e[7]+a*e[11]+e[15];return n[0]=(i*e[0]+o*e[4]+a*e[8]+e[12])/s,n[1]=(i*e[1]+o*e[5]+a*e[9]+e[13])/s,n[2]=(i*e[2]+o*e[6]+a*e[10]+e[14])/s,n},t.translate=function(e,t,n){n=n||new i(16);var r=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=e[3],f=e[4],d=e[5],p=e[6],h=e[7],m=e[8],v=e[9],g=e[10],y=e[11],_=e[12],b=e[13],w=e[14],x=e[15];return e!==n&&(n[0]=s,n[1]=u,n[2]=c,n[3]=l,n[4]=f,n[5]=d,n[6]=p,n[7]=h,n[8]=m,n[9]=v,n[10]=g,n[11]=y),n[12]=s*r+f*o+m*a+_,n[13]=u*r+d*o+v*a+b,n[14]=c*r+p*o+g*a+w,n[15]=l*r+h*o+y*a+x,n},t.translation=function(e,t){return(t=t||new i(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},t.transpose=function(e,t){var n;if((t=t||new i(16))===e)return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,t;var r=e[0],o=e[1],a=e[2],s=e[3],u=e[4],c=e[5],l=e[6],f=e[7],d=e[8],p=e[9],h=e[10],m=e[11],v=e[12],g=e[13],y=e[14],_=e[15];return t[0]=r,t[1]=u,t[2]=d,t[3]=v,t[4]=o,t[5]=c,t[6]=p,t[7]=g,t[8]=a,t[9]=l,t[10]=h,t[11]=y,t[12]=s,t[13]=f,t[14]=m,t[15]=_,t};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(/*! ./v3.js */"./src/v3.js")),i=Float32Array,o=r.create(),a=r.create(),s=r.create();function u(e,t){return(t=t||new i(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function c(e){return(e=e||new i(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){t=t||new i(16);var n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],p=e[10],h=e[11],m=e[12],v=e[13],g=e[14],y=e[15],_=p*y,b=g*h,w=c*y,x=g*l,E=c*h,A=p*l,S=o*y,T=g*a,M=o*h,N=p*a,O=o*l,C=c*a,R=f*v,F=m*d,P=s*v,I=m*u,k=s*d,z=f*u,D=n*v,B=m*r,L=n*d,U=f*r,j=n*u,G=s*r,H=_*u+x*d+E*v-(b*u+w*d+A*v),V=b*r+S*d+N*v-(_*r+T*d+M*v),X=w*r+T*u+O*v-(x*r+S*u+C*v),q=A*r+M*u+C*d-(E*r+N*u+O*d),W=1/(n*H+s*V+f*X+m*q);return t[0]=W*H,t[1]=W*V,t[2]=W*X,t[3]=W*q,t[4]=W*(b*s+w*f+A*m-(_*s+x*f+E*m)),t[5]=W*(_*n+T*f+M*m-(b*n+S*f+N*m)),t[6]=W*(x*n+S*s+C*m-(w*n+T*s+O*m)),t[7]=W*(E*n+N*s+O*f-(A*n+M*s+C*f)),t[8]=W*(R*l+I*h+k*y-(F*l+P*h+z*y)),t[9]=W*(F*a+D*h+U*y-(R*a+B*h+L*y)),t[10]=W*(P*a+B*l+j*y-(I*a+D*l+G*y)),t[11]=W*(z*a+L*l+G*h-(k*a+U*l+j*h)),t[12]=W*(P*p+z*g+F*c-(k*g+R*c+I*p)),t[13]=W*(L*g+R*o+B*p-(D*p+U*g+F*o)),t[14]=W*(D*c+G*g+I*o-(j*g+P*o+B*c)),t[15]=W*(j*p+k*o+U*c-(L*c+G*p+z*o)),t}},"./src/primitives.js":
/*!***************************!*\
  !*** ./src/primitives.js ***!
  \***************************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0,t.create3DFVertices=M,t.createAugmentedTypedArray=d,t.createCubeVertices=A,t.createPlaneVertices=w,t.createSphereVertices=x,t.createTruncatedConeVertices=S,t.createXYQuadVertices=b,t.createCrescentVertices=N,t.createCylinderVertices=O,t.createTorusVertices=C,t.createDiscVertices=R,t.deindexVertices=function(e){var t=e.indices,n={},r=t.length;return Object.keys(e).filter(p).forEach((function(i){for(var o=e[i],a=o.numComponents,s=d(a,r,o.constructor),u=0;u<r;++u)for(var c=t[u]*a,l=0;l<a;++l)s.push(o[c+l]);n[i]=s})),n},t.flattenNormals=function(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var t=e.normal,n=t.length,r=0;r<n;r+=9){var i=t[r+0],o=t[r+1],a=t[r+2],s=t[r+3],u=t[r+4],c=t[r+5],l=t[r+6],f=t[r+7],d=t[r+8],p=i+s+l,h=o+u+f,m=a+c+d,v=Math.sqrt(p*p+h*h+m*m);p/=v,h/=v,m/=v,t[r+0]=p,t[r+1]=h,t[r+2]=m,t[r+3]=p,t[r+4]=h,t[r+5]=m,t[r+6]=p,t[r+7]=h,t[r+8]=m}return e},t.makeRandomVertexColors=function(e,t){t=t||{};var n=e.position.numElements,r=d(4,n,Uint8Array),i=t.rand||function(e,t){return t<3?(n=256,Math.random()*n|0):255;var n};if(e.color=r,e.indices)for(var o=0;o<n;++o)r.push(i(o,0),i(o,1),i(o,2),i(o,3));else for(var a=t.vertsPerColor||3,s=n/a,u=0;u<s;++u)for(var c=[i(u,0),i(u,1),i(u,2),i(u,3)],l=0;l<a;++l)r.push(c);return e},t.reorientDirections=v,t.reorientNormals=g,t.reorientPositions=y,t.reorientVertices=_,t.concatVertices=function(e){for(var t,n={},r=function(r){var i=e[r];Object.keys(i).forEach((function(e){n[e]||(n[e]=[]),t||"indices"===e||(t=e);var r=i[e],o=l(r,e),a=c(r).length/o;n[e].push(a)}))},i=0;i<e.length;++i)r(i);var o=n[t],a={};return Object.keys(n).forEach((function(t){var n=function(t){for(var n,r=0,i=0;i<e.length;++i){var o=e[i][t],a=c(o);r+=a.length,n&&!o.data||(n=o)}return{length:r,spec:n}}(t),r=z(n.spec,n.length);!function(t,n,r){for(var i=0,o=0,a=0;a<e.length;++a){var s=e[a][t],u=c(s);"indices"===t?(k(u,r,o,i),i+=n[a]):k(u,r,o),o+=u.length}}(t,o,c(r)),a[t]=r})),a},t.duplicateVertices=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n],i=c(r),o=z(r,i.length);k(i,c(o),0),t[n]=o})),t},t.createDiscBuffers=t.createDiscBufferInfo=t.createTorusBuffers=t.createTorusBufferInfo=t.createCylinderBuffers=t.createCylinderBufferInfo=t.createCrescentBuffers=t.createCrescentBufferInfo=t.createCresentVertices=t.createCresentBuffers=t.createCresentBufferInfo=t.createXYQuadBuffers=t.createXYQuadBufferInfo=t.createTruncatedConeBuffers=t.createTruncatedConeBufferInfo=t.createSphereBuffers=t.createSphereBufferInfo=t.createPlaneBuffers=t.createPlaneBufferInfo=t.createCubeBuffers=t.createCubeBufferInfo=t.create3DFBuffers=t.create3DFBufferInfo=void 0;var r=u(n(/*! ./attributes.js */"./src/attributes.js")),i=u(n(/*! ./helper.js */"./src/helper.js")),o=u(n(/*! ./typedarrays.js */"./src/typedarrays.js")),a=u(n(/*! ./m4.js */"./src/m4.js")),s=u(n(/*! ./v3.js */"./src/v3.js"));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}var c=r.getArray_,l=r.getNumComponents_;function f(e,t){var n=0;return e.push=function(){for(var t=0;t<arguments.length;++t){var r=arguments[t];if(r instanceof Array||o.isArrayBuffer(r))for(var i=0;i<r.length;++i)e[n++]=r[i];else e[n++]=r}},e.reset=function(e){n=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function d(e,t,n){return f(new(n||Float32Array)(e*t),e)}function p(e){return"indices"!==e}function h(e,t,n){for(var r=e.length,i=new Float32Array(3),o=0;o<r;o+=3)n(t,[e[o],e[o+1],e[o+2]],i),e[o]=i[0],e[o+1]=i[1],e[o+2]=i[2]}function m(e,t,n){n=n||s.create();var r=t[0],i=t[1],o=t[2];return n[0]=r*e[0]+i*e[1]+o*e[2],n[1]=r*e[4]+i*e[5]+o*e[6],n[2]=r*e[8]+i*e[9]+o*e[10],n}function v(e,t){return h(e,t,a.transformDirection),e}function g(e,t){return h(e,a.inverse(t),m),e}function y(e,t){return h(e,t,a.transformPoint),e}function _(e,t){return Object.keys(e).forEach((function(n){var r=e[n];n.indexOf("pos")>=0?y(r,t):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?v(r,t):n.indexOf("norm")>=0&&g(r,t)})),e}function b(e,t,n){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(n=n||0)+-1*e,t+1*e,n+-1*e,t+-1*e,n+1*e,t+1*e,n+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function w(e,t,n,r,i){e=e||1,t=t||1,n=n||1,r=r||1,i=i||a.identity();for(var o=(n+1)*(r+1),s=d(3,o),u=d(3,o),c=d(2,o),l=0;l<=r;l++)for(var f=0;f<=n;f++){var p=f/n,h=l/r;s.push(e*p-.5*e,0,t*h-.5*t),u.push(0,1,0),c.push(p,h)}for(var m=n+1,v=d(3,n*r*2,Uint16Array),g=0;g<r;g++)for(var y=0;y<n;y++)v.push((g+0)*m+y,(g+1)*m+y,(g+0)*m+y+1),v.push((g+1)*m+y,(g+1)*m+y+1,(g+0)*m+y+1);return _({position:s,normal:u,texcoord:c,indices:v},i)}function x(e,t,n,r,i,o,a){if(t<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,o=o||0;for(var s=(i=i||Math.PI)-r,u=(a=a||2*Math.PI)-o,c=(t+1)*(n+1),l=d(3,c),f=d(3,c),p=d(2,c),h=0;h<=n;h++)for(var m=0;m<=t;m++){var v=m/t,g=h/n,y=u*v+o,_=s*g+r,b=Math.sin(y),w=Math.cos(y),x=Math.sin(_),E=w*x,A=Math.cos(_),S=b*x;l.push(e*E,e*A,e*S),f.push(E,A,S),p.push(1-v,g)}for(var T=t+1,M=d(3,t*n*2,Uint16Array),N=0;N<t;N++)for(var O=0;O<n;O++)M.push((O+0)*T+N,(O+0)*T+N+1,(O+1)*T+N),M.push((O+1)*T+N,(O+0)*T+N+1,(O+1)*T+N+1);return{position:l,normal:f,texcoord:p,indices:M}}var E=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function A(e){for(var t=(e=e||1)/2,n=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],i=[[1,0],[0,0],[0,1],[1,1]],o=d(3,24),a=d(3,24),s=d(2,24),u=d(3,12,Uint16Array),c=0;c<6;++c){for(var l=E[c],f=0;f<4;++f){var p=n[l[f]],h=r[c],m=i[f];o.push(p),a.push(h),s.push(m)}var v=4*c;u.push(v+0,v+1,v+2),u.push(v+0,v+2,v+3)}return{position:o,normal:a,texcoord:s,indices:u}}function S(e,t,n,r,i,o,a){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(i<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var s=void 0===o||o,u=void 0===a||a,c=(s?2:0)+(u?2:0),l=(r+1)*(i+1+c),f=d(3,l),p=d(3,l),h=d(2,l),m=d(3,r*(i+c)*2,Uint16Array),v=r+1,g=Math.atan2(e-t,n),y=Math.cos(g),_=Math.sin(g),b=i+(u?2:0),w=s?-2:0;w<=b;++w){var x=w/i,E=n*x,A=void 0;w<0?(E=0,x=1,A=e):w>i?(E=n,x=1,A=t):A=e+w/i*(t-e),-2!==w&&w!==i+2||(A=0,x=0),E-=n/2;for(var S=0;S<v;++S){var T=Math.sin(S*Math.PI*2/r),M=Math.cos(S*Math.PI*2/r);f.push(T*A,E,M*A),p.push(w<0||w>i?0:T*y,w<0?-1:w>i?1:_,w<0||w>i?0:M*y),h.push(S/r,1-x)}}for(var N=0;N<i+c;++N)for(var O=0;O<r;++O)m.push(v*(N+0)+0+O,v*(N+0)+1+O,v*(N+1)+1+O),m.push(v*(N+0)+0+O,v*(N+1)+1+O,v*(N+1)+0+O);return{position:f,normal:p,texcoord:h,indices:m}}function T(e,t){t=t||[];for(var n=[],r=0;r<e.length;r+=4){var i=e[r],o=e.slice(r+1,r+4);o.push.apply(o,t);for(var a=0;a<i;++a)n.push.apply(n,o)}return n}function M(){var e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=T([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=T([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),r=e.length/3,i={position:d(3,r),texcoord:d(2,r),normal:d(3,r),color:d(4,r,Uint8Array),indices:d(3,r/3,Uint16Array)};i.position.push(e),i.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),i.normal.push(t),i.color.push(n);for(var o=0;o<r;++o)i.indices.push(o);return i}function N(e,t,n,r,i,o,a){if(i<=0)throw new Error("subdivisionDown must be > 0");var u=2,c=(a=a||1)-(o=o||0),l=2*(i+1)*(2+u),f=d(3,l),p=d(3,l),h=d(2,l);function m(e,t,n){return e+(t-e)*n}function v(t,n,a,l,d,v){for(var g=0;g<=i;g++){var y=n/(u-1),_=g/i,b=2*(y-.5),w=(o+_*c)*Math.PI,x=Math.sin(w),E=Math.cos(w),A=m(e,t,x),S=b*r,T=E*e,M=x*A;f.push(S,T,M);var N=s.add(s.multiply([0,x,E],a),l);p.push(N),h.push(y*d+v,_)}}for(var g=0;g<u;g++){var y=2*(g/(u-1)-.5);v(t,g,[1,1,1],[0,0,0],1,0),v(t,g,[0,0,0],[y,0,0],0,0),v(n,g,[1,1,1],[0,0,0],1,0),v(n,g,[0,0,0],[y,0,0],0,1)}var _=d(3,2*i*(2+u),Uint16Array);function b(e,t){for(var n=0;n<i;++n)_.push(e+n+0,e+n+1,t+n+0),_.push(e+n+1,t+n+1,t+n+0)}var w=i+1;return b(0*w,4*w),b(5*w,7*w),b(6*w,2*w),b(3*w,1*w),{position:f,normal:p,texcoord:h,indices:_}}function O(e,t,n,r,i,o){return S(e,e,t,n,r,i,o)}function C(e,t,n,r,i,o){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");i=i||0;for(var a=(o=o||2*Math.PI)-i,s=n+1,u=r+1,c=s*u,l=d(3,c),f=d(3,c),p=d(2,c),h=d(3,n*r*2,Uint16Array),m=0;m<u;++m)for(var v=m/r,g=v*Math.PI*2,y=Math.sin(g),_=e+y*t,b=Math.cos(g),w=b*t,x=0;x<s;++x){var E=x/n,A=i+E*a,S=Math.sin(A),T=Math.cos(A),M=S*_,N=T*_,O=S*y,C=T*y;l.push(M,w,N),f.push(O,b,C),p.push(E,1-v)}for(var R=0;R<r;++R)for(var F=0;F<n;++F){var P=1+F,I=1+R;h.push(s*R+F,s*I+F,s*R+P),h.push(s*I+F,s*I+P,s*R+P)}return{position:l,normal:f,texcoord:p,indices:h}}function R(e,t,n,r,i){if(t<3)throw new Error("divisions must be at least 3");i=i||1,r=r||0;for(var o=(t+1)*((n=n||1)+1),a=d(3,o),s=d(3,o),u=d(2,o),c=d(3,n*t*2,Uint16Array),l=0,f=e-r,p=t+1,h=0;h<=n;++h){for(var m=r+f*Math.pow(h/n,i),v=0;v<=t;++v){var g=2*Math.PI*v/t,y=m*Math.cos(g),_=m*Math.sin(g);if(a.push(y,0,_),s.push(0,1,0),u.push(1-v/t,h/n),h>0&&v!==t){var b=l+(v+1),w=l+v,x=l+v-p,E=l+(v+1)-p;c.push(b,w,x),c.push(b,x,E)}}l+=t+1}return{position:a,normal:s,texcoord:u,indices:c}}function F(e){return function(t){var n=e.apply(this,Array.prototype.slice.call(arguments,1));return r.createBuffersFromArrays(t,n)}}function P(e){return function(t){var n=e.apply(null,Array.prototype.slice.call(arguments,1));return r.createBufferInfoFromArrays(t,n)}}var I=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function k(e,t,n,r){r=r||0;for(var i=e.length,o=0;o<i;++o)t[n+o]=e[o]+r}function z(e,t){var n=c(e),r=new n.constructor(t),o=r;return n.numComponents&&n.numElements&&f(r,n.numComponents),e.data&&(o={data:r},i.copyNamedProperties(I,e,o)),o}var D=P(M);t.create3DFBufferInfo=D;var B=F(M);t.create3DFBuffers=B;var L=P(A);t.createCubeBufferInfo=L;var U=F(A);t.createCubeBuffers=U;var j=P(w);t.createPlaneBufferInfo=j;var G=F(w);t.createPlaneBuffers=G;var H=P(x);t.createSphereBufferInfo=H;var V=F(x);t.createSphereBuffers=V;var X=P(S);t.createTruncatedConeBufferInfo=X;var q=F(S);t.createTruncatedConeBuffers=q;var W=P(b);t.createXYQuadBufferInfo=W;var Y=F(b);t.createXYQuadBuffers=Y;var $=P(N);t.createCrescentBufferInfo=$;var K=F(N);t.createCrescentBuffers=K;var Z=P(O);t.createCylinderBufferInfo=Z;var J=F(O);t.createCylinderBuffers=J;var Q=P(C);t.createTorusBufferInfo=Q;var ee=F(C);t.createTorusBuffers=ee;var te=P(R);t.createDiscBufferInfo=te;var ne=F(R);t.createDiscBuffers=ne;var re=$;t.createCresentBufferInfo=re;var ie=K;t.createCresentBuffers=ie;var oe=N;t.createCresentVertices=oe},"./src/programs.js":
/*!*************************!*\
  !*** ./src/programs.js ***!
  \*************************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0,t.createAttributeSetters=U,t.createProgram=O,t.createProgramFromScripts=function(e,t,n,r,i){for(var o=S(n,r,i),a=[],s=0;s<t.length;++s){var u=C(e,t[s],e[T[s]],o.errorCallback);if(!u)return null;a.push(u)}return O(e,a,o)},t.createProgramFromSources=R,t.createProgramInfo=function(e,t,n,r,i){var o=S(n,r,i),a=!0;if(t=t.map((function(e){if(e.indexOf("\n")<0){var t=u(e);t?e=t.text:(o.errorCallback("no element with id: "+e),a=!1)}return e})),!a)return null;var s=R(e,t,o);return s?G(e,s):null},t.createProgramInfoFromProgram=G,t.createUniformSetters=P,t.createUniformBlockSpecFromProgram=z,t.createUniformBlockInfoFromProgram=B,t.createUniformBlockInfo=function(e,t,n){return B(e,t.program,t.uniformBlockSpec,n)},t.createTransformFeedback=function(e,t,n){var r=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,r),e.useProgram(t.program),k(e,t,n),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),r},t.createTransformFeedbackInfo=I,t.bindTransformFeedbackInfo=k,t.setAttributes=j,t.setBuffersAndAttributes=function(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(j(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.indices))},t.setUniforms=function e(t,n){for(var r=t.uniformSetters||t,i=arguments.length,o=1;o<i;++o){var a=arguments[o];if(Array.isArray(a))for(var s=a.length,u=0;u<s;++u)e(r,a[u]);else for(var c in a){var l=r[c];l&&l(a[c])}}},t.setUniformBlock=function(e,t,n){L(e,t,n)&&e.bufferData(e.UNIFORM_BUFFER,n.array,e.DYNAMIC_DRAW)},t.setBlockUniforms=function(e,t){var n=e.uniforms;for(var r in t){var i=n[r];if(i){var o=t[r];o.length?i.set(o):i[0]=o}}},t.bindUniformBlock=L;var r=o(n(/*! ./utils.js */"./src/utils.js")),i=o(n(/*! ./helper.js */"./src/helper.js"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}var a=i.error,s=i.warn,u="undefined"!=typeof document&&document.getElementById?document.getElementById.bind(document):function(){return null},c={};function l(e,t){return c[t].bindPoint}function f(e,t){return function(n){e.uniform1i(t,n)}}function d(e,t){return function(n){e.uniform1iv(t,n)}}function p(e,t){return function(n){e.uniform2iv(t,n)}}function h(e,t){return function(n){e.uniform3iv(t,n)}}function m(e,t){return function(n){e.uniform4iv(t,n)}}function v(e,t,n,o){var a=l(0,t);return r.isWebGL2(e)?function(t){var r,s;i.isTexture(e,t)?(r=t,s=null):(r=t.texture,s=t.sampler),e.uniform1i(o,n),e.activeTexture(e.TEXTURE0+n),e.bindTexture(a,r),e.bindSampler(n,s)}:function(t){e.uniform1i(o,n),e.activeTexture(e.TEXTURE0+n),e.bindTexture(a,t)}}function g(e,t,n,o,a){for(var s=l(0,t),u=new Int32Array(a),c=0;c<a;++c)u[c]=n+c;return r.isWebGL2(e)?function(t){e.uniform1iv(o,u),t.forEach((function(t,r){var o,a;e.activeTexture(e.TEXTURE0+u[r]),i.isTexture(e,t)?(o=t,a=null):(o=t.texture,a=t.sampler),e.bindSampler(n,a),e.bindTexture(s,o)}))}:function(t){e.uniform1iv(o,u),t.forEach((function(t,n){e.activeTexture(e.TEXTURE0+u[n]),e.bindTexture(s,t)}))}}function y(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(e.ARRAY_BUFFER,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||e.FLOAT,n.normalize||!1,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor)}}function _(e,t){return function(n){if(n.value){if(e.disableVertexAttribArray(t),4!==n.value.length)throw new Error("The length of an integer constant value must be 4!");e.vertexAttrib4iv(t,n.value)}else e.bindBuffer(e.ARRAY_BUFFER,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||e.INT,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor)}}function b(e,t){return function(n){if(n.value){if(e.disableVertexAttribArray(t),4!==n.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");e.vertexAttrib4uiv(t,n.value)}else e.bindBuffer(e.ARRAY_BUFFER,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||e.UNSIGNED_INT,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor)}}function w(e,t,n){var r=n.size,i=n.count;return function(n){e.bindBuffer(e.ARRAY_BUFFER,n.buffer);for(var o=n.size||n.numComponents||r,a=o/i,s=n.type||e.FLOAT,u=c[s].size*o,l=n.normalize||!1,f=n.offset||0,d=u/i,p=0;p<i;++p)e.enableVertexAttribArray(t+p),e.vertexAttribPointer(t+p,a,s,l,u,f+d*p),void 0!==n.divisor&&e.vertexAttribDivisor(t+p,n.divisor)}}c[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(n){e.uniform1f(t,n)}},arraySetter:function(e,t){return function(n){e.uniform1fv(t,n)}}},c[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(n){e.uniform2fv(t,n)}}},c[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(n){e.uniform3fv(t,n)}}},c[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(n){e.uniform4fv(t,n)}}},c[5124]={Type:Int32Array,size:4,setter:f,arraySetter:d},c[35667]={Type:Int32Array,size:8,setter:p},c[35668]={Type:Int32Array,size:12,setter:h},c[35669]={Type:Int32Array,size:16,setter:m},c[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(n){e.uniform1ui(t,n)}},arraySetter:function(e,t){return function(n){e.uniform1uiv(t,n)}}},c[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(n){e.uniform2uiv(t,n)}}},c[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(n){e.uniform3uiv(t,n)}}},c[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(n){e.uniform4uiv(t,n)}}},c[35670]={Type:Uint32Array,size:4,setter:f,arraySetter:d},c[35671]={Type:Uint32Array,size:8,setter:p},c[35672]={Type:Uint32Array,size:12,setter:h},c[35673]={Type:Uint32Array,size:16,setter:m},c[35674]={Type:Float32Array,size:16,setter:function(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}},c[35675]={Type:Float32Array,size:36,setter:function(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}},c[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}},c[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}},c[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}},c[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}},c[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}},c[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}},c[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}},c[35678]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:3553},c[35680]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:34067},c[35679]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:32879},c[35682]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:3553},c[36289]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:35866},c[36292]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:35866},c[36293]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:34067},c[36298]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:3553},c[36299]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:32879},c[36300]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:34067},c[36303]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:35866},c[36306]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:3553},c[36307]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:32879},c[36308]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:34067},c[36311]={Type:null,size:0,setter:v,arraySetter:g,bindPoint:35866};var x={};x[5126]={size:4,setter:y},x[35664]={size:8,setter:y},x[35665]={size:12,setter:y},x[35666]={size:16,setter:y},x[5124]={size:4,setter:_},x[35667]={size:8,setter:_},x[35668]={size:12,setter:_},x[35669]={size:16,setter:_},x[5125]={size:4,setter:b},x[36294]={size:8,setter:b},x[36295]={size:12,setter:b},x[36296]={size:16,setter:b},x[35670]={size:4,setter:_},x[35671]={size:8,setter:_},x[35672]={size:12,setter:_},x[35673]={size:16,setter:_},x[35674]={size:4,setter:w,count:2},x[35675]={size:9,setter:w,count:3},x[35676]={size:16,setter:w,count:4};var E=/^[ \t]*\n/;function A(e,t,n,r){var i=r||a,o=e.createShader(n),s=0;if(E.test(t)&&(s=1,t=t.replace(E,"")),e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var u=e.getShaderInfoLog(o);return i(function(e,t){return t=t||0,++t,e.split("\n").map((function(e,n){return n+t+": "+e})).join("\n")}(t,s)+"\n*** Error compiling shader: "+u),e.deleteShader(o),null}return o}function S(e,t,n){var r;if("function"==typeof t&&(n=t,t=void 0),"function"==typeof e)n=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var i=e;n=i.errorCallback,e=i.attribLocations,r=i.transformFeedbackVaryings}var o={errorCallback:n||a,transformFeedbackVaryings:r};if(e){var s={};Array.isArray(e)?e.forEach((function(e,n){s[e]=t?t[n]:n})):s=e,o.attribLocations=s}return o}var T=["VERTEX_SHADER","FRAGMENT_SHADER"];function M(e,t){return t.indexOf("frag")>=0?e.FRAGMENT_SHADER:t.indexOf("vert")>=0?e.VERTEX_SHADER:void 0}function N(e,t){t.forEach((function(t){e.deleteShader(t)}))}function O(e,t,n,r,o){for(var a=S(n,r,o),s=[],c=[],l=0;l<t.length;++l){var f=t[l];if("string"==typeof f){var d=u(f),p=d?d.text:f,h=e[T[l]];d&&d.type&&(h=M(e,d.type)||h),f=A(e,p,h,a.errorCallback),c.push(f)}i.isShader(e,f)&&s.push(f)}if(s.length!==t.length)return a.errorCallback("not enough shaders for program"),N(e,c),null;var m=e.createProgram();s.forEach((function(t){e.attachShader(m,t)})),a.attribLocations&&Object.keys(a.attribLocations).forEach((function(t){e.bindAttribLocation(m,a.attribLocations[t],t)}));var v=a.transformFeedbackVaryings;if(v&&(v.attribs&&(v=v.attribs),Array.isArray(v)||(v=Object.keys(v)),e.transformFeedbackVaryings(m,v,a.transformFeedbackMode||e.SEPARATE_ATTRIBS)),e.linkProgram(m),!e.getProgramParameter(m,e.LINK_STATUS)){var g=e.getProgramInfoLog(m);return a.errorCallback("Error in program linking:"+g),e.deleteProgram(m),N(e,c),null}return m}function C(e,t,n,r){var i,o=u(t);if(!o)throw new Error("unknown script element: ".concat(t));i=o.text;var a=n||M(e,o.type);if(!a)throw new Error("unknown shader type");return A(e,i,a,r)}function R(e,t,n,r,i){for(var o=S(n,r,i),a=[],s=0;s<t.length;++s){var u=A(e,t[s],e[T[s]],o.errorCallback);if(!u)return null;a.push(u)}return O(e,a,o)}function F(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function P(e,t){var n=0;function r(t,r){var i,o=e.getUniformLocation(t,r.name),a=r.size>1&&"[0]"===r.name.substr(-3),s=r.type,u=c[s];if(!u)throw new Error("unknown type: 0x".concat(s.toString(16)));if(u.bindPoint){var l=n;n+=r.size,i=a?u.arraySetter(e,s,l,o,r.size):u.setter(e,s,l,o,r.size)}else i=u.arraySetter&&a?u.arraySetter(e,o):u.setter(e,o);return i.location=o,i}for(var i={},o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=0;a<o;++a){var s=e.getActiveUniform(t,a);if(!F(s)){var u=s.name;"[0]"===u.substr(-3)&&(u=u.substr(0,u.length-3));var l=r(t,s);i[u]=l}}return i}function I(e,t){for(var n={},r=e.getProgramParameter(t,e.TRANSFORM_FEEDBACK_VARYINGS),i=0;i<r;++i){var o=e.getTransformFeedbackVarying(t,i);n[o.name]={index:i,type:o.type,size:o.size}}return n}function k(e,t,n){for(var r in t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),n.attribs&&(n=n.attribs),n){var i=t[r];if(i){var o=n[r];o.offset?e.bindBufferRange(e.TRANSFORM_FEEDBACK_BUFFER,i.index,o.buffer,o.offset,o.size):e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,i.index,o.buffer)}}}function z(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=[],i=[],o=0;o<n;++o){i.push(o),r.push({});var a=e.getActiveUniform(t,o);if(F(a))break;r[o].name=a.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(n){var o=n[0],a=n[1];e.getActiveUniforms(t,i,e[o]).forEach((function(e,t){r[t][a]=e}))}));for(var s={},u=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS),c=0;c<u;++c){var l=e.getActiveUniformBlockName(t,c),f={index:c,usedByVertexShader:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};f.used=f.usedByVertexShader||f.usedByFragmentShader,s[l]=f}return{blockSpecs:s,uniformData:r}}var D=/\[\d+\]\.$/;function B(e,t,n,r){var i=n.blockSpecs,o=n.uniformData,a=i[r];if(!a)return s("no uniform block object named:",r),{name:r,uniforms:{}};var u=new ArrayBuffer(a.size),l=e.createBuffer(),f=a.index;e.bindBuffer(e.UNIFORM_BUFFER,l),e.uniformBlockBinding(t,a.index,f);var d=r+".";D.test(d)&&(d=d.replace(D,"."));var p={};return a.uniformIndices.forEach((function(e){var t=o[e],n=c[t.type],r=n.Type,i=t.size*n.size,a=t.name;a.substr(0,d.length)===d&&(a=a.substr(d.length)),p[a]=new r(u,t.offset,i/r.BYTES_PER_ELEMENT)})),{name:r,array:u,asFloat:new Float32Array(u),buffer:l,uniforms:p}}function L(e,t,n){var r=(t.uniformBlockSpec||t).blockSpecs[n.name];if(r){var i=r.index;return e.bindBufferRange(e.UNIFORM_BUFFER,i,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function U(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;++i){var o=e.getActiveAttrib(t,i);if(!F(o)){var a=e.getAttribLocation(t,o.name),s=x[o.type],u=s.setter(e,a,s);u.location=a,n[o.name]=u}}return n}function j(e,t){for(var n in t){var r=e[n];r&&r(t[n])}}function G(e,t){var n={program:t,uniformSetters:P(e,t),attribSetters:U(e,t)};return r.isWebGL2(e)&&(n.uniformBlockSpec=z(e,t),n.transformFeedbackInfo=I(e,t)),n}},"./src/textures.js":
/*!*************************!*\
  !*** ./src/textures.js ***!
  \*************************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0,t.setTextureDefaults_=function(e){o.copyExistingProperties(e,s),e.textureColor&&E(e.textureColor)},t.createSampler=F,t.createSamplers=function(e,t){var n={};return Object.keys(t).forEach((function(r){n[r]=F(e,t[r])})),n},t.setSamplerParameters=R,t.createTexture=Y,t.setEmptyTexture=W,t.setTextureFromArray=q,t.loadTextureFromUrl=H,t.setTextureFromElement=D,t.setTextureFilteringForSize=P,t.setTextureParameters=C,t.setDefaultTextureColor=E,t.createTextures=function(e,t,n){n=n||B;var r=0,i=[],o={},a={};function s(){0===r&&setTimeout((function(){n(i.length?i:void 0,o,a)}),0)}return Object.keys(t).forEach((function(n){var u,c,l=t[n];("string"==typeof(c=l.src)||Array.isArray(c)&&"string"==typeof c[0])&&(u=function(e,t,o){a[n]=o,--r,e&&i.push(e),s()},++r),o[n]=Y(e,l,u)})),s(),o},t.resizeTexture=function(e,t,n,r,i){r=r||n.width,i=i||n.height;var o=n.target||e.TEXTURE_2D;e.bindTexture(o,t);var a,s=n.level||0,c=n.internalFormat||n.format||e.RGBA,l=g(c),f=n.format||l.format,d=n.src;if(a=d&&(u(d)||Array.isArray(d)&&"number"==typeof d[0])?n.type||w(e,d,l.type):n.type||l.type,o===e.TEXTURE_CUBE_MAP)for(var p=0;p<6;++p)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,s,c,r,i,0,f,a,null);else e.texImage2D(o,s,c,r,i,0,f,a,null)},t.canGenerateMipmap=_,t.canFilter=b,t.getNumComponentsForFormat=function(e){var t=d[e];if(!t)throw"unknown format: "+e;return t.numColorComponents},t.getBytesPerElementForInternalFormat=v,t.getFormatAndTypeForInternalFormat=g;var r=a(n(/*! ./utils.js */"./src/utils.js")),i=a(n(/*! ./typedarrays.js */"./src/typedarrays.js")),o=a(n(/*! ./helper.js */"./src/helper.js"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}var s={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},u=i.isArrayBuffer,c="undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null,l=6407,f=33319,d={},p=d;p[6406]={numColorComponents:1},p[6409]={numColorComponents:1},p[6410]={numColorComponents:2},p[l]={numColorComponents:3},p[6408]={numColorComponents:4},p[6403]={numColorComponents:1},p[36244]={numColorComponents:1},p[f]={numColorComponents:2},p[33320]={numColorComponents:2},p[l]={numColorComponents:3},p[36248]={numColorComponents:3},p[6408]={numColorComponents:4},p[36249]={numColorComponents:4},p[6402]={numColorComponents:1},p[34041]={numColorComponents:2};var h={},m=h;function v(e,t){var n=h[e];if(!n)throw"unknown internal format";var r=n.bytesPerElementMap[t];if(void 0===r)throw"unknown internal format";return r}function g(e){var t=h[e];if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function y(e){return 0==(e&e-1)}function _(e,t,n,i){if(!r.isWebGL2(e))return y(t)&&y(n);var o=h[i];if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function b(e){var t=h[e];if(!t)throw"unknown internal format";return t.textureFilterable}function w(e,t,n){return u(t)?i.getGLTypeForTypedArray(t):n||e.UNSIGNED_BYTE}function x(e,t,n,r,i){if(i%1!=0)throw"can't guess dimensions";if(n||r){if(r){if(!n&&(n=i/r)%1)throw"can't guess dimensions"}else if((r=i/n)%1)throw"can't guess dimensions"}else{var o=Math.sqrt(i/(t===e.TEXTURE_CUBE_MAP?6:1));o%1==0?(n=o,r=o):(n=i,r=1)}return{width:n,height:r}}function E(e){s.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}m[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},m[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},m[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},m[l]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},m[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},m[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[5121]},m[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[5120]},m[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},m[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[5126]},m[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5121]},m[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5120]},m[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5123]},m[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5122]},m[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},m[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5124]},m[33323]={textureFormat:f,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[5121]},m[36757]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[5120]},m[33327]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},m[33328]={textureFormat:f,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[5126]},m[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5121]},m[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5120]},m[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5123]},m[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5122]},m[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5125]},m[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5124]},m[32849]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[5121]},m[35905]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5121]},m[36194]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},m[36758]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5120]},m[35898]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},m[35901]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},m[34843]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},m[34837]={textureFormat:l,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5126]},m[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5121]},m[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5120]},m[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5123]},m[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5122]},m[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5125]},m[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5124]},m[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},m[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},m[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[5120]},m[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},m[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},m[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[33640]},m[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},m[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[5126]},m[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5121]},m[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5120]},m[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[33640]},m[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5123]},m[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5122]},m[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5124]},m[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5125]},m[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},m[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},m[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5126]},m[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},m[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]},Object.keys(m).forEach((function(e){var t=m[e];t.bytesPerElementMap={},t.bytesPerElement.forEach((function(e,n){var r=t.type[n];t.bytesPerElementMap[r]=e}))}));var A={};function S(e,t){void 0!==t.colorspaceConversion&&(A.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion)),void 0!==t.premultiplyAlpha&&(A.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha)),void 0!==t.flipY&&(A.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY))}function T(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,A.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,A.flipY)}function M(e){A.unpackAlignment=e.getParameter(e.UNPACK_ALIGNMENT),r.isWebGL2(e)&&(A.unpackRowLength=e.getParameter(e.UNPACK_ROW_LENGTH),A.unpackImageHeight=e.getParameter(e.UNPACK_IMAGE_HEIGHT),A.unpackSkipPixels=e.getParameter(e.UNPACK_SKIP_PIXELS),A.unpackSkipRows=e.getParameter(e.UNPACK_SKIP_ROWS),A.unpackSkipImages=e.getParameter(e.UNPACK_SKIP_IMAGES))}function N(e){e.pixelStorei(e.UNPACK_ALIGNMENT,A.unpackAlignment),r.isWebGL2(e)&&(e.pixelStorei(e.UNPACK_ROW_LENGTH,A.unpackRowLength),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,A.unpackImageHeight),e.pixelStorei(e.UNPACK_SKIP_PIXELS,A.unpackSkipPixels),e.pixelStorei(e.UNPACK_SKIP_ROWS,A.unpackSkipRows),e.pixelStorei(e.UNPACK_SKIP_IMAGES,A.unpackSkipImages))}function O(e,t,n,r){r.minMag&&(n.call(e,t,e.TEXTURE_MIN_FILTER,r.minMag),n.call(e,t,e.TEXTURE_MAG_FILTER,r.minMag)),r.min&&n.call(e,t,e.TEXTURE_MIN_FILTER,r.min),r.mag&&n.call(e,t,e.TEXTURE_MAG_FILTER,r.mag),r.wrap&&(n.call(e,t,e.TEXTURE_WRAP_S,r.wrap),n.call(e,t,e.TEXTURE_WRAP_T,r.wrap),(t===e.TEXTURE_3D||o.isSampler(e,t))&&n.call(e,t,e.TEXTURE_WRAP_R,r.wrap)),r.wrapR&&n.call(e,t,e.TEXTURE_WRAP_R,r.wrapR),r.wrapS&&n.call(e,t,e.TEXTURE_WRAP_S,r.wrapS),r.wrapT&&n.call(e,t,e.TEXTURE_WRAP_T,r.wrapT),r.minLod&&n.call(e,t,e.TEXTURE_MIN_LOD,r.minLod),r.maxLod&&n.call(e,t,e.TEXTURE_MAX_LOD,r.maxLod),r.baseLevel&&n.call(e,t,e.TEXTURE_BASE_LEVEL,r.baseLevel),r.maxLevel&&n.call(e,t,e.TEXTURE_MAX_LEVEL,r.maxLevel)}function C(e,t,n){var r=n.target||e.TEXTURE_2D;e.bindTexture(r,t),O(e,r,e.texParameteri,n)}function R(e,t,n){O(e,t,e.samplerParameteri,n)}function F(e,t){var n=e.createSampler();return R(e,n,t),n}function P(e,t,n,r,i,o,a){n=n||s.textureOptions,o=o||e.RGBA,a=a||e.UNSIGNED_BYTE;var u=n.target||e.TEXTURE_2D;if(r=r||n.width,i=i||n.height,e.bindTexture(u,t),_(e,r,i,o))e.generateMipmap(u);else{var c=b(o)?e.LINEAR:e.NEAREST;e.texParameteri(u,e.TEXTURE_MIN_FILTER,c),e.texParameteri(u,e.TEXTURE_MAG_FILTER,c),e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function I(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function k(e,t){return(t=t||{}).cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function z(e,t){var n=k(e,t).map((function(e,t){return{face:e,ndx:t}}));return n.sort((function(e,t){return e.face-t.face})),n}function D(e,t,n,r){var i=(r=r||s.textureOptions).target||e.TEXTURE_2D,o=r.level||0,a=n.width,u=n.height,l=r.internalFormat||r.format||e.RGBA,f=g(l),d=r.format||f.format,p=r.type||f.type;if(S(e,r),e.bindTexture(i,t),i===e.TEXTURE_CUBE_MAP){var h,m,v=n.width,y=n.height;if(v/6===y)h=y,m=[0,0,1,0,2,0,3,0,4,0,5,0];else if(y/6===v)h=v,m=[0,0,0,1,0,2,0,3,0,4,0,5];else if(v/3==y/2)h=v/3,m=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(v/2!=y/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);h=v/2,m=[0,0,1,0,0,1,1,1,0,2,1,2]}c?(c.canvas.width=h,c.canvas.height=h,a=h,u=h,z(e,r).forEach((function(t){var r=m[2*t.ndx+0]*h,i=m[2*t.ndx+1]*h;c.drawImage(n,r,i,h,h,0,0,h,h),e.texImage2D(t.face,o,l,d,p,c.canvas)})),c.canvas.width=1,c.canvas.height=1):"undefined"!=typeof createImageBitmap&&(a=h,u=h,z(e,r).forEach((function(s){var c=m[2*s.ndx+0]*h,f=m[2*s.ndx+1]*h;e.texImage2D(s.face,o,l,h,h,0,d,p,null),createImageBitmap(n,c,f,h,h,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(n){S(e,r),e.bindTexture(i,t),e.texImage2D(s.face,o,l,d,p,n),T(e,r),I(r)&&P(e,t,r,a,u,l,p)}))})))}else if(i===e.TEXTURE_3D||i===e.TEXTURE_2D_ARRAY){var _=Math.min(n.width,n.height),b=Math.max(n.width,n.height),w=b/_;if(w%1!=0)throw"can not compute 3D dimensions of element";var x=n.width===b?1:0,E=n.height===b?1:0;M(e),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.pixelStorei(e.UNPACK_ROW_LENGTH,n.width),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.texImage3D(i,o,l,_,_,_,0,d,p,null);for(var A=0;A<w;++A){var O=A*_*x,R=A*_*E;e.pixelStorei(e.UNPACK_SKIP_PIXELS,O),e.pixelStorei(e.UNPACK_SKIP_ROWS,R),e.texSubImage3D(i,o,0,0,A,_,_,1,d,p,n)}N(e)}else e.texImage2D(i,o,l,d,p,n);T(e,r),I(r)&&P(e,t,r,a,u,l,p),C(e,t,r)}function B(){}function L(e,t){return void 0!==t||function(e){if("undefined"!=typeof document){var t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}var n=new URL(location.href).origin;return new URL(e,location.href).origin===n}(e)?t:"anonymous"}function U(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function j(e,t,n){return U(e)?(setTimeout((function(){n(null,e)})),e):function(e,t,n){var r;if(n=n||B,t=void 0!==t?t:s.crossOrigin,t=L(e,t),"undefined"!=typeof Image){r=new Image,void 0!==t&&(r.crossOrigin=t);var i=function(){r.removeEventListener("error",a),r.removeEventListener("load",u),r=null},a=function(){var t="couldn't load image: "+e;o.error(t),n(t,r),i()},u=function(){n(null,r),i()};return r.addEventListener("error",a),r.addEventListener("load",u),r.src=e,r}if("undefined"!=typeof ImageBitmap){var c,l,f=function(){n(c,l)},d={};t&&(d.mode="cors"),fetch(e,d).then((function(e){if(!e.ok)throw e;return e.blob()})).then((function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(e){l=e,setTimeout(f)})).catch((function(e){c=e,setTimeout(f)})),r=null}return r}(e,t,n)}function G(e,t,n){var r=(n=n||s.textureOptions).target||e.TEXTURE_2D;if(e.bindTexture(r,t),!1!==n.color){var i=function(e){return e=e||s.textureColor,u(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(n.color);if(r===e.TEXTURE_CUBE_MAP)for(var o=0;o<6;++o)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);else r===e.TEXTURE_3D||r===e.TEXTURE_2D_ARRAY?e.texImage3D(r,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i):e.texImage2D(r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i)}}function H(e,t,n,r){return r=r||B,n=n||s.textureOptions,G(e,t,n),j((n=Object.assign({},n)).src,n.crossOrigin,(function(i,o){i?r(i,t,o):(D(e,t,o,n),r(null,t,o))}))}function V(e,t,n,r){r=r||B;var i=n.src;if(6!==i.length)throw"there must be 6 urls for a cubemap";var o=n.level||0,a=n.internalFormat||n.format||e.RGBA,s=g(a),u=n.format||s.format,c=n.type||e.UNSIGNED_BYTE,l=n.target||e.TEXTURE_2D;if(l!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";G(e,t,n),n=Object.assign({},n);var f,d=6,p=[],h=k(e,n);f=i.map((function(i,s){return j(i,n.crossOrigin,(m=h[s],function(i,s){--d,i?p.push(i):s.width!==s.height?p.push("cubemap face img is not a square: "+s.src):(S(e,n),e.bindTexture(l,t),5===d?k(e).forEach((function(t){e.texImage2D(t,o,a,u,c,s)})):e.texImage2D(m,o,a,u,c,s),T(e,n),I(n)&&e.generateMipmap(l)),0===d&&r(p.length?p:void 0,t,f)}));var m}))}function X(e,t,n,r){r=r||B;var i=n.src,o=n.internalFormat||n.format||e.RGBA,a=g(o),s=n.format||a.format,u=n.type||e.UNSIGNED_BYTE,l=n.target||e.TEXTURE_2D_ARRAY;if(l!==e.TEXTURE_3D&&l!==e.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";G(e,t,n),n=Object.assign({},n);var f,d=i.length,p=[],h=n.level||0,m=n.width,v=n.height,y=i.length,_=!0;f=i.map((function(i,a){return j(i,n.crossOrigin,(g=a,function(i,a){if(--d,i)p.push(i);else{if(S(e,n),e.bindTexture(l,t),_){_=!1,m=n.width||a.width,v=n.height||a.height,e.texImage3D(l,h,o,m,v,y,0,s,u,null);for(var b=0;b<y;++b)e.texSubImage3D(l,h,0,0,b,m,v,1,s,u,a)}else{var w=a;a.width===m&&a.height===v||(w=c.canvas,c.canvas.width=m,c.canvas.height=v,c.drawImage(a,0,0,m,v)),e.texSubImage3D(l,h,0,0,g,m,v,1,s,u,w),w===c.canvas&&(c.canvas.width=0,c.canvas.height=0)}T(e,n),I(n)&&e.generateMipmap(l)}0===d&&r(p.length?p:void 0,t,f)}));var g}))}function q(e,t,n,o){var a=(o=o||s.textureOptions).target||e.TEXTURE_2D;e.bindTexture(a,t);var c=o.width,l=o.height,f=o.depth,d=o.level||0,p=o.internalFormat||o.format||e.RGBA,h=g(p),m=o.format||h.format,y=o.type||w(e,n,h.type);if(u(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{var _=i.getTypedArrayTypeForGLType(y);n=new _(n)}var b,E=v(p,y),A=n.byteLength/E;if(A%1)throw"length wrong size for format: "+r.glEnumToString(e,m);if(a===e.TEXTURE_3D)if(c||l||f)!c||l&&f?!l||c&&f?(b=x(e,a,c,l,A/f),c=b.width,l=b.height):(b=x(e,a,c,f,A/l),c=b.width,f=b.height):(b=x(e,a,l,f,A/c),l=b.width,f=b.height);else{var O=Math.cbrt(A);if(O%1!=0)throw"can't guess cube size of array of numElements: "+A;c=O,l=O,f=O}else b=x(e,a,c,l,A),c=b.width,l=b.height;if(M(e),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment||1),S(e,o),a===e.TEXTURE_CUBE_MAP){var C=A/6*(E/n.BYTES_PER_ELEMENT);z(e,o).forEach((function(t){var r=C*t.ndx,i=n.subarray(r,r+C);e.texImage2D(t.face,d,p,c,l,0,m,y,i)}))}else a===e.TEXTURE_3D?e.texImage3D(a,d,p,c,l,f,0,m,y,n):e.texImage2D(a,d,p,c,l,0,m,y,n);return T(e,o),N(e),{width:c,height:l,depth:f,type:y}}function W(e,t,n){var r=n.target||e.TEXTURE_2D;e.bindTexture(r,t);var i=n.level||0,o=n.internalFormat||n.format||e.RGBA,a=g(o),s=n.format||a.format,u=n.type||a.type;if(S(e,n),r===e.TEXTURE_CUBE_MAP)for(var c=0;c<6;++c)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+c,i,o,n.width,n.height,0,s,u,null);else r===e.TEXTURE_3D?e.texImage3D(r,i,o,n.width,n.height,n.depth,0,s,u,null):e.texImage2D(r,i,o,n.width,n.height,0,s,u,null);T(e,n)}function Y(e,t,n){n=n||B,t=t||s.textureOptions;var r=e.createTexture(),i=t.target||e.TEXTURE_2D,o=t.width||1,a=t.height||1,c=t.internalFormat||e.RGBA,l=g(c),f=t.type||l.type;e.bindTexture(i,r),i===e.TEXTURE_CUBE_MAP&&(e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var d=t.src;if(d)if("function"==typeof d&&(d=d(e,t)),"string"==typeof d)H(e,r,t,n);else if(u(d)||Array.isArray(d)&&("number"==typeof d[0]||Array.isArray(d[0])||u(d[0]))){var p=q(e,r,d,t);o=p.width,a=p.height,f=p.type}else if(Array.isArray(d)&&("string"==typeof d[0]||U(d[0])))i===e.TEXTURE_CUBE_MAP?V(e,r,t,n):X(e,r,t,n);else{if(!U(d))throw"unsupported src type";D(e,r,d,t),o=d.width,a=d.height}else W(e,r,t);return I(t)&&P(e,r,t,o,a,c,f),C(e,r,t),r}},"./src/twgl-full.js":
/*!**************************!*\
  !*** ./src/twgl-full.js ***!
  \**************************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0;var r={m4:!0,v3:!0,primitives:!0};t.primitives=t.v3=t.m4=void 0;var i=u(n(/*! ./m4.js */"./src/m4.js"));t.m4=i;var o=u(n(/*! ./v3.js */"./src/v3.js"));t.v3=o;var a=u(n(/*! ./primitives.js */"./src/primitives.js"));t.primitives=a;var s=n(/*! ./twgl.js */"./src/twgl.js");function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||(t[e]=s[e]))}))},"./src/twgl.js":
/*!*********************!*\
  !*** ./src/twgl.js ***!
  \*********************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0;var r={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0,attributes:!0,textures:!0,utils:!0,draw:!0,framebuffers:!0,programs:!0,typedarrays:!0,vertexArrays:!0};t.addExtensionsToContext=y,t.getContext=function(e,t){return function(e,t){for(var n=["webgl2","webgl","experimental-webgl"],r=null,i=0;i<n.length;++i)if(r=e.getContext(n[i],t)){h.addExtensionsToContext&&y(r);break}return r}(e,t)},t.getWebGLContext=function(e,t){return function(e,t){for(var n=["webgl","experimental-webgl"],r=null,i=0;i<n.length;++i)if(r=e.getContext(n[i],t)){h.addExtensionsToContext&&y(r);break}return r}(e,t)},t.resizeCanvasToDisplaySize=function(e,t){t=t||1,t=Math.max(0,t);var n=e.clientWidth*t|0,r=e.clientHeight*t|0;return(e.width!==n||e.height!==r)&&(e.width=n,e.height=r,!0)},t.setDefaults=function(e){a.copyExistingProperties(e,h),i.setAttributeDefaults_(e),o.setTextureDefaults_(e)},t.vertexArrays=t.typedarrays=t.programs=t.framebuffers=t.draw=t.utils=t.textures=t.attributes=void 0;var i=p(n(/*! ./attributes.js */"./src/attributes.js"));t.attributes=i,Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||(t[e]=i[e]))}));var o=p(n(/*! ./textures.js */"./src/textures.js"));t.textures=o,Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||(t[e]=o[e]))}));var a=p(n(/*! ./helper.js */"./src/helper.js")),s=p(n(/*! ./utils.js */"./src/utils.js"));t.utils=s,Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||(t[e]=s[e]))}));var u=p(n(/*! ./draw.js */"./src/draw.js"));t.draw=u,Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||(t[e]=u[e]))}));var c=p(n(/*! ./framebuffers.js */"./src/framebuffers.js"));t.framebuffers=c,Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||(t[e]=c[e]))}));var l=p(n(/*! ./programs.js */"./src/programs.js"));t.programs=l,Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||(t[e]=l[e]))}));var f=p(n(/*! ./typedarrays.js */"./src/typedarrays.js"));t.typedarrays=f,Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||(t[e]=f[e]))}));var d=p(n(/*! ./vertex-arrays.js */"./src/vertex-arrays.js"));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}t.vertexArrays=d,Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||(t[e]=d[e]))}));var h={addExtensionsToContext:!0},m=/^(.*?)_/;function v(e,t){s.glEnumToString(e,0);var n=e.getExtension(t);if(n){var r={},i=m.exec(t)[1],o="_"+i;for(var u in n){var c=n[u],l="function"==typeof c,f=l?i:o,d=u;u.endsWith(f)&&(d=u.substring(0,u.length-f.length)),void 0!==e[d]?l||e[d]===c||a.warn(d,e[d],c,u):l?e[d]=function(e){return function(){return e.apply(n,arguments)}}(c):(e[d]=c,r[d]=c)}r.constructor={name:n.constructor.name},s.glEnumToString(r,0)}return n}var g=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function y(e){for(var t=0;t<g.length;++t)v(e,g[t])}},"./src/typedarrays.js":
/*!****************************!*\
  !*** ./src/typedarrays.js ***!
  \****************************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0,t.getGLTypeForTypedArray=function(e){if(e instanceof Int8Array)return r;if(e instanceof Uint8Array)return i;if(e instanceof Uint8ClampedArray)return i;if(e instanceof Int16Array)return o;if(e instanceof Uint16Array)return a;if(e instanceof Int32Array)return s;if(e instanceof Uint32Array)return u;if(e instanceof Float32Array)return c;throw new Error("unsupported typed array type")},t.getGLTypeForTypedArrayType=function(e){if(e===Int8Array)return r;if(e===Uint8Array)return i;if(e===Uint8ClampedArray)return i;if(e===Int16Array)return o;if(e===Uint16Array)return a;if(e===Int32Array)return s;if(e===Uint32Array)return u;if(e===Float32Array)return c;throw new Error("unsupported typed array type")},t.getTypedArrayTypeForGLType=function(e){var t=l[e];if(!t)throw new Error("unknown gl type");return t},t.isArrayBuffer=void 0;var r=5120,i=5121,o=5122,a=5123,s=5124,u=5125,c=5126,l={},f=l;f[r]=Int8Array,f[i]=Uint8Array,f[o]=Int16Array,f[a]=Uint16Array,f[s]=Int32Array,f[u]=Uint32Array,f[c]=Float32Array,f[32819]=Uint16Array,f[32820]=Uint16Array,f[33635]=Uint16Array,f[5131]=Uint16Array,f[33640]=Uint32Array,f[35899]=Uint32Array,f[35902]=Uint32Array,f[36269]=Uint32Array,f[34042]=Uint32Array;var d="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};t.isArrayBuffer=d},"./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0,t.isWebGL1=function(e){return!e.texStorage2D},t.isWebGL2=function(e){return!!e.texStorage2D},t.glEnumToString=void 0;var r,i,o=(r={},i={},function(e,t){return function(e){var t=e.constructor.name;if(!r[t]){for(var n in e)if("number"==typeof e[n]){var o=i[e[n]];i[e[n]]=o?"".concat(o," | ").concat(n):n}r[t]=!0}}(e),i[t]||"0x"+t.toString(16)});t.glEnumToString=o},"./src/v3.js":
/*!*******************!*\
  !*** ./src/v3.js ***!
  \*******************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0,t.add=function(e,t,n){return(n=n||new r(3))[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n},t.copy=function(e,t){return(t=t||new r(3))[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.create=function(e,t,n){var i=new r(3);return e&&(i[0]=e),t&&(i[1]=t),n&&(i[2]=n),i},t.cross=function(e,t,n){n=n||new r(3);var i=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];return n[0]=e[1]*t[2]-e[2]*t[1],n[1]=i,n[2]=o,n},t.distance=function(e,t){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)},t.distanceSq=function(e,t){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i},t.divide=function(e,t,n){return(n=n||new r(3))[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n},t.divScalar=function(e,t,n){return(n=n||new r(3))[0]=e[0]/t,n[1]=e[1]/t,n[2]=e[2]/t,n},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},t.lerp=function(e,t,n,i){return(i=i||new r(3))[0]=e[0]+n*(t[0]-e[0]),i[1]=e[1]+n*(t[1]-e[1]),i[2]=e[2]+n*(t[2]-e[2]),i},t.lerpV=function(e,t,n,i){return(i=i||new r(3))[0]=e[0]+n[0]*(t[0]-e[0]),i[1]=e[1]+n[1]*(t[1]-e[1]),i[2]=e[2]+n[2]*(t[2]-e[2]),i},t.length=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},t.lengthSq=function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},t.max=function(e,t,n){return(n=n||new r(3))[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n},t.min=function(e,t,n){return(n=n||new r(3))[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n},t.mulScalar=function(e,t,n){return(n=n||new r(3))[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n},t.multiply=function(e,t,n){return(n=n||new r(3))[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n},t.negate=function(e,t){return(t=t||new r(3))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},t.normalize=function(e,t){t=t||new r(3);var n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=Math.sqrt(n);return i>1e-5?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=0,t[1]=0,t[2]=0),t},t.setDefaultType=function(e){var t=r;return r=e,t},t.subtract=function(e,t,n){return(n=n||new r(3))[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n};var r=Float32Array},"./src/vertex-arrays.js":
/*!******************************!*\
  !*** ./src/vertex-arrays.js ***!
  \******************************/
/*! no static exports found */function(e,t,n){"use strict";t.__esModule=!0,t.createVertexArrayInfo=function(e,t,n){var i=e.createVertexArray();return e.bindVertexArray(i),t.length||(t=[t]),t.forEach((function(t){r.setBuffersAndAttributes(e,t,n)})),e.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:i}},t.createVAOAndSetAttributes=i,t.createVAOFromBufferInfo=function(e,t,n){return i(e,t.attribSetters||t,n.attribs,n.indices)};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(/*! ./programs.js */"./src/programs.js"));function i(e,t,n,i){var o=e.createVertexArray();return e.bindVertexArray(o),r.setAttributes(t,n),i&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i),e.bindVertexArray(null),o}}})},e.exports=r()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){function e(){return!0}function t(){return!1}function n(){}return function r(){var i=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e&&null!==e&&e.constructor===Object}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],o={name:"any",test:e},a=[],s=[],u={types:i,conversions:s,ignore:a};function c(e){var t=L(u.types,(function(t){return t.name===e}));if(t)return t;if("any"===e)return o;var n=L(u.types,(function(t){return t.name.toLowerCase()===e.toLowerCase()}));throw new TypeError('Unknown type "'+e+'"'+(n?'. Did you mean "'+n.name+'"?':""))}function l(e){return e===o?999:u.types.indexOf(e)}function f(e){var t=L(u.types,(function(t){return t.test(e)}));if(t)return t.name;throw new TypeError("Value has unknown type. Value: "+e)}function d(e){return e.map((function(e){var t=e.types.map(b);return(e.restParam?"...":"")+t.join("|")})).join(",")}function p(e,t){var n=0===e.indexOf("..."),r=(n?e.length>3?e.slice(3):"any":e).split("|").map(F).filter(P).filter(R),i=function(e,t){var n={};return e.forEach((function(e){-1!==t.indexOf(e.from)||-1===t.indexOf(e.to)||n[e.from]||(n[e.from]=e)})),Object.keys(n).map((function(e){return n[e]}))}(t,r),o=r.map((function(e){var t=c(e);return{name:e,typeIndex:l(t),test:t.test,conversion:null,conversionIndex:-1}})),a=i.map((function(e){var n=c(e.from);return{name:e.from,typeIndex:l(n),test:n.test,conversion:e,conversionIndex:t.indexOf(e)}}));return{types:o.concat(a),restParam:n}}function h(e){var t=z(e);return!!t&&t.restParam}function m(e){return e.types.some((function(e){return null!=e.conversion}))}function v(t){if(t&&0!==t.types.length){if(1===t.types.length)return c(t.types[0].name).test;if(2===t.types.length){var n=c(t.types[0].name).test,r=c(t.types[1].name).test;return function(e){return n(e)||r(e)}}var i=t.types.map((function(e){return c(e.name).test}));return function(e){for(var t=0;t<i.length;t++)if(i[t](e))return!0;return!1}}return e}function g(e){var t,n,r,i;if(h(e)){var o=(t=(i=e,i.slice(0,i.length-1)).map(v)).length,a=v(z(e));return function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return function(e){for(var t=o;t<e.length;t++)if(!a(e[t]))return!1;return!0}(e)&&e.length>=o+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=v(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=v(e[0]),r=v(e[1]),function(e){return n(e[0])&&r(e[1])&&2===e.length}):(t=e.map(v),function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}function y(e,t){return t<e.params.length?e.params[t]:h(e.params)?z(e.params):null}function _(e,t,n){var r=y(e,t);return(r?n?r.types.filter(w):r.types:[]).map(b)}function b(e){return e.name}function w(e){return null===e.conversion||void 0===e.conversion}function x(e,t){var n=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return Object.keys(t)}(U(e,(function(e){return _(e,t,!1)})));return-1!==n.indexOf("any")?["any"]:n}function E(e,t,n){var r,i,o,a=e||"unnamed",s=n;for(o=0;o<t.length;o++){var u=s.filter((function(e){var n=v(y(e,o));return(o<e.params.length||h(e.params))&&n(t[o])}));if(0===u.length){if((i=x(s,o)).length>0){var c=f(t[o]);return(r=new TypeError("Unexpected type of argument in function "+a+" (expected: "+i.join(" or ")+", actual: "+c+", index: "+o+")")).data={category:"wrongType",fn:a,index:o,actual:c,expected:i},r}}else s=u}var l=s.map((function(e){return h(e.params)?1/0:e.params.length}));if(t.length<Math.min.apply(null,l))return i=x(s,o),(r=new TypeError("Too few arguments in function "+a+" (expected: "+i.join(" or ")+", index: "+t.length+")")).data={category:"tooFewArgs",fn:a,index:t.length,expected:i},r;var d=Math.max.apply(null,l);return t.length>d?((r=new TypeError("Too many arguments in function "+a+" (expected: "+d+", actual: "+t.length+")")).data={category:"tooManyArgs",fn:a,index:t.length,expectedLength:d},r):((r=new TypeError('Arguments of type "'+t.join(", ")+'" do not match any of the defined signatures of function '+a+".")).data={category:"mismatch",actual:t.map(f)},r)}function A(e){for(var t=999,n=0;n<e.types.length;n++)w(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));return t}function S(e){for(var t=999,n=0;n<e.types.length;n++)w(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));return t}function T(e,t){var n;return 0!=(n=e.restParam-t.restParam)?n:0!=(n=m(e)-m(t))?n:0!=(n=A(e)-A(t))?n:S(e)-S(t)}function M(e,t){var n,r,i=Math.min(e.params.length,t.params.length);if(0!=(r=e.params.some(m)-t.params.some(m)))return r;for(n=0;n<i;n++)if(0!=(r=m(e.params[n])-m(t.params[n])))return r;for(n=0;n<i;n++)if(0!==(r=T(e.params[n],t.params[n])))return r;return e.params.length-t.params.length}function N(e){var t,n,r,i,o=[],a=[];switch(e.types.forEach((function(e){e.conversion&&(o.push(c(e.conversion.from).test),a.push(e.conversion.convert))})),a.length){case 0:return function(e){return e};case 1:return t=o[0],r=a[0],function(e){return t(e)?r(e):e};case 2:return t=o[0],n=o[1],r=a[0],i=a[1],function(e){return t(e)?r(e):n(e)?i(e):e};default:return function(e){for(var t=0;t<a.length;t++)if(o[t](e))return a[t](e);return e}}}function O(e,t){return function e(n,r,i){if(r<n.length){var o,a=n[r],s=t?a.types.filter(w):a.types;if(a.restParam){var u=s.filter(w);o=u.length<s.length?[u,s]:[s]}else o=s.map((function(e){return[e]}));return U(o,(function(t){return e(n,r+1,i.concat([t]))}))}return[i.map((function(e,t){return{types:e,restParam:t===n.length-1&&h(n)}}))]}(e,0,[])}function C(e,r){if(0===Object.keys(r).length)throw new SyntaxError("No signatures provided");var i=[];Object.keys(r).map((function(e){return function(e,t,n){var r=[];return""!==e.trim()&&(r=e.split(",").map(F).map((function(e,t,r){var i=p(e,n);if(i.restParam&&t!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+e+'": only allowed for the last parameter');return i}))),r.some(k)?null:{params:r,fn:t}}(e,r[e],u.conversions)})).filter(I).forEach((function(e){var t=L(i,(function(t){return function(e,t){for(var n=Math.max(e.params.length,t.params.length),r=0;r<n;r++)if(!B(_(e,r,!0),_(t,r,!0)))return!1;var i=e.params.length,o=t.params.length,a=h(e.params),s=h(t.params);return a?s?i===o:o>=i:s?i>=o:i===o}(t,e)}));if(t)throw new TypeError('Conflicting signatures "'+d(t.params)+'" and "'+d(e.params)+'".');i.push(e)}));var o=U(i,(function(e){return(e?O(e.params,!1):[]).map((function(t){return{params:t,fn:e.fn}}))})).filter(I);o.sort(M);var a=o[0]&&o[0].params.length<=2&&!h(o[0].params),s=o[1]&&o[1].params.length<=2&&!h(o[1].params),c=o[2]&&o[2].params.length<=2&&!h(o[2].params),l=o[3]&&o[3].params.length<=2&&!h(o[3].params),f=o[4]&&o[4].params.length<=2&&!h(o[4].params),y=o[5]&&o[5].params.length<=2&&!h(o[5].params),b=a&&s&&c&&l&&f&&y,w=o.map((function(e){return g(e.params)})),x=a?v(o[0].params[0]):t,A=s?v(o[1].params[0]):t,S=c?v(o[2].params[0]):t,T=l?v(o[3].params[0]):t,C=f?v(o[4].params[0]):t,R=y?v(o[5].params[0]):t,P=a?v(o[0].params[1]):t,z=s?v(o[1].params[1]):t,j=c?v(o[2].params[1]):t,G=l?v(o[3].params[1]):t,H=f?v(o[4].params[1]):t,V=y?v(o[5].params[1]):t,X=o.map((function(e){return function(e,t){var n=t;if(e.some(m)){var r=h(e),i=e.map(N);n=function(){for(var e=[],n=r?arguments.length-1:arguments.length,o=0;o<n;o++)e[o]=i[o](arguments[o]);return r&&(e[n]=arguments[n].map(i[n])),t.apply(null,e)}}var o=n;if(h(e)){var a=e.length-1;o=function(){return n.apply(null,D(arguments,0,a).concat([D(arguments,a)]))}}return o}(e.params,e.fn)})),q=a?X[0]:n,W=s?X[1]:n,Y=c?X[2]:n,$=l?X[3]:n,K=f?X[4]:n,Z=y?X[5]:n,J=a?o[0].params.length:-1,Q=s?o[1].params.length:-1,ee=c?o[2].params.length:-1,te=l?o[3].params.length:-1,ne=f?o[4].params.length:-1,re=y?o[5].params.length:-1,ie=b?6:0,oe=o.length,ae=function(){for(var t=ie;t<oe;t++)if(w[t](arguments))return X[t].apply(null,arguments);throw E(e,arguments,o)},se=function(e,t){return arguments.length===J&&x(e)&&P(t)?q.apply(null,arguments):arguments.length===Q&&A(e)&&z(t)?W.apply(null,arguments):arguments.length===ee&&S(e)&&j(t)?Y.apply(null,arguments):arguments.length===te&&T(e)&&G(t)?$.apply(null,arguments):arguments.length===ne&&C(e)&&H(t)?K.apply(null,arguments):arguments.length===re&&R(e)&&V(t)?Z.apply(null,arguments):ae.apply(null,arguments)};try{Object.defineProperty(se,"name",{value:e})}catch(e){}return se.signatures=function(e){var t={};return e.forEach((function(e){e.params.some(m)||O(e.params,!0).forEach((function(n){t[d(n)]=e.fn}))})),t}(o),se}function R(e){return-1===u.ignore.indexOf(e)}function F(e){return e.trim()}function P(e){return!!e}function I(e){return null!==e}function k(e){return 0===e.types.length}function z(e){return e[e.length-1]}function D(e,t,n){return Array.prototype.slice.call(e,t,n)}function B(e,t){for(var n=0;n<e.length;n++)if(r=t,i=e[n],-1!==r.indexOf(i))return!0;var r,i;return!1}function L(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function U(e,t){return Array.prototype.concat.apply([],e.map(t))}function j(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(("object"==typeof r.signatures||"string"==typeof r.signature)&&""!==r.name)if(""===t)t=r.name;else if(t!==r.name){var i=new Error("Function names do not match (expected: "+t+", actual: "+r.name+")");throw i.data={actual:r.name,expected:t},i}}return t}function G(e){var t,n={};function r(e,r){if(n.hasOwnProperty(e)&&r!==n[e])throw(t=new Error('Signature "'+e+'" is defined twice')).data={signature:e},t}for(var i=0;i<e.length;i++){var o=e[i];if("object"==typeof o.signatures)for(var a in o.signatures)o.signatures.hasOwnProperty(a)&&(r(a,o.signatures[a]),n[a]=o.signatures[a]);else{if("string"!=typeof o.signature)throw(t=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},t;r(o.signature,o),n[o.signature]=o}}return n}return(u=C("typed",{"string, Object":C,Object:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return C(j(t),e)},"...Function":function(e){return C(j(e),G(e))},"string, ...Function":function(e,t){return C(e,G(t))}})).create=r,u.types=i,u.conversions=s,u.ignore=a,u.convert=function(e,t){var n=f(e);if(t===n)return e;for(var r=0;r<u.conversions.length;r++){var i=u.conversions[r];if(i.from===n&&i.to===t)return i.convert(e)}throw new Error("Cannot convert from "+n+" to "+t)},u.find=function(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof t){n=t.split(",");for(var r=0;r<n.length;r++)n[r]=n[r].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");n=t}var i=n.join(","),o=e.signatures[i];if(o)return o;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+n.join(", ")+"))")},u.addType=function(e,t){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var n=0;n<u.types.length;n++)if("Object"===u.types[n].name)return void u.types.splice(n,0,e);u.types.push(e)},u.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");u.conversions.push(e)},u}()})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";(function(t){var n=256,r=[],i=void 0===t?window:t,o=Math.pow(n,6),a=Math.pow(2,52),s=2*a,u=n-1,c=Math.random;function l(e){var t,r=e.length,i=this,o=0,a=i.i=i.j=0,s=i.S=[];for(r||(e=[r++]);o<n;)s[o]=o++;for(o=0;o<n;o++)s[o]=s[a=u&a+e[o%r]+(t=s[o])],s[a]=t;(i.g=function(e){for(var t,r=0,o=i.i,a=i.j,s=i.S;e--;)t=s[o=u&o+1],r=r*n+s[u&(s[o]=s[a=u&a+t])+(s[a]=t)];return i.i=o,i.j=a,r})(n)}function f(e,t){var n,r=[],i=(typeof e)[0];if(t&&"o"==i)for(n in e)try{r.push(f(e[n],t-1))}catch(e){}return r.length?r:"s"==i?e:e+"\0"}function d(e,t){for(var n,r=e+"",i=0;i<r.length;)t[u&i]=u&(n^=19*t[u&i])+r.charCodeAt(i++);return h(t)}function p(e){try{return i.crypto.getRandomValues(e=new Uint8Array(n)),h(e)}catch(e){return[+new Date,i,i.navigator&&i.navigator.plugins,i.screen,h(r)]}}function h(e){return String.fromCharCode.apply(0,e)}e.exports=function(t,i){if(i&&!0===i.global)return i.global=!1,Math.random=e.exports(t,i),i.global=!0,Math.random;var u=i&&i.entropy||!1,c=[],m=(d(f(u?[t,h(r)]:0 in arguments?t:p(),3),c),new l(c));return d(h(m.S),r),function(){for(var e=m.g(6),t=o,r=0;e<a;)e=(e+r)*n,t*=n,r=m.g(1);for(;e>=s;)e/=2,t/=2,r>>>=1;return(e+r)/t}},e.exports.resetGlobal=function(){Math.random=c},d(Math.random(),r)}).call(this,n(5))},,function(e,t,n){"use strict";var r=n(11),i=n(14),o=n(15);e.exports=function e(t){if(!(this instanceof e))return new e(t);"string"==typeof t&&(t=a[t]?{position:t}:{container:t});t=t||{};t.container?"string"==typeof t.container?this.container=document.querySelector(t.container):this.container=t.container:this.container=document.body||document.documentElement;this.element=document.createElement("div");this.element.className="fps";this.element.innerHTML=['<div class="fps-bg"></div>','<canvas class="fps-canvas"></canvas>','<span class="fps-text">fps <span class="fps-value">60.0</span></span>'].join("");this.container.appendChild(this.element);this.canvas=this.element.querySelector(".fps-canvas");this.textEl=this.element.querySelector(".fps-text");this.valueEl=this.element.querySelector(".fps-value");this.bgEl=this.element.querySelector(".fps-bg");var n=t.css||t.style||"";"object"==typeof n&&(n=o(n));var s="";s=a[t.position]||a["top-left"];this.element.style.cssText=["line-height: 1;","position: fixed;","font-family: Roboto, sans-serif;","z-index: 1;","font-weight: 300;","font-size: small;","padding: 1rem;",s,t.color?"color:"+t.color:"",n].join("");this.canvas.style.cssText=["position: relative;","width: 2em;","height: 1em;","display: block;","float: left;","margin-right: .333em;"].join("");this.bgEl.style.cssText=["position: absolute;","height: 1em;","width: 2em;","background: currentcolor;","opacity: .1;"].join("");this.canvas.width=parseInt(getComputedStyle(this.canvas).width)||1;this.canvas.height=parseInt(getComputedStyle(this.canvas).height)||1;this.context=this.canvas.getContext("2d");var u=this.context;var c=this.canvas.width;var l=this.canvas.height;var f=0;var d=0;var p=t.values||Array(this.canvas.width);var h=t.period||1e3;var m=t.max||100;var v=this;r((function e(){f++;var t=i();if(t-d>h){d=t,p.push(f/(m*h*.001)),p=p.slice(-c),f=0,u.clearRect(0,0,c,l),u.fillStyle=getComputedStyle(v.canvas).color;for(var n=c;n--;){var o=p[n];if(null==o)break;u.fillRect(n,l-l*o,1,l*o)}v.valueEl.innerHTML=(p[p.length-1]*m).toFixed(1)}r(e)}))};var a={"top-left":"left: 0; top: 0;","top-right":"right: 0; top: 0;","bottom-right":"right: 0; bottom: 0;","bottom-left":"left: 0; bottom: 0;"}},function(e,t,n){var r;!function(i){"use strict";var o,a,s,u=9e15,c=1e9,l="0123456789abcdef",f="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",d="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",p={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-u,maxE:u,crypto:!1},h=!0,m="[DecimalError] ",v=m+"Invalid argument: ",g=m+"Precision limit exceeded",y=m+"crypto unavailable",_=Math.floor,b=Math.pow,w=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,x=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,E=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,A=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,S=1e7,T=7,M=f.length-1,N=d.length-1,O={name:"[object Decimal]"};function C(e){var t,n,r,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)r=e[t]+"",(n=T-r.length)&&(o+=j(n)),o+=r;a=e[t],(n=T-(r=a+"").length)&&(o+=j(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function R(e,t,n){if(e!==~~e||e<t||e>n)throw Error(v+e)}function F(e,t,n,r){var i,o,a,s;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=T,i=0):(i=Math.ceil((t+1)/T),t%=T),o=b(10,T-t),s=e[i]%o|0,null==r?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),a=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(n<4&&s+1==o||n>3&&s+1==o/2)&&(e[i+1]/o/100|0)==b(10,t-2)-1||(s==o/2||0==s)&&0==(e[i+1]/o/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),a=(r||n<4)&&9999==s||!r&&n>3&&4999==s):a=((r||n<4)&&s+1==o||!r&&n>3&&s+1==o/2)&&(e[i+1]/o/1e3|0)==b(10,t-3)-1,a}function P(e,t,n){for(var r,i,o=[0],a=0,s=e.length;a<s;){for(i=o.length;i--;)o[i]*=t;for(o[0]+=l.indexOf(e.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}O.absoluteValue=O.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),k(e)},O.ceil=function(){return k(new this.constructor(this),this.e+1,2)},O.comparedTo=O.cmp=function(e){var t,n,r,i,o=this,a=o.d,s=(e=new o.constructor(e)).d,u=o.s,c=e.s;if(!a||!s)return u&&c?u!==c?u:a===s?0:!a^u<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?u:s[0]?-c:0;if(u!==c)return u;if(o.e!==e.e)return o.e>e.e^u<0?1:-1;for(t=0,n=(r=a.length)<(i=s.length)?r:i;t<n;++t)if(a[t]!==s[t])return a[t]>s[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1},O.cosine=O.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+T,r.rounding=1,n=function(e,t){var n,r,i=t.d.length;i<32?(n=Math.ceil(i/3),r=(1/Z(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10");e.precision+=n,t=K(e,1,t.times(r),new e(1));for(var o=n;o--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}(r,J(r,n)),r.precision=e,r.rounding=t,k(2==s||3==s?n.neg():n,e,t,!0)):new r(1):new r(NaN)},O.cubeRoot=O.cbrt=function(){var e,t,n,r,i,o,a,s,u,c,l=this,f=l.constructor;if(!l.isFinite()||l.isZero())return new f(l);for(h=!1,(o=l.s*b(l.s*l,1/3))&&Math.abs(o)!=1/0?r=new f(o.toString()):(n=C(l.d),(o=((e=l.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=b(n,1/3),e=_((e+1)/3)-(e%3==(e<0?-1:2)),(r=new f(n=o==1/0?"5e"+e:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=l.s),a=(e=f.precision)+3;;)if(c=(u=(s=r).times(s).times(s)).plus(l),r=I(c.plus(l).times(s),c.plus(u),a+2,1),C(s.d).slice(0,a)===(n=C(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(k(r,e+1,1),t=!r.times(r).times(r).eq(l));break}if(!i&&(k(s,e+1,0),s.times(s).times(s).eq(l))){r=s;break}a+=4,i=1}return h=!0,k(r,e,f.rounding,t)},O.decimalPlaces=O.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=((e=t.length-1)-_(this.e/T))*T,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},O.dividedBy=O.div=function(e){return I(this,new this.constructor(e))},O.dividedToIntegerBy=O.divToInt=function(e){var t=this.constructor;return k(I(this,new t(e),0,1,1),t.precision,t.rounding)},O.equals=O.eq=function(e){return 0===this.cmp(e)},O.floor=function(){return k(new this.constructor(this),this.e+1,3)},O.greaterThan=O.gt=function(e){return this.cmp(e)>0},O.greaterThanOrEqualTo=O.gte=function(e){var t=this.cmp(e);return 1==t||0===t},O.hyperbolicCosine=O.cosh=function(){var e,t,n,r,i,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;n=a.precision,r=a.rounding,a.precision=n+Math.max(o.e,o.sd())+4,a.rounding=1,(i=o.d.length)<32?t=(1/Z(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),o=K(a,1,o.times(t),new a(1),!0);for(var u,c=e,l=new a(8);c--;)u=o.times(o),o=s.minus(u.times(l.minus(u.times(l))));return k(o,a.precision=n,a.rounding=r,!0)},O.hyperbolicSine=O.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=K(o,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=K(o,2,i=i.times(1/Z(5,e)),i,!0);for(var a,s=new o(5),u=new o(16),c=new o(20);e--;)a=i.times(i),i=i.times(s.plus(a.times(u.times(a).plus(c))))}return o.precision=t,o.rounding=n,k(i,t,n,!0)},O.hyperbolicTangent=O.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,I(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},O.inverseCosine=O.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?t.isNeg()?L(n,i,o):new n(0):new n(NaN):t.isZero()?L(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=L(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t))},O.inverseHyperbolicCosine=O.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,h=!1,n=n.times(n).minus(1).sqrt().plus(n),h=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},O.inverseHyperbolicSine=O.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,h=!1,n=n.times(n).plus(1).sqrt().plus(n),h=!0,r.precision=e,r.rounding=t,n.ln())},O.inverseHyperbolicTangent=O.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?k(new o(i),e,t,!0):(o.precision=n=r-i.e,i=I(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)},O.inverseSine=O.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==t?0===t?((e=L(o,n+4,r).times(.5)).s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},O.inverseTangent=O.atan=function(){var e,t,n,r,i,o,a,s,u,c=this,l=c.constructor,f=l.precision,d=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&f+4<=N)return(a=L(l,f+4,d).times(.25)).s=c.s,a}else{if(!c.s)return new l(NaN);if(f+4<=N)return(a=L(l,f+4,d).times(.5)).s=c.s,a}for(l.precision=s=f+10,l.rounding=1,e=n=Math.min(28,s/T+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(h=!1,t=Math.ceil(s/T),r=1,u=c.times(c),a=new l(c),i=c;-1!==e;)if(i=i.times(u),o=a.minus(i.div(r+=2)),i=i.times(u),void 0!==(a=o.plus(i.div(r+=2))).d[t])for(e=t;a.d[e]===o.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),h=!0,k(a,l.precision=f,l.rounding=d,!0)},O.isFinite=function(){return!!this.d},O.isInteger=O.isInt=function(){return!!this.d&&_(this.e/T)>this.d.length-2},O.isNaN=function(){return!this.s},O.isNegative=O.isNeg=function(){return this.s<0},O.isPositive=O.isPos=function(){return this.s>0},O.isZero=function(){return!!this.d&&0===this.d[0]},O.lessThan=O.lt=function(e){return this.cmp(e)<0},O.lessThanOrEqualTo=O.lte=function(e){return this.cmp(e)<1},O.logarithm=O.log=function(e){var t,n,r,i,o,a,s,u,c=this.constructor,l=c.precision,f=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new c(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;)i/=10;o=1!==i}if(h=!1,a=q(this,s=l+5),r=t?B(c,s+10):q(e,s),F((u=I(a,r,s,1)).d,i=l,f))do{if(a=q(this,s+=10),r=t?B(c,s+10):q(e,s),u=I(a,r,s,1),!o){+C(u.d).slice(i+1,i+15)+1==1e14&&(u=k(u,l+1,0));break}}while(F(u.d,i+=10,f));return h=!0,k(u,l,f)},O.minus=O.sub=function(e){var t,n,r,i,o,a,s,u,c,l,f,d,p=this,m=p.constructor;if(e=new m(e),!p.d||!e.d)return p.s&&e.s?p.d?e.s=-e.s:e=new m(e.d||p.s!==e.s?p:NaN):e=new m(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(c=p.d,d=e.d,s=m.precision,u=m.rounding,!c[0]||!d[0]){if(d[0])e.s=-e.s;else{if(!c[0])return new m(3===u?-0:0);e=new m(p)}return h?k(e,s,u):e}if(n=_(e.e/T),l=_(p.e/T),c=c.slice(),o=l-n){for((f=o<0)?(t=c,o=-o,a=d.length):(t=d,n=l,a=c.length),o>(r=Math.max(Math.ceil(s/T),a)+2)&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for((f=(r=c.length)<(a=d.length))&&(a=r),r=0;r<a;r++)if(c[r]!=d[r]){f=c[r]<d[r];break}o=0}for(f&&(t=c,c=d,d=t,e.s=-e.s),a=c.length,r=d.length-a;r>0;--r)c[a++]=0;for(r=d.length;r>o;){if(c[--r]<d[r]){for(i=r;i&&0===c[--i];)c[i]=S-1;--c[i],c[r]+=S}c[r]-=d[r]}for(;0===c[--a];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=D(c,n),h?k(e,s,u):e):new m(3===u?-0:0)},O.modulo=O.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?k(new r(n),r.precision,r.rounding):(h=!1,9==r.modulo?(t=I(n,e.abs(),0,3,1)).s*=e.s:t=I(n,e,0,r.modulo,1),t=t.times(e),h=!0,n.minus(t))},O.naturalExponential=O.exp=function(){return X(this)},O.naturalLogarithm=O.ln=function(){return q(this)},O.negated=O.neg=function(){var e=new this.constructor(this);return e.s=-e.s,k(e)},O.plus=O.add=function(e){var t,n,r,i,o,a,s,u,c,l,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return f.s&&e.s?f.d||(e=new d(e.d||f.s===e.s?f:NaN)):e=new d(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(c=f.d,l=e.d,s=d.precision,u=d.rounding,!c[0]||!l[0])return l[0]||(e=new d(f)),h?k(e,s,u):e;if(o=_(f.e/T),r=_(e.e/T),c=c.slice(),i=o-r){for(i<0?(n=c,i=-i,a=l.length):(n=l,r=o,a=c.length),i>(a=(o=Math.ceil(s/T))>a?o+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=c.length)-(i=l.length)<0&&(i=a,n=l,l=c,c=n),t=0;i;)t=(c[--i]=c[i]+l[i]+t)/S|0,c[i]%=S;for(t&&(c.unshift(t),++r),a=c.length;0==c[--a];)c.pop();return e.d=c,e.e=D(c,r),h?k(e,s,u):e},O.precision=O.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(v+e);return n.d?(t=U(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},O.round=function(){var e=this,t=e.constructor;return k(new t(e),e.e+1,t.rounding)},O.sine=O.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+T,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return K(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/Z(5,n)),t=K(e,2,t,t);for(var i,o=new e(5),a=new e(16),s=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(a.times(i).minus(s))));return t}(r,J(r,n)),r.precision=e,r.rounding=t,k(s>2?n.neg():n,e,t,!0)):new r(NaN)},O.squareRoot=O.sqrt=function(){var e,t,n,r,i,o,a=this,s=a.d,u=a.e,c=a.s,l=a.constructor;if(1!==c||!s||!s[0])return new l(!c||c<0&&(!s||s[0])?NaN:s?a:1/0);for(h=!1,0==(c=Math.sqrt(+a))||c==1/0?(((t=C(s)).length+u)%2==0&&(t+="0"),c=Math.sqrt(t),u=_((u+1)/2)-(u<0||u%2),r=new l(t=c==1/0?"1e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new l(c.toString()),n=(u=l.precision)+3;;)if(r=(o=r).plus(I(a,o,n+2,1)).times(.5),C(o.d).slice(0,n)===(t=C(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(k(r,u+1,1),e=!r.times(r).eq(a));break}if(!i&&(k(o,u+1,0),o.times(o).eq(a))){r=o;break}n+=4,i=1}return h=!0,k(r,u,l.rounding,e)},O.tangent=O.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=I(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,k(2==s||4==s?n.neg():n,e,t,!0)):new r(NaN)},O.times=O.mul=function(e){var t,n,r,i,o,a,s,u,c,l=this,f=l.constructor,d=l.d,p=(e=new f(e)).d;if(e.s*=l.s,!(d&&d[0]&&p&&p[0]))return new f(!e.s||d&&!d[0]&&!p||p&&!p[0]&&!d?NaN:d&&p?0*e.s:e.s/0);for(n=_(l.e/T)+_(e.e/T),(u=d.length)<(c=p.length)&&(o=d,d=p,p=o,a=u,u=c,c=a),o=[],r=a=u+c;r--;)o.push(0);for(r=c;--r>=0;){for(t=0,i=u+r;i>r;)s=o[i]+p[r]*d[i-r-1]+t,o[i--]=s%S|0,t=s/S|0;o[i]=(o[i]+t)%S|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=D(o,n),h?k(e,f.precision,f.rounding):e},O.toBinary=function(e,t){return Q(this,2,e,t)},O.toDecimalPlaces=O.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(R(e,0,c),void 0===t?t=r.rounding:R(t,0,8),k(n,e+n.e+1,t))},O.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=z(r,!0):(R(e,0,c),void 0===t?t=i.rounding:R(t,0,8),n=z(r=k(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},O.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?n=z(i):(R(e,0,c),void 0===t?t=o.rounding:R(t,0,8),n=z(r=k(new o(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},O.toFraction=function(e){var t,n,r,i,o,a,s,u,c,l,f,d,p=this,m=p.d,g=p.constructor;if(!m)return new g(p);if(c=n=new g(1),r=u=new g(0),a=(o=(t=new g(r)).e=U(m)-p.e-1)%T,t.d[0]=b(10,a<0?T+a:a),null==e)e=o>0?t:c;else{if(!(s=new g(e)).isInt()||s.lt(c))throw Error(v+s);e=s.gt(t)?o>0?t:c:s}for(h=!1,s=new g(C(m)),l=g.precision,g.precision=o=m.length*T*2;f=I(s,t,0,1,1),1!=(i=n.plus(f.times(r))).cmp(e);)n=r,r=i,i=c,c=u.plus(f.times(i)),u=i,i=t,t=s.minus(f.times(i)),s=i;return i=I(e.minus(n),r,0,1,1),u=u.plus(i.times(c)),n=n.plus(i.times(r)),u.s=c.s=p.s,d=I(c,r,o,1).minus(p).abs().cmp(I(u,n,o,1).minus(p).abs())<1?[c,r]:[u,n],g.precision=l,h=!0,d},O.toHexadecimal=O.toHex=function(e,t){return Q(this,16,e,t)},O.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:R(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(h=!1,n=I(n,e,0,t,1).times(e),h=!0,k(n)):(e.s=n.s,n=e),n},O.toNumber=function(){return+this},O.toOctal=function(e,t){return Q(this,8,e,t)},O.toPower=O.pow=function(e){var t,n,r,i,o,a,s=this,u=s.constructor,c=+(e=new u(e));if(!(s.d&&e.d&&s.d[0]&&e.d[0]))return new u(b(+s,c));if((s=new u(s)).eq(1))return s;if(r=u.precision,o=u.rounding,e.eq(1))return k(s,r,o);if((t=_(e.e/T))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=G(u,s,n,r),e.s<0?new u(1).div(i):k(i,r,o);if((a=s.s)<0){if(t<e.d.length-1)return new u(NaN);if(0==(1&e.d[t])&&(a=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=a,s}return(t=0!=(n=b(+s,c))&&isFinite(n)?new u(n+"").e:_(c*(Math.log("0."+C(s.d))/Math.LN10+s.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?a/0:0):(h=!1,u.rounding=s.s=1,n=Math.min(12,(t+"").length),(i=X(e.times(q(s,r+n)),r)).d&&F((i=k(i,r+5,1)).d,r,o)&&(t=r+10,+C((i=k(X(e.times(q(s,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=k(i,r+1,0))),i.s=a,h=!0,u.rounding=o,k(i,r,o))},O.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=z(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(R(e,1,c),void 0===t?t=i.rounding:R(t,0,8),n=z(r=k(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},O.toSignificantDigits=O.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(R(e,1,c),void 0===t?t=n.rounding:R(t,0,8)),k(new n(this),e,t)},O.toString=function(){var e=this,t=e.constructor,n=z(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},O.truncated=O.trunc=function(){return k(new this.constructor(this),this.e+1,1)},O.valueOf=O.toJSON=function(){var e=this,t=e.constructor,n=z(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var I=function(){function e(e,t,n){var r,i=0,o=e.length;for(e=e.slice();o--;)r=e[o]*t+i,e[o]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,s,u,c){var l,f,d,p,h,m,v,g,y,b,w,x,E,A,M,N,O,C,R,F,P=r.constructor,I=r.s==i.s?1:-1,z=r.d,D=i.d;if(!(z&&z[0]&&D&&D[0]))return new P(r.s&&i.s&&(z?!D||z[0]!=D[0]:D)?z&&0==z[0]||!D?0*I:I/0:NaN);for(c?(h=1,f=r.e-i.e):(c=S,h=T,f=_(r.e/h)-_(i.e/h)),R=D.length,O=z.length,b=(y=new P(I)).d=[],d=0;D[d]==(z[d]||0);d++);if(D[d]>(z[d]||0)&&f--,null==o?(A=o=P.precision,s=P.rounding):A=u?o+(r.e-i.e)+1:o,A<0)b.push(1),m=!0;else{if(A=A/h+2|0,d=0,1==R){for(p=0,D=D[0],A++;(d<O||p)&&A--;d++)M=p*c+(z[d]||0),b[d]=M/D|0,p=M%D|0;m=p||d<O}else{for((p=c/(D[0]+1)|0)>1&&(D=e(D,p,c),z=e(z,p,c),R=D.length,O=z.length),N=R,x=(w=z.slice(0,R)).length;x<R;)w[x++]=0;(F=D.slice()).unshift(0),C=D[0],D[1]>=c/2&&++C;do{p=0,(l=t(D,w,R,x))<0?(E=w[0],R!=x&&(E=E*c+(w[1]||0)),(p=E/C|0)>1?(p>=c&&(p=c-1),1==(l=t(v=e(D,p,c),w,g=v.length,x=w.length))&&(p--,n(v,R<g?F:D,g,c))):(0==p&&(l=p=1),v=D.slice()),(g=v.length)<x&&v.unshift(0),n(w,v,x,c),-1==l&&(l=t(D,w,R,x=w.length))<1&&(p++,n(w,R<x?F:D,x,c)),x=w.length):0===l&&(p++,w=[0]),b[d++]=p,l&&w[0]?w[x++]=z[N]||0:(w=[z[N]],x=1)}while((N++<O||void 0!==w[0])&&A--);m=void 0!==w[0]}b[0]||b.shift()}if(1==h)y.e=f,a=m;else{for(d=1,p=b[0];p>=10;p/=10)d++;y.e=d+f*h-1,k(y,u?o+y.e+1:o,s,m)}return y}}();function k(e,t,n,r){var i,o,a,s,u,c,l,f,d,p=e.constructor;e:if(null!=t){if(!(f=e.d))return e;for(i=1,s=f[0];s>=10;s/=10)i++;if((o=t-i)<0)o+=T,a=t,u=(l=f[d=0])/b(10,i-a-1)%10|0;else if((d=Math.ceil((o+1)/T))>=(s=f.length)){if(!r)break e;for(;s++<=d;)f.push(0);l=u=0,i=1,a=(o%=T)-T+1}else{for(l=s=f[d],i=1;s>=10;s/=10)i++;u=(a=(o%=T)-T+i)<0?0:l/b(10,i-a-1)%10|0}if(r=r||t<0||void 0!==f[d+1]||(a<0?l:l%b(10,i-a-1)),c=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(o>0?a>0?l/b(10,i-a):0:f[d-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,c?(t-=e.e+1,f[0]=b(10,(T-t%T)%T),e.e=-t||0):f[0]=e.e=0,e;if(0==o?(f.length=d,s=1,d--):(f.length=d+1,s=b(10,T-o),f[d]=a>0?(l/b(10,i-a)%b(10,a)|0)*s:0),c)for(;;){if(0==d){for(o=1,a=f[0];a>=10;a/=10)o++;for(a=f[0]+=s,s=1;a>=10;a/=10)s++;o!=s&&(e.e++,f[0]==S&&(f[0]=1));break}if(f[d]+=s,f[d]!=S)break;f[d--]=0,s=1}for(o=f.length;0===f[--o];)f.pop()}return h&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function z(e,t,n){if(!e.isFinite())return W(e);var r,i=e.e,o=C(e.d),a=o.length;return t?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+j(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+j(-i-1)+o,n&&(r=n-a)>0&&(o+=j(r))):i>=a?(o+=j(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+j(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=j(r))),o}function D(e,t){var n=e[0];for(t*=T;n>=10;n/=10)t++;return t}function B(e,t,n){if(t>M)throw h=!0,n&&(e.precision=n),Error(g);return k(new e(f),t,1,!0)}function L(e,t,n){if(t>N)throw Error(g);return k(new e(d),t,n,!0)}function U(e){var t=e.length-1,n=t*T+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function j(e){for(var t="";e--;)t+="0";return t}function G(e,t,n,r){var i,o=new e(1),a=Math.ceil(r/T+4);for(h=!1;;){if(n%2&&ee((o=o.times(t)).d,a)&&(i=!0),0===(n=_(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}ee((t=t.times(t)).d,a)}return h=!0,o}function H(e){return 1&e.d[e.d.length-1]}function V(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;){if(!(r=new e(t[o])).s){i=r;break}i[n](r)&&(i=r)}return i}function X(e,t){var n,r,i,o,a,s,u,c=0,l=0,f=0,d=e.constructor,p=d.rounding,m=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(h=!1,u=m):u=t,s=new d(.03125);e.e>-2;)e=e.times(s),f+=5;for(u+=r=Math.log(b(2,f))/Math.LN10*2+5|0,n=o=a=new d(1),d.precision=u;;){if(o=k(o.times(e),u,1),n=n.times(++l),C((s=a.plus(I(o,n,u,1))).d).slice(0,u)===C(a.d).slice(0,u)){for(i=f;i--;)a=k(a.times(a),u,1);if(null!=t)return d.precision=m,a;if(!(c<3&&F(a.d,u-r,p,c)))return k(a,d.precision=m,p,h=!0);d.precision=u+=10,n=o=s=new d(1),l=0,c++}a=s}}function q(e,t){var n,r,i,o,a,s,u,c,l,f,d,p=1,m=e,v=m.d,g=m.constructor,y=g.rounding,_=g.precision;if(m.s<0||!v||!v[0]||!m.e&&1==v[0]&&1==v.length)return new g(v&&!v[0]?-1/0:1!=m.s?NaN:v?0:m);if(null==t?(h=!1,l=_):l=t,g.precision=l+=10,r=(n=C(v)).charAt(0),!(Math.abs(o=m.e)<15e14))return c=B(g,l+2,_).times(o+""),m=q(new g(r+"."+n.slice(1)),l-10).plus(c),g.precision=_,null==t?k(m,_,y,h=!0):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=C((m=m.times(e)).d)).charAt(0),p++;for(o=m.e,r>1?(m=new g("0."+n),o++):m=new g(r+"."+n.slice(1)),f=m,u=a=m=I(m.minus(1),m.plus(1),l,1),d=k(m.times(m),l,1),i=3;;){if(a=k(a.times(d),l,1),C((c=u.plus(I(a,new g(i),l,1))).d).slice(0,l)===C(u.d).slice(0,l)){if(u=u.times(2),0!==o&&(u=u.plus(B(g,l+2,_).times(o+""))),u=I(u,new g(p),l,1),null!=t)return g.precision=_,u;if(!F(u.d,l-10,y,s))return k(u,g.precision=_,y,h=!0);g.precision=l+=10,c=a=m=I(f.minus(1),f.plus(1),l,1),d=k(m.times(m),l,1),i=s=1}u=c,i+=2}}function W(e){return String(e.s*e.s/0)}function Y(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%T,n<0&&(r+=T),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=T;r<i;)e.d.push(+t.slice(r,r+=T));t=t.slice(r),r=T-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),h&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function $(e,t){var n,r,i,a,s,u,c,l,f;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(x.test(t))n=16,t=t.toLowerCase();else if(w.test(t))n=2;else{if(!E.test(t))throw Error(v+t);n=8}for((a=t.search(/p/i))>0?(c=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),s=(a=t.indexOf("."))>=0,r=e.constructor,s&&(a=(u=(t=t.replace(".","")).length)-a,i=G(r,new r(n),a,2*a)),a=f=(l=P(t,n,S)).length-1;0===l[a];--a)l.pop();return a<0?new r(0*e.s):(e.e=D(l,f),e.d=l,h=!1,s&&(e=I(e,i,4*u)),c&&(e=e.times(Math.abs(c)<54?b(2,c):o.pow(2,c))),h=!0,e)}function K(e,t,n,r,i){var o,a,s,u,c=e.precision,l=Math.ceil(c/T);for(h=!1,u=n.times(n),s=new e(r);;){if(a=I(s.times(u),new e(t++*t++),c,1),s=i?r.plus(a):r.minus(a),r=I(a.times(u),new e(t++*t++),c,1),void 0!==(a=s.plus(r)).d[l]){for(o=l;a.d[o]===s.d[o]&&o--;);if(-1==o)break}o=s,s=r,r=a,a=o}return h=!0,a.d.length=l+1,a}function Z(e,t){for(var n=e;--t;)n*=e;return n}function J(e,t){var n,r=t.s<0,i=L(e,e.precision,1),o=i.times(.5);if((t=t.abs()).lte(o))return s=r?4:1,t;if((n=t.divToInt(i)).isZero())s=r?3:2;else{if((t=t.minus(n.times(i))).lte(o))return s=H(n)?r?2:3:r?4:1,t;s=H(n)?r?1:4:r?3:2}return t.minus(i).abs()}function Q(e,t,n,r){var i,o,s,u,f,d,p,h,m,v=e.constructor,g=void 0!==n;if(g?(R(n,1,c),void 0===r?r=v.rounding:R(r,0,8)):(n=v.precision,r=v.rounding),e.isFinite()){for(g?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(s=(p=z(e)).indexOf("."))>=0&&(p=p.replace(".",""),(m=new v(1)).e=p.length-s,m.d=P(z(m),10,i),m.e=m.d.length),o=f=(h=P(p,10,i)).length;0==h[--f];)h.pop();if(h[0]){if(s<0?o--:((e=new v(e)).d=h,e.e=o,h=(e=I(e,m,n,r,0,i)).d,o=e.e,d=a),s=h[n],u=i/2,d=d||void 0!==h[n+1],d=r<4?(void 0!==s||d)&&(0===r||r===(e.s<0?3:2)):s>u||s===u&&(4===r||d||6===r&&1&h[n-1]||r===(e.s<0?8:7)),h.length=n,d)for(;++h[--n]>i-1;)h[n]=0,n||(++o,h.unshift(1));for(f=h.length;!h[f-1];--f);for(s=0,p="";s<f;s++)p+=l.charAt(h[s]);if(g){if(f>1)if(16==t||8==t){for(s=16==t?4:3,--f;f%s;f++)p+="0";for(f=(h=P(p,i,t)).length;!h[f-1];--f);for(s=1,p="1.";s<f;s++)p+=l.charAt(h[s])}else p=p.charAt(0)+"."+p.slice(1);p=p+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)p="0"+p;p="0."+p}else if(++o>f)for(o-=f;o--;)p+="0";else o<f&&(p=p.slice(0,o)+"."+p.slice(o))}else p=g?"0p+0":"0";p=(16==t?"0x":2==t?"0b":8==t?"0o":"")+p}else p=W(e);return e.s<0?"-"+p:p}function ee(e,t){if(e.length>t)return e.length=t,!0}function te(e){return new this(e).abs()}function ne(e){return new this(e).acos()}function re(e){return new this(e).acosh()}function ie(e,t){return new this(e).plus(t)}function oe(e){return new this(e).asin()}function ae(e){return new this(e).asinh()}function se(e){return new this(e).atan()}function ue(e){return new this(e).atanh()}function ce(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?L(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=L(this,o,1).times(.5)).s=e.s:t.s<0?(this.precision=o,this.rounding=1,n=this.atan(I(e,t,o,1)),t=L(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(I(e,t,o,1)):(n=L(this,o,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function le(e){return new this(e).cbrt()}function fe(e){return k(e=new this(e),e.e+1,2)}function de(e){if(!e||"object"!=typeof e)throw Error(m+"Object expected");var t,n,r,i=!0===e.defaults,o=["precision",1,c,"rounding",0,8,"toExpNeg",-u,0,"toExpPos",0,u,"maxE",0,u,"minE",-u,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],i&&(this[n]=p[n]),void 0!==(r=e[n])){if(!(_(r)===r&&r>=o[t+1]&&r<=o[t+2]))throw Error(v+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=p[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(v+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(y);this[n]=!0}else this[n]=!1}return this}function pe(e){return new this(e).cos()}function he(e){return new this(e).cosh()}function me(e,t){return new this(e).div(t)}function ve(e){return new this(e).exp()}function ge(e){return k(e=new this(e),e.e+1,3)}function ye(){var e,t,n=new this(0);for(h=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return h=!0,new this(1/0);n=t}return h=!0,n.sqrt()}function _e(e){return e instanceof o||e&&"[object Decimal]"===e.name||!1}function be(e){return new this(e).ln()}function we(e,t){return new this(e).log(t)}function xe(e){return new this(e).log(2)}function Ee(e){return new this(e).log(10)}function Ae(){return V(this,arguments,"lt")}function Se(){return V(this,arguments,"gt")}function Te(e,t){return new this(e).mod(t)}function Me(e,t){return new this(e).mul(t)}function Ne(e,t){return new this(e).pow(t)}function Oe(e){var t,n,r,i,o=0,a=new this(1),s=[];if(void 0===e?e=this.precision:R(e,1,c),r=Math.ceil(e/T),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=t[o])>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:s[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(y);for(t=crypto.randomBytes(r*=4);o<r;)(i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((127&t[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,o):(s.push(i%1e7),o+=4);o=r/4}else for(;o<r;)s[o++]=1e7*Math.random()|0;for(r=s[--o],e%=T,r&&e&&(i=b(10,T-e),s[o]=(r/i|0)*i);0===s[o];o--)s.pop();if(o<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=T)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<T&&(n-=T-r)}return a.e=n,a.d=s,a}function Ce(e){return k(e=new this(e),e.e+1,this.rounding)}function Re(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Fe(e){return new this(e).sin()}function Pe(e){return new this(e).sinh()}function Ie(e){return new this(e).sqrt()}function ke(e,t){return new this(e).sub(t)}function ze(e){return new this(e).tan()}function De(e){return new this(e).tanh()}function Be(e){return k(e=new this(e),e.e+1,1)}(o=function e(t){var n,r,i;function o(e){var t,n,r,i=this;if(!(i instanceof o))return new o(e);if(i.constructor=o,e instanceof o)return i.s=e.s,void(h?!e.d||e.e>o.maxE?(i.e=NaN,i.d=null):e.e<o.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(h?t>o.maxE?(i.e=NaN,i.d=null):t<o.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):Y(i,e.toString())}if("string"!==r)throw Error(v+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),A.test(e)?Y(i,e):$(i,e)}if(o.prototype=O,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=de,o.clone=e,o.isDecimal=_e,o.abs=te,o.acos=ne,o.acosh=re,o.add=ie,o.asin=oe,o.asinh=ae,o.atan=se,o.atanh=ue,o.atan2=ce,o.cbrt=le,o.ceil=fe,o.cos=pe,o.cosh=he,o.div=me,o.exp=ve,o.floor=ge,o.hypot=ye,o.ln=be,o.log=we,o.log10=Ee,o.log2=xe,o.max=Ae,o.min=Se,o.mod=Te,o.mul=Me,o.pow=Ne,o.random=Oe,o.round=Ce,o.sign=Re,o.sin=Fe,o.sinh=Pe,o.sqrt=Ie,o.sub=ke,o.tan=ze,o.tanh=De,o.trunc=Be,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(p)).default=o.Decimal=o,f=new o(f),d=new o(d),void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){(function(t){for(var r=n(12),i="undefined"==typeof window?t:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],u=i["cancel"+a]||i["cancelRequest"+a],c=0;!s&&c<o.length;c++)s=i[o[c]+"Request"+a],u=i[o[c]+"Cancel"+a]||i[o[c]+"CancelRequest"+a];if(!s||!u){var l=0,f=0,d=[];s=function(e){if(0===d.length){var t=r(),n=Math.max(0,1e3/60-(t-l));l=n+t,setTimeout((function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(l)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return d.push({handle:++f,callback:e,cancelled:!1}),f},u=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return s.call(i,e)},e.exports.cancel=function(){u.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=u}}).call(this,n(5))},function(e,t,n){(function(t){(function(){var n,r,i,o,a,s;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(n()-a)/1e6},r=t.hrtime,o=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),s=1e9*t.uptime(),a=o-s):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,n(13))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(t){e.exports=t.performance&&t.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,n(5))},function(e,t,n){"use strict";var r=n(16),i=n(17),o=n(18);function a(e,t){var n={};return n[e]=t,n}function s(e){return e}function u(e,t){return e?r(e,t):""}function c(e){return e?" ":""}function l(e){return e?"\n":""}function f(e,t,n,r){for(var i=u(n,r+1),o=l(n),a=c(n),s="",f=0,d=e.length;f<d;f++)for(var p=0,h=t.length;p<h;p++)s+=i+e[f]+(0===e[f].indexOf("@")?" ":":")+a+t[p]+";"+o;return s}e.exports=function(e,t){function n(e,n){return o(e).reduce((function(e,r){return e.concat(t.property(r,n))}),[])}function d(e,n){return o(e).reduce((function(e,r){return e.concat(t.value(r,n))}),[])}function p(e,r){var i="";return Object.keys(e).forEach((function(s){var h,m=e[s];"string"==typeof(h=m)||Array.isArray(h)&&h.length&&"object"!=typeof h[0]?i+=f(n(s,m),d(m,s),t.indent,r-1):Array.isArray(m)?m.forEach((function(e){i+=p(a(s,e),r)})):function(e,n){return o(e).reduce((function(e,r){return e.concat(t.selector(r,n))}),[])}(s,m).forEach((function(o){i+=function(e,t,n){return u(t,n)+e+c(t)+"{"+l(t)}(o,t.indent,r),Object.keys(m).forEach((function(o){var u=e[s][o];!function(e){return"object"==typeof e&&!Array.isArray(e)}(u)?i+=f(n(o,u),d(u,o),t.indent,r):i+=p(a(o,u),r+1)})),i+=function(e,t){return u(e,t)+"}"+l(e)}(t.indent,r)}))})),i}return"number"==typeof(t=i({indent:"",property:s,value:s,selector:s},t)).indent&&(t.indent=r(" ",t.indent)),o(e).map((function(e){return p(e,0)})).join(l(t.indent))}},function(e,t,n){"use strict";
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r,i="";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(r!==e||void 0===r)r=e,i="";else if(i.length>=n)return i.substr(0,n);for(;n>i.length&&t>1;)1&t&&(i+=e),t>>=1,e+=e;return i=(i+=e).substr(0,n)}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){"use strict";e.exports=function(e){return null==e?[]:Array.isArray(e)?e:[e]}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"sierpinskiTetrahedron",(function(){return Gi})),n.d(r,"menger",(function(){return Hi})),n.d(r,"infiniteSpheres",(function(){return Vi})),n.d(r,"butterweedHills",(function(){return Xi})),n.d(r,"mandelbox",(function(){return qi})),n.d(r,"snowStadium",(function(){return Wi})),n.d(r,"mausoleum",(function(){return Yi})),n.d(r,"treePlanet",(function(){return $i}));var i=n(4),o=n(9),a=n.n(o);function s(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),i=Math.round(e.g),o=Math.round(e.b),a=e.a,s=Math.round(e.h),u=e.s.toFixed(1),c=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var l=e.hex.toString(16);l.length<6;)l="0"+l;return"#"+l}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+c+",a:"+a+"}":"unknown format"}var u=Array.prototype.forEach,c=Array.prototype.slice,l={BREAK:{},extend:function(e){return this.each(c.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(c.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=c.call(arguments);return function(){for(var t=c.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(u&&e.forEach&&e.forEach===u)e.forEach(t,n);else if(e.length===e.length+0){var r,i=void 0;for(i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){var i=this,o=arguments;function a(){r=null,n||e.apply(i,o)}var s=n||!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}},toArray:function(e){return e.toArray?e.toArray():c.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},f=[{litmus:l.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:s},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:s},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:s},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:s}}},{litmus:l.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:l.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:l.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(l.isNumber(e.r)&&l.isNumber(e.g)&&l.isNumber(e.b)&&l.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(l.isNumber(e.r)&&l.isNumber(e.g)&&l.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(l.isNumber(e.h)&&l.isNumber(e.s)&&l.isNumber(e.v)&&l.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(l.isNumber(e.h)&&l.isNumber(e.s)&&l.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],d=void 0,p=void 0,h=function(){p=!1;var e=arguments.length>1?l.toArray(arguments):arguments[0];return l.each(f,(function(t){if(t.litmus(e))return l.each(t.conversions,(function(t,n){if(d=t.read(e),!1===p&&!1!==d)return p=d,d.conversionName=n,d.conversion=t,l.BREAK})),l.BREAK})),p},m=void 0,v={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),o=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=e===i?(t-n)/o:t===i?2+(n-e)/o:4+(e-t)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/i,v:i/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(m=8*t)|e&~(255<<m)}},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},w=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},x=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},E=function(){function e(){if(y(this,e),this.__state=h.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return _(e,[{key:"toString",value:function(){return s(this)}},{key:"toHexString",value:function(){return s(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function A(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(E.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(E.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function S(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(E.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(E.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}E.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=v.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");l.extend(e.__state,v.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},E.recalculateHSV=function(e){var t=v.rgb_to_hsv(e.r,e.g,e.b);l.extend(e.__state,{s:t.s,v:t.v}),l.isNaN(t.h)?l.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},E.COMPONENTS=["r","g","b","h","s","v","hex","a"],A(E.prototype,"r",2),A(E.prototype,"g",1),A(E.prototype,"b",0),S(E.prototype,"h"),S(E.prototype,"s"),S(E.prototype,"v"),Object.defineProperty(E.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(E.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=v.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var T=function(){function e(t,n){y(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return _(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),M={};l.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){l.each(e,(function(e){M[e]=t}))}));var N=/(\d+(\.\d+)?)px/;function O(e){if("0"===e||l.isUndefined(e))return 0;var t=e.match(N);return l.isNull(t)?0:parseFloat(t[1])}var C={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,i=t;l.isUndefined(i)&&(i=!0),l.isUndefined(r)&&(r=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var i=n||{},o=M[t];if(!o)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var s=i.x||i.clientX||0,u=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,s,u,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;l.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}l.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),C},unbind:function(e,t,n,r){var i=r||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),C},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return C},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return C},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return O(t["border-left-width"])+O(t["border-right-width"])+O(t["padding-left"])+O(t["padding-right"])+O(t.width)},getHeight:function(e){var t=getComputedStyle(e);return O(t["border-top-width"])+O(t["border-bottom-width"])+O(t["padding-top"])+O(t["padding-bottom"])+O(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},R=function(e){function t(e,n){y(this,t);var r=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),C.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return w(t,e),_(t,[{key:"setValue",value:function(e){var n=b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(T),F=function(e){function t(e,n,r){y(this,t);var i=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r,a=i;if(i.__select=document.createElement("select"),l.isArray(o)){var s={};l.each(o,(function(e){s[e]=e})),o=s}return l.each(o,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)})),i.updateDisplay(),C.bind(i.__select,"change",(function(){var e=this.options[this.selectedIndex].value;a.setValue(e)})),i.domElement.appendChild(i.__select),i}return w(t,e),_(t,[{key:"setValue",value:function(e){var n=b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return C.isActive(this.__select)?this:(this.__select.value=this.getValue(),b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(T),P=function(e){function t(e,n){y(this,t);var r=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;function o(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),C.bind(r.__input,"keyup",o),C.bind(r.__input,"change",o),C.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),C.bind(r.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return w(t,e),_(t,[{key:"updateDisplay",value:function(){return C.isActive(this.__input)||(this.__input.value=this.getValue()),b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(T);function I(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var k=function(e){function t(e,n,r){y(this,t);var i=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,l.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=I(i.__impliedStep),i}return w(t,e),_(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=I(e),this}}]),t}(T);var z=function(e){function t(e,n,r){y(this,t);var i=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));i.__truncationSuspended=!1;var o=i,a=void 0;function s(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function u(e){var t=a-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),a=e.clientY}function c(){C.unbind(window,"mousemove",u),C.unbind(window,"mouseup",c),s()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),C.bind(i.__input,"change",(function(){var e=parseFloat(o.__input.value);l.isNaN(e)||o.setValue(e)})),C.bind(i.__input,"blur",(function(){s()})),C.bind(i.__input,"mousedown",(function(e){C.bind(window,"mousemove",u),C.bind(window,"mouseup",c),a=e.clientY})),C.bind(i.__input,"keydown",(function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,s())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return w(t,e),_(t,[{key:"updateDisplay",value:function(){var e,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(e*r)/r),b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(k);function D(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}var B=function(e){function t(e,n,r,i,o){y(this,t);var a=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:i,step:o})),s=a;function u(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(D(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function c(){C.unbind(window,"mousemove",u),C.unbind(window,"mouseup",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function l(e){var t=e.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(D(t,n.left,n.right,s.__min,s.__max))}function f(){C.unbind(window,"touchmove",l),C.unbind(window,"touchend",f),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),C.bind(a.__background,"mousedown",(function(e){document.activeElement.blur(),C.bind(window,"mousemove",u),C.bind(window,"mouseup",c),u(e)})),C.bind(a.__background,"touchstart",(function(e){if(1!==e.touches.length)return;C.bind(window,"touchmove",l),C.bind(window,"touchend",f),l(e)})),C.addClass(a.__background,"slider"),C.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return w(t,e),_(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(k),L=function(e){function t(e,n,r){y(this,t);var i=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,C.bind(i.__button,"click",(function(e){return e.preventDefault(),o.fire(),!1})),C.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return w(t,e),_(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(T),U=function(e){function t(e,n){y(this,t);var r=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.__color=new E(r.getValue()),r.__temp=new E(0);var i=r;r.domElement=document.createElement("div"),C.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",C.bind(r.__input,"keydown",(function(e){13===e.keyCode&&d.call(this)})),C.bind(r.__input,"blur",d),C.bind(r.__selector,"mousedown",(function(){C.addClass(this,"drag").bind(window,"mouseup",(function(){C.removeClass(i.__selector,"drag")}))})),C.bind(r.__selector,"touchstart",(function(){C.addClass(this,"drag").bind(window,"touchend",(function(){C.removeClass(i.__selector,"drag")}))}));var o,a=document.createElement("div");function s(e){m(e),C.bind(window,"mousemove",m),C.bind(window,"touchmove",m),C.bind(window,"mouseup",c),C.bind(window,"touchend",c)}function u(e){v(e),C.bind(window,"mousemove",v),C.bind(window,"touchmove",v),C.bind(window,"mouseup",f),C.bind(window,"touchend",f)}function c(){C.unbind(window,"mousemove",m),C.unbind(window,"touchmove",m),C.unbind(window,"mouseup",c),C.unbind(window,"touchend",c),p()}function f(){C.unbind(window,"mousemove",v),C.unbind(window,"touchmove",v),C.unbind(window,"mouseup",f),C.unbind(window,"touchend",f),p()}function d(){var e=h(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function p(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function m(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,o=n.clientY,a=(r-t.left)/(t.right-t.left),s=1-(o-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function v(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return l.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),l.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),l.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),l.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),l.extend(a.style,{width:"100%",height:"100%",background:"none"}),G(a,"top","rgba(0,0,0,0)","#000"),l.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=r.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",l.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),C.bind(r.__saturation_field,"mousedown",s),C.bind(r.__saturation_field,"touchstart",s),C.bind(r.__field_knob,"mousedown",s),C.bind(r.__field_knob,"touchstart",s),C.bind(r.__hue_field,"mousedown",u),C.bind(r.__hue_field,"touchstart",u),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return w(t,e),_(t,[{key:"updateDisplay",value:function(){var e=h(this.getValue());if(!1!==e){var t=!1;l.each(E.COMPONENTS,(function(n){if(!l.isUndefined(e[n])&&!l.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&l.extend(this.__color.__state,e)}l.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;l.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,G(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),l.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(T),j=["-moz-","-o-","-webkit-","-ms-",""];function G(e,t,n,r){e.style.background="",l.each(j,(function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "}))}var H=function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(e){}},V='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',X=function(e,t){var n=e[t];return l.isArray(arguments[2])||l.isObject(arguments[2])?new F(e,t,arguments[2]):l.isNumber(n)?l.isNumber(arguments[2])&&l.isNumber(arguments[3])?l.isNumber(arguments[4])?new B(e,t,arguments[2],arguments[3],arguments[4]):new B(e,t,arguments[2],arguments[3]):l.isNumber(arguments[4])?new z(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new z(e,t,{min:arguments[2],max:arguments[3]}):l.isString(n)?new P(e,t):l.isFunction(n)?new L(e,t,""):l.isBoolean(n)?new R(e,t):null};var q=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},W=function(){function e(){y(this,e),this.backgroundElement=document.createElement("div"),l.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),C.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),l.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;C.bind(this.backgroundElement,"click",(function(){t.hide()}))}return _(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),l.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",C.unbind(e.domElement,"webkitTransitionEnd",t),C.unbind(e.domElement,"transitionend",t),C.unbind(e.domElement,"oTransitionEnd",t)};C.bind(this.domElement,"webkitTransitionEnd",t),C.bind(this.domElement,"transitionend",t),C.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-C.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-C.getHeight(this.domElement)/2+"px"}}]),e}();H(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var Y="Default",$=function(){try{return!!window.localStorage}catch(e){return!1}}(),K=void 0,Z=!0,J=void 0,Q=!1,ee=[],te=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),C.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=l.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=l.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),l.isUndefined(r.load)?r.load={preset:Y}:r.preset&&(r.load.preset=r.preset),l.isUndefined(r.parent)&&r.hideable&&ee.push(this),r.resizable=l.isUndefined(r.parent)&&r.resizable,r.autoPlace&&l.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,o=$&&"true"===localStorage.getItem(se(this,"isLocal")),a=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,fe(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,s&&(s.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?C.addClass(n.__ul,e.CLASS_CLOSED):C.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return o},set:function(e){$&&(o=e,e?C.bind(window,"unload",a):C.unbind(window,"unload",a),localStorage.setItem(se(n,"isLocal"),e))}}}),l.isUndefined(r.parent)){if(this.closed=r.closed||!1,C.addClass(this.domElement,e.CLASS_MAIN),C.makeSelectable(this.domElement,!1),$&&o){n.useLocalStorage=!0;var u=localStorage.getItem(se(this,"gui"));u&&(r.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,C.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(C.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(C.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),C.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var c=document.createTextNode(r.name);C.addClass(c,"controller-name"),s=ne(n,c);C.addClass(this.__ul,e.CLASS_CLOSED),C.addClass(s,"title"),C.bind(s,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(l.isUndefined(r.parent)&&(Z&&(J=document.createElement("div"),C.addClass(J,"dg"),C.addClass(J,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(J),Z=!1),J.appendChild(this.domElement),C.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||fe(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},C.bind(window,"resize",this.__resizeHandler),C.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),C.bind(this.__ul,"transitionend",this.__resizeHandler),C.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&function(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function r(){C.removeClass(e.__closeButton,te.CLASS_DRAG),C.unbind(window,"mousemove",n),C.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),t=i.clientX,C.addClass(e.__closeButton,te.CLASS_DRAG),C.bind(window,"mousemove",n),C.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),l.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),C.bind(e.__resize_handle,"mousedown",i),C.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}(this),a=function(){$&&"true"===localStorage.getItem(se(n,"isLocal"))&&localStorage.setItem(se(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,r.parent||((i=n.getRoot()).width+=1,l.defer((function(){i.width-=1})))};function ne(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function re(e){C.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&C.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function ie(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function oe(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[e.preset])a=o[e.preset];else{if(!o[Y])return;a=o[Y]}if(a[r]&&void 0!==a[r][t.property]){var s=a[r][t.property];t.initialValue=s,t.setValue(s)}}}}function ae(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new U(t,n);else{var o=[t,n].concat(r.factoryArgs);i=X.apply(e,o)}r.before instanceof T&&(r.before=r.before.__li),oe(e,i),C.addClass(i.domElement,"c");var a=document.createElement("span");C.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var u=ne(e,s,r.before);return C.addClass(u,te.CLASS_CONTROLLER_ROW),i instanceof U?C.addClass(u,"color"):C.addClass(u,g(i.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,l.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),ae(e,n.object,n.property,{before:r,factoryArgs:[l.toArray(arguments)]})}if(l.isArray(t)||l.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),ae(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof B){var r=new z(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});l.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(r,e),t.apply(n,e)}})),C.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof z){var i=function(t){if(l.isNumber(n.__min)&&l.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=ae(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return t};n.min=l.compose(i,n.min),n.max=l.compose(i,n.max)}else n instanceof R?(C.bind(t,"click",(function(){C.fakeEvent(n.__checkbox,"click")})),C.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof L?(C.bind(t,"click",(function(){C.fakeEvent(n.__button,"click")})),C.bind(t,"mouseover",(function(){C.addClass(n.__button,"hover")})),C.bind(t,"mouseout",(function(){C.removeClass(n.__button,"hover")}))):n instanceof U&&(C.addClass(t,"color"),n.updateDisplay=l.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=l.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&ie(e.getRoot(),!0),t}),n.setValue)}(e,u,i),e.__controllers.push(i),i}function se(e,t){return document.location.href+"."+t}function ue(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function ce(e,t){t.style.display=e.useLocalStorage?"block":"none"}function le(e){var t=e.__save_row=document.createElement("li");C.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),C.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",C.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",C.addClass(r,"button"),C.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",C.addClass(i,"button"),C.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",C.addClass(o,"button"),C.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?l.each(e.load.remembered,(function(t,n){ue(e,n,n===e.preset)})):ue(e,Y,!1),C.bind(a,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),$){var s=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(se(0,"isLocal"))&&u.setAttribute("checked","checked"),ce(e,s),C.bind(u,"change",(function(){e.useLocalStorage=!e.useLocalStorage,ce(e,s)}))}var c=document.getElementById("dg-new-constructor");C.bind(c,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||K.hide()})),C.bind(n,"click",(function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),K.show(),c.focus(),c.select()})),C.bind(r,"click",(function(){e.save()})),C.bind(i,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),C.bind(o,"click",(function(){e.revert()}))}function fe(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function de(e,t){var n={};return l.each(e.__rememberedObjects,(function(r,i){var o={},a=e.__rememberedObjectIndecesToControllers[i];l.each(a,(function(e,n){o[n]=t?e.initialValue:e.getValue()})),n[i]=o})),n}te.toggleHide=function(){Q=!Q,l.each(ee,(function(e){e.domElement.style.display=Q?"none":""}))},te.CLASS_AUTO_PLACE="a",te.CLASS_AUTO_PLACE_CONTAINER="ac",te.CLASS_MAIN="main",te.CLASS_CONTROLLER_ROW="cr",te.CLASS_TOO_TALL="taller-than-window",te.CLASS_CLOSED="closed",te.CLASS_CLOSE_BUTTON="close-button",te.CLASS_CLOSE_TOP="close-top",te.CLASS_CLOSE_BOTTOM="close-bottom",te.CLASS_DRAG="drag",te.DEFAULT_WIDTH=245,te.TEXT_CLOSED="Close Controls",te.TEXT_OPEN="Open Controls",te._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||te.toggleHide()},C.bind(window,"keydown",te._keydownHandler,!1),l.extend(te.prototype,{add:function(e,t){return ae(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return ae(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;l.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&J.removeChild(this.domElement);var e=this;l.each(this.__folders,(function(t){e.removeFolder(t)})),C.unbind(window,"keydown",te._keydownHandler,!1),re(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new te(t);this.__folders[e]=n;var r=ne(this,n.domElement);return C.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],re(e);var t=this;l.each(e.__folders,(function(t){e.removeFolder(t)})),l.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=C.getOffset(e.__ul).top,n=0;l.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=C.getHeight(t))})),window.innerHeight-t-20<n?(C.addClass(e.domElement,te.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(C.removeClass(e.domElement,te.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&l.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:l.debounce((function(){this.onResize()}),50),remember:function(){if(l.isUndefined(K)&&((K=new W).domElement.innerHTML=V),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;l.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&le(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&fe(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=de(this)),e.folders={},l.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=de(this),ie(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[Y]=de(this,!0)),this.load.remembered[e]=de(this),this.preset=e,ue(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){l.each(this.__controllers,(function(t){this.getRoot().load.remembered?oe(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),l.each(this.__folders,(function(e){e.revert(e)})),e||ie(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&q.call(window,(function(){e(t)}));l.each(t,(function(e){e.updateDisplay()}))}(this.__listening)},updateDisplay:function(){l.each(this.__controllers,(function(e){e.updateDisplay()})),l.each(this.__folders,(function(e){e.updateDisplay()}))}});var pe={color:{Color:E,math:v,interpret:h},controllers:{Controller:T,BooleanController:R,OptionController:F,StringController:P,NumberController:k,NumberControllerBox:z,NumberControllerSlider:B,FunctionController:L,ColorController:U},dom:{dom:C},gui:{GUI:te},GUI:te},he={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e){return"number"==typeof e}function ge(e){return e&&!0===e.constructor.prototype.isBigNumber||!1}function ye(e){return e&&"object"===me(e)&&!0===Object.getPrototypeOf(e).isComplex||!1}function _e(e){return e&&"object"===me(e)&&!0===Object.getPrototypeOf(e).isFraction||!1}function be(e){return e&&!0===e.constructor.prototype.isUnit||!1}function we(e){return"string"==typeof e}var xe=Array.isArray;function Ee(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function Ae(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function Se(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function Te(e){return e&&!0===e.constructor.prototype.isRange||!1}function Me(e){return e&&!0===e.constructor.prototype.isIndex||!1}function Ne(e){return"boolean"==typeof e}function Oe(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function Ce(e){return e&&!0===e.constructor.prototype.isHelp||!1}function Re(e){return"function"==typeof e}function Fe(e){return e instanceof Date}function Pe(e){return e instanceof RegExp}function Ie(e){return!(!e||"object"!==me(e)||e.constructor!==Object||ye(e)||_e(e))}function ke(e){return null===e}function ze(e){return void 0===e}function De(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function Be(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function Le(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function Ue(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function je(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function Ge(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function He(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function Ve(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function Xe(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function qe(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function We(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function Ye(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function $e(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function Ke(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function Ze(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function Je(e){return e&&!0===e.constructor.prototype.isChain||!1}function Qe(e){var t=me(e);return"object"===t?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":ge(e)?"BigNumber":ye(e)?"Complex":_e(e)?"Fraction":Ee(e)?"Matrix":be(e)?"Unit":Me(e)?"Index":Te(e)?"Range":Oe(e)?"ResultSet":qe(e)?e.type:Je(e)?"Chain":Ce(e)?"Help":"Object":"function"===t?"Function":t}function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e){var t=et(e);if("number"===t||"string"===t||"boolean"===t||null==e)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map((function(e){return tt(e)}));if(e instanceof Date)return new Date(e.valueOf());if(ge(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return nt(e,tt)}function nt(e,t){var n={};for(var r in e)it(e,r)&&(n[r]=t(e[r]));return n}function rt(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!rt(e[r],t[r]))return!1;return!0}if("function"==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t&&rt(e[n],t[n])))return!1;for(n in t)if(!(n in e&&rt(e[n],t[n])))return!1;return!0}return e===t}function it(e,t){return e&&Object.hasOwnProperty.call(e,t)}var ot=["Matrix","Array"],at=["number","BigNumber","Fraction"];function st(){return(st=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ut=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(he)};function ct(e){return"boolean"==typeof e||!!isFinite(e)&&e===Math.round(e)}st(ut,he,{MATRIX_OPTIONS:ot,NUMBER_OPTIONS:at});var lt=Math.sign||function(e){return e>0?1:e<0?-1:0},ft=Math.log2||function(e){return Math.log(e)/Math.LN2},dt=Math.log10||function(e){return Math.log(e)/Math.LN10},pt=(Math.log1p,Math.cbrt||function(e){if(0===e)return e;var t,n=e<0;return n&&(e=-e),t=isFinite(e)?(e/((t=Math.exp(Math.log(e)/3))*t)+2*t)/3:e,n?-t:t}),ht=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function mt(e,t){if("function"==typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var n,r="auto";switch(t&&(t.notation&&(r=t.notation),ve(t)?n=t:ve(t.precision)&&(n=t.precision)),r){case"fixed":return gt(e,n);case"exponential":return yt(e,n);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=bt(vt(e),t),r=n.exponent,i=n.coefficients,o=r%3==0?r:r<0?r-3-r%3:r-r%3;if(ve(t))for(;t>i.length||r-o+1>i.length;)i.push(0);else for(var a=r>=0?r:Math.abs(o);i.length-1<a;)i.push(0);var s=Math.abs(r-o),u=1;for(;s>0;)u++,s--;var c=i.slice(u).join(""),l=ve(t)&&c.length||c.match(/[1-9]/)?"."+c:"",f=i.slice(0,u).join("")+l+"e"+(r>=0?"+":"")+o.toString();return n.sign+f}(e,n);case"auto":if(t&&t.exponential&&(void 0!==t.exponential.lower||void 0!==t.exponential.upper)){var i=nt(t,(function(e){return e}));return i.exponential=void 0,void 0!==t.exponential.lower&&(i.lowerExp=Math.round(Math.log(t.exponential.lower)/Math.LN10)),void 0!==t.exponential.upper&&(i.upperExp=Math.round(Math.log(t.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(t)+" with "+JSON.stringify(i)),_t(e,n,i)}return _t(e,n,t&&t).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}}function vt(e){var t=String(e).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),o=r.indexOf(".");i+=-1!==o?o-1:r.length-1;var a=r.replace(".","").replace(/^0*/,(function(e){return i-=e.length,""})).replace(/0*$/,"").split("").map((function(e){return parseInt(e)}));return 0===a.length&&(a.push(0),i++),{sign:n,coefficients:a,exponent:i}}function gt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=vt(e),r="number"==typeof t?bt(n,n.exponent+1+t):n,i=r.coefficients,o=r.exponent+1,a=o+(t||0);return i.length<a&&(i=i.concat(wt(a-i.length))),o<0&&(i=wt(1-o).concat(i),o=1),o<i.length&&i.splice(o,0,0===o?"0.":"."),r.sign+i.join("")}function yt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=vt(e),r=t?bt(n,t):n,i=r.coefficients,o=r.exponent;i.length<t&&(i=i.concat(wt(t-i.length)));var a=i.shift();return r.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function _t(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=n&&void 0!==n.lowerExp?n.lowerExp:-3,i=n&&void 0!==n.upperExp?n.upperExp:5,o=vt(e),a=t?bt(o,t):o;if(a.exponent<r||a.exponent>=i)return yt(e,t);var s=a.coefficients,u=a.exponent;s.length<t&&(s=s.concat(wt(t-s.length))),s=s.concat(wt(u-s.length+1+(s.length<t?t-s.length:0)));var c=u>0?u:0;return c<(s=wt(-u).concat(s)).length-1&&s.splice(c+1,0,"."),a.sign+s.join("")}function bt(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t&&r.splice(t,r.length-t)[0]>=5){var i=t-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n}function wt(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}var xt=Number.EPSILON||2220446049250313e-31;function Et(e,t,n){if(null==n)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var r=Math.abs(e-t);return r<xt||r<=Math.max(Math.abs(e),Math.abs(t))*n}return!1}var At=Math.acosh||function(e){return Math.log(Math.sqrt(e*e-1)+e)},St=Math.asinh||function(e){return Math.log(Math.sqrt(e*e+1)+e)},Tt=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},Mt=(Math.cosh,Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))/2});Math.tanh;function Nt(e,t){if("function"==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var n,r="auto";switch(void 0!==t&&(t.notation&&(r=t.notation),"number"==typeof t?n=t:t.precision&&(n=t.precision)),r){case"fixed":return function(e,t){return e.toFixed(t)}(e,n);case"exponential":return Ot(e,n);case"engineering":return function(e,t){var n=e.e,r=n%3==0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),o=i.toPrecision(t);-1!==o.indexOf("e")&&(o=i.toString());return o+"e"+(n>=0?"+":"")+r.toString()}(e,n);case"auto":if(t&&t.exponential&&(void 0!==t.exponential.lower||void 0!==t.exponential.upper)){var i=nt(t,(function(e){return e}));return i.exponential=void 0,void 0!==t.exponential.lower&&(i.lowerExp=Math.round(Math.log(t.exponential.lower)/Math.LN10)),void 0!==t.exponential.upper&&(i.upperExp=Math.round(Math.log(t.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(t)+" with "+JSON.stringify(i)),Nt(e,i)}var o=t&&void 0!==t.lowerExp?t.lowerExp:-3,a=t&&void 0!==t.upperExp?t.upperExp:5;if(e.isZero())return"0";var s=e.toSignificantDigits(n),u=s.e;return(u>=o&&u<a?s.toFixed():Ot(e,n)).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}}function Ot(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){return"number"==typeof e?mt(e,t):ge(e)?Nt(e,t):function(e){return e&&"object"===Ct(e)&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1}(e)?t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d:Array.isArray(e)?function e(t,n){if(Array.isArray(t)){for(var r="[",i=t.length,o=0;o<i;o++)0!==o&&(r+=", "),r+=e(t[o],n);return r+="]"}return Rt(t,n)}(e,t):we(e)?'"'+e+'"':"function"==typeof e?e.syntax?String(e.syntax):"function":e&&"object"===Ct(e)?"function"==typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map((function(n){return'"'+n+'": '+Rt(e[n],t)})).join(", ")+"}":String(e)}function Ft(e,t,n){if(!(this instanceof Ft))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}function Pt(e,t,n){if(!(this instanceof Pt))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function It(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function kt(e,t){if(0===t.length){if(Array.isArray(e))throw new Ft(e.length,0)}else!function e(t,n,r){var i,o=t.length;if(o!==n[r])throw new Ft(o,n[r]);if(r<n.length-1){var a=r+1;for(i=0;i<o;i++){var s=t[i];if(!Array.isArray(s))throw new Ft(n.length-1,n.length,"<");e(t[i],n,a)}}else for(i=0;i<o;i++)if(Array.isArray(t[i]))throw new Ft(n.length+1,n.length,">")}(e,t,0)}function zt(e,t){if(!ve(e)||!ct(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new Pt(e,t)}function Dt(e,t,n){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach((function(e){if(!ve(e)||!ct(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Rt(t)+")")})),function e(t,n,r,i){var o;var a;var s=t.length;var u=n[r];var c=Math.min(s,u);t.length=u;if(r<n.length-1){var l=r+1;for(o=0;o<c;o++)a=t[o],Array.isArray(a)||(a=[a],t[o]=a),e(a,n,l,i);for(o=c;o<u;o++)a=[],t[o]=a,e(a,n,l,i)}else{for(o=0;o<c;o++)for(;Array.isArray(t[o]);)t[o]=t[o][0];for(o=c;o<u;o++)t[o]=i}}(e,t,0,void 0!==n?n:0),e}function Bt(e,t){var n,r=Ut(e);function i(e){return e.reduce((function(e,t){return e*t}))}if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Ft(0,i(It(e)),"!=");for(var o=1,a=0;a<t.length;a++)o*=t[a];if(r.length!==o)throw new Ft(i(t),i(It(e)),"!=");try{n=function(e,t){for(var n,r=e,i=t.length-1;i>0;i--){var o=t[i];n=[];for(var a=r.length/o,s=0;s<a;s++)n.push(r.slice(s*o,(s+1)*o));r=n}return r}(r,t)}catch(n){if(n instanceof Ft)throw new Ft(i(t),i(It(e)),"!=");throw n}return n}function Lt(e,t,n,r){var i=r||It(e);if(n)for(var o=0;o<n;o++)e=[e],i.unshift(1);for(e=function e(t,n,r){var i,o;if(Array.isArray(t)){var a=r+1;for(i=0,o=t.length;i<o;i++)t[i]=e(t[i],n,a)}else for(var s=r;s<n;s++)t=[t];return t}(e,t,0);i.length<t;)i.push(1);return e}function Ut(e){if(!Array.isArray(e))return e;var t=[];return e.forEach((function e(n){Array.isArray(n)?n.forEach(e):t.push(n)})),t}function jt(e,t){for(var n,r=0,i=0;i<e.length;i++){var o=e[i],a=Array.isArray(o);if(0===i&&a&&(r=o.length),a&&o.length!==r)return;var s=a?jt(o,t):t(o);if(void 0===n)n=s;else if(n!==s)return"mixed"}return n}function Gt(e,t,n,r){function i(r){var i=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],o=e[i];void 0!==o&&(n[i]=o)}return n}(r,t.map(Ht));return function(e,t,n){if(!t.filter((function(e){return!function(e){return e&&"?"===e[0]}(e)})).every((function(e){return void 0!==n[e]}))){var r=t.filter((function(e){return void 0===n[e]}));throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(r.map((function(e){return'"'.concat(e,'"')})).join(", "),"."))}}(e,t,r),n(i)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function Ht(e){return e&&"?"===e[0]?e.slice(1):e}Ft.prototype=new RangeError,Ft.prototype.constructor=RangeError,Ft.prototype.name="DimensionError",Ft.prototype.isDimensionError=!0,Pt.prototype=new RangeError,Pt.prototype.constructor=RangeError,Pt.prototype.name="IndexError",Pt.prototype.isIndexError=!0;var Vt=n(1),Xt=n.n(Vt);function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Wt=Gt("Complex",[],(function(){return Xt.a.prototype.type="Complex",Xt.a.prototype.isComplex=!0,Xt.a.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Xt.a.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Xt.a.prototype.format=function(e){var t=this.im,n=this.re,r=mt(this.re,e),i=mt(this.im,e),o=ve(e)?e:e?e.precision:null;if(null!==o){var a=Math.pow(10,-o);Math.abs(n/t)<a&&(n=0),Math.abs(t/n)<a&&(t=0)}return 0===t?r:0===n?1===t?"i":-1===t?"-i":i+"i":t<0?-1===t?r+" - i":r+" - "+i.substring(1)+"i":1===t?r+" + i":r+" + "+i+"i"},Xt.a.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"===qt(t))return Xt()(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],r=arguments[1];if(ve(n)){if(be(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),ve(r))return new Xt.a({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Xt.a.prototype.valueOf=Xt.a.prototype.toString,Xt.a.fromJSON=function(e){return new Xt.a(e)},Xt.a.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Xt.a}),{isClass:!0});function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e,t){return function n(){"object"!==Yt(n.cache)&&(n.cache={});for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=t?t(r):JSON.stringify(r);return o in n.cache||(n.cache[o]=e.apply(e,r)),n.cache[o]}}$t((function(e){return new e(1).exp()}),Zt),$t((function(e){return new e(1).plus(new e(5).sqrt()).div(2)}),Zt);var Kt=$t((function(e){return e.acos(-1)}),Zt);$t((function(e){return Kt(e).times(2)}),Zt);function Zt(e){return e[0].precision}Math.PI,Math.PI,Math.E;var Jt=n(10),Qt=n.n(Jt),en=Gt("BigNumber",["?on","config"],(function(e){var t=e.on,n=e.config,r=Qt.a.clone({precision:n.precision});return r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(e){return new r(e.value)},t&&t("config",(function(e,t){e.precision!==t.precision&&r.config({precision:e.precision})})),r}),{isClass:!0}),tn=Gt("Matrix",[],(function(){function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.storage=function(e){throw new Error("Matrix.storage is deprecated since v6.0.0. Use the factory function math.matrix instead.")},e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e}),{isClass:!0});nn("fineStructure",.0072973525693),nn("weakMixingAngle",.2229),nn("efimovFactor",22.7),nn("sackurTetrode",-1.16487052358);function nn(e,t){return Gt(e,["config","BigNumber"],(function(e){var n=e.config,r=e.BigNumber;return"BigNumber"===n.number?new r(t):t}))}var rn=n(2),on=n.n(rn),an=Gt("Fraction",[],(function(){return on.a.prototype.type="Fraction",on.a.prototype.isFraction=!0,on.a.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},on.a.fromJSON=function(e){return new on.a(e)},on.a}),{isClass:!0}),sn=Gt("DenseMatrix",["Matrix"],(function(e){var t=e.Matrix;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!we(t))throw new Error("Invalid datatype: "+t);if(Ee(e))"DenseMatrix"===e.type?(this._data=tt(e._data),this._size=tt(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&&xe(e.data)&&xe(e.size))this._data=e.data,this._size=e.size,this._datatype=t||e.datatype;else if(xe(e))this._data=function e(t){for(var n=0,r=t.length;n<r;n++){var i=t[n];xe(i)?t[n]=e(i):i&&!0===i.isMatrix&&(t[n]=e(i.valueOf()))}return t}(e),this._size=It(this._data),kt(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+Qe(e)+")");this._data=[],this._size=[0],this._datatype=t}}function r(e,t){if(!Me(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var r=t.size();if(r.length!==e._size.length)throw new Ft(r.length,e._size.length);for(var i=t.min(),o=t.max(),a=0,s=e._size.length;a<s;a++)zt(i[a],e._size[a]),zt(o[a],e._size[a]);return new n(function e(t,n,r,i){var o=i===r-1;var a=n.dimension(i);return o?a.map((function(e){return zt(e,t.length),t[e]})).valueOf():a.map((function(o){zt(o,t.length);var a=t[o];return e(a,n,r,i+1)})).valueOf()}(e._data,t,r.length,0),e._datatype)}function i(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,o=t.size(),s=t.isScalar();if(Ee(n)?(i=n.size(),n=n.valueOf()):i=It(n),s){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(o.length<e._size.length)throw new Ft(o.length,e._size.length,"<");if(i.length<o.length){for(var u=0,c=0;1===o[u]&&1===i[u];)u++;for(;1===o[u];)c++,u++;n=Lt(n,o.length,c,i)}if(!rt(o,i))throw new Ft(o,i,">");a(e,t.max().map((function(e){return e+1})),r);var l=o.length;!function e(t,n,r,i,o){var a=o===i-1;var s=n.dimension(o);a?s.forEach((function(e,n){zt(e),t[e]=r[n[0]]})):s.forEach((function(a,s){zt(a),e(t[a],n,r[s[0]],i,o+1)}))}(e._data,t,n,l,0)}return e}function o(e,t,n){if(0===t.length){for(var r=e._data;xe(r);)r=r[0];return r}return e._size=t.slice(0),e._data=Dt(e._data,e._size,n),e}function a(e,t,n){for(var r=e._size.slice(0),i=!1;r.length<t.length;)r.push(0),i=!0;for(var a=0,s=t.length;a<s;a++)t[a]>r[a]&&(r[a]=t[a],i=!0);i&&o(e,r,n)}return n.prototype=new t,n.prototype.createDenseMatrix=function(e,t){return new n(e,t)},n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return jt(this._data,Qe)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(e,t){return new n(e,t)},n.prototype.subset=function(e,t,n){switch(arguments.length){case 1:return r(this,e);case 2:case 3:return i(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(e){if(!xe(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new Ft(e.length,this._size.length);for(var t=0;t<e.length;t++)zt(e[t],this._size[t]);for(var n=this._data,r=0,i=e.length;r<i;r++){var o=e[r];zt(o,n.length),n=n[o]}return n},n.prototype.set=function(e,t,n){if(!xe(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new Ft(e.length,this._size.length,"<");var r,i,o;a(this,e.map((function(e){return e+1})),n);var s=this._data;for(r=0,i=e.length-1;r<i;r++)zt(o=e[r],s.length),s=s[o];return zt(o=e[e.length-1],s.length),s[o]=t,this},n.prototype.resize=function(e,t,n){if(!xe(e))throw new TypeError("Array expected");return o(n?this.clone():this,e,t)},n.prototype.reshape=function(e,t){var n=t?this.clone():this;return n._data=Bt(n._data,e),n._size=e.slice(0),n},n.prototype.clone=function(){return new n({data:tt(this._data),size:tt(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(e){var t=this;return new n({data:function n(r,i){return xe(r)?r.map((function(e,t){return n(e,i.concat(t))})):e(r,i,t)}(this._data,[]),size:tt(this._size),datatype:this._datatype})},n.prototype.forEach=function(e){var t=this;!function n(r,i){xe(r)?r.forEach((function(e,t){n(e,i.concat(t))})):e(r,i,t)}(this._data,[])},n.prototype.toArray=function(){return tt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(e){return Rt(this._data,e)},n.prototype.toString=function(){return Rt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(e){if(e){if(ge(e)&&(e=e.toNumber()),!ve(e)||!ct(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var t=e>0?e:0,r=e<0?-e:0,i=this._size[0],o=this._size[1],a=Math.min(i-r,o-t),s=[],u=0;u<a;u++)s[u]=this._data[u+r][u+t];return new n({data:s,size:[a],datatype:this._datatype})},n.diagonal=function(e,t,r,i){if(!xe(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(ge(e)&&(e=e.toNumber()),!ve(e)||!ct(e)||e<1)throw new Error("Size values must be positive integers");return e})),r){if(ge(r)&&(r=r.toNumber()),!ve(r)||!ct(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var o,a=r>0?r:0,s=r<0?-r:0,u=e[0],c=e[1],l=Math.min(u-s,c-a);if(xe(t)){if(t.length!==l)throw new Error("Invalid value array length");o=function(e){return t[e]}}else if(Ee(t)){var f=t.size();if(1!==f.length||f[0]!==l)throw new Error("Invalid matrix length");o=function(e){return t.get([e])}}else o=function(){return t};i||(i=ge(o(0))?o(0).mul(0):0);var d=[];if(e.length>0){d=Dt(d,e,i);for(var p=0;p<l;p++)d[p+s][p+a]=o(p)}return new n({data:d,size:[u,c]})},n.fromJSON=function(e){return new n(e)},n.prototype.swapRows=function(e,t){if(!(ve(e)&&ct(e)&&ve(t)&&ct(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return zt(e,this._size[0]),zt(t,this._size[0]),n._swapRows(e,t,this._data),this},n._swapRows=function(e,t,n){var r=n[e];n[e]=n[t],n[t]=r},n}),{isClass:!0}),un=n(6),cn=n.n(un),ln=function(){return ln=cn.a.create,cn.a},fn=Gt("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(e){var t=e.BigNumber,n=e.Complex,r=e.DenseMatrix,i=e.Fraction,o=ln();return o.types=[{name:"number",test:ve},{name:"Complex",test:ye},{name:"BigNumber",test:ge},{name:"Fraction",test:_e},{name:"Unit",test:be},{name:"string",test:we},{name:"Chain",test:Je},{name:"Array",test:xe},{name:"Matrix",test:Ee},{name:"DenseMatrix",test:Ae},{name:"SparseMatrix",test:Se},{name:"Range",test:Te},{name:"Index",test:Me},{name:"boolean",test:Ne},{name:"ResultSet",test:Oe},{name:"Help",test:Ce},{name:"function",test:Re},{name:"Date",test:Fe},{name:"RegExp",test:Pe},{name:"null",test:ke},{name:"undefined",test:ze},{name:"AccessorNode",test:De},{name:"ArrayNode",test:Be},{name:"AssignmentNode",test:Le},{name:"BlockNode",test:Ue},{name:"ConditionalNode",test:je},{name:"ConstantNode",test:Ge},{name:"FunctionNode",test:Ve},{name:"FunctionAssignmentNode",test:He},{name:"IndexNode",test:Xe},{name:"Node",test:qe},{name:"ObjectNode",test:We},{name:"OperatorNode",test:Ye},{name:"ParenthesisNode",test:$e},{name:"RangeNode",test:Ke},{name:"SymbolNode",test:Ze},{name:"Object",test:Ie}],o.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(t||dn(e),e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return n||pn(e),new n(e,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(e){return n||pn(e),new n(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||pn(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){i||hn(e);var t=new i(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||dn(e);try{return new t(e)}catch(t){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){i||hn(e);try{return new i(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){n||pn(e);try{return new n(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||dn(e),new t(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return i||hn(e),new i(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return r||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],o}));function dn(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function pn(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function hn(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}function mn(e,t,n){return e&&"function"==typeof e.map?e.map((function(e){return mn(e,t,n)})):t(e)}var vn="number";function gn(e){return e<0}function yn(e){return e>0}function _n(e){return 0===e}function bn(e){return Number.isNaN(e)}gn.signature=vn,yn.signature=vn,_n.signature=vn,bn.signature=vn;function wn(e,t,n){if(null==n)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var r=e.minus(t).abs();if(r.isZero())return!0;var i=e.constructor.max(e.abs(),t.abs());return r.lte(i.times(n))}return!1}var xn=Gt("equalScalar",["typed","config"],(function(e){var t=e.typed,n=e.config,r=t("equalScalar",{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return Et(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||wn(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return function(e,t,n){return Et(e.re,t.re,n)&&Et(e.im,t.im,n)}(e,t,n.epsilon)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return r(e.value,t.value)}});return r})),En=(Gt("equalScalar",["typed","config"],(function(e){var t=e.typed,n=e.config;return t("equalScalar",{"number, number":function(e,t){return Et(e,t,n.epsilon)}})})),Gt("number",["typed"],(function(e){var t=(0,e.typed)("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t=Number(e);if(isNaN(t))throw new SyntaxError('String "'+e+'" is no valid number');return t},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:function(e){throw new Error("Second argument with valueless unit expected")},null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":function(e){return mn(e,t)}});return t}))),An="number, number";function Sn(e){return Math.abs(e)}function Tn(e,t){return e+t}function Mn(e,t){return e*t}function Nn(e){return-e}function On(e){return e}function Cn(e){return pt(e)}function Rn(e){return Math.ceil(e)}function Fn(e){return e*e*e}function Pn(e){return Math.exp(e)}function In(e){return ht(e)}function kn(e,t){if(!ct(e)||!ct(t))throw new Error("Parameters in function gcd must be integer numbers");for(var n;0!==t;)n=e%t,e=t,t=n;return e<0?-e:e}function zn(e,t){if(!ct(e)||!ct(t))throw new Error("Parameters in function lcm must be integer numbers");if(0===e||0===t)return 0;for(var n,r=e*t;0!==t;)t=e%(n=t),e=n;return Math.abs(r/e)}function Dn(e){return Math.log(e)}function Bn(e){return dt(e)}function Ln(e){return ft(e)}function Un(e,t){if(t>0)return e-t*Math.floor(e/t);if(0===t)return e;throw new Error("Cannot calculate mod for a negative divisor")}function jn(e,t){var n=t<0;if(n&&(t=-t),0===t)throw new Error("Root must be non-zero");if(e<0&&Math.abs(t)%2!=1)throw new Error("Root must be odd when a is negative.");if(0===e)return n?1/0:0;if(!isFinite(e))return n?0:e;var r=Math.pow(Math.abs(e),1/t);return r=e<0?-r:r,n?1/r:r}function Gn(e){return lt(e)}function Hn(e){return e*e}function Vn(e,t){var n,r,i,o=0,a=1,s=1,u=0;if(!ct(e)||!ct(t))throw new Error("Parameters in function xgcd must be integer numbers");for(;t;)i=e-(r=Math.floor(e/t))*t,n=o,o=a-r*o,a=n,n=s,s=u-r*s,u=n,e=t,t=i;return e<0?[-e,-a,-u]:[e,e?a:0,u]}function Xn(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(gt(e,t))}Sn.signature="number",Tn.signature=An,Mn.signature=An,Nn.signature="number",On.signature="number",Cn.signature="number",Rn.signature="number",Fn.signature="number",Pn.signature="number",In.signature="number",kn.signature=An,zn.signature=An,Dn.signature="number",Bn.signature="number",Ln.signature="number",Un.signature=An,jn.signature=An,Gn.signature="number",Hn.signature="number",Vn.signature=An,Xn.signature=An,qn.signature=An;var Wn=Gt("multiplyScalar",["typed"],(function(e){var t=(0,e.typed)("multiplyScalar",{"number, number":Mn,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,n){var r=n.clone();return r.value=null===r.value?r._normalize(e):t(r.value,e),r},"Unit, number | Fraction | BigNumber | Complex":function(e,n){var r=e.clone();return r.value=null===r.value?r._normalize(n):t(r.value,n),r},"Unit, Unit":function(e,t){return e.multiply(t)}});return t}));var Yn="number, number";function $n(e,t){if(!ct(e)||!ct(t))throw new Error("Integers expected in function bitAnd");return e&t}function Kn(e){if(!ct(e))throw new Error("Integer expected in function bitNot");return~e}function Zn(e,t){if(!ct(e)||!ct(t))throw new Error("Integers expected in function bitOr");return e|t}function Jn(e,t){if(!ct(e)||!ct(t))throw new Error("Integers expected in function bitXor");return e^t}function Qn(e,t){if(!ct(e)||!ct(t))throw new Error("Integers expected in function leftShift");return e<<t}function er(e,t){if(!ct(e)||!ct(t))throw new Error("Integers expected in function rightArithShift");return e>>t}function tr(e,t){if(!ct(e)||!ct(t))throw new Error("Integers expected in function rightLogShift");return e>>>t}$n.signature=Yn,Kn.signature="number",Zn.signature=Yn,Jn.signature=Yn,Qn.signature=Yn,er.signature=Yn,tr.signature=Yn;function nr(e){return!e}function rr(e,t){return!(!e&&!t)}function ir(e,t){return!!e!=!!t}function or(e,t){return!(!e||!t)}nr.signature="number",rr.signature="number, number",ir.signature="number, number",or.signature="number, number";Math.pow(2,53);function ar(e){return At(e)}function sr(e){return Math.atan(1/e)}function ur(e){return isFinite(e)?(Math.log((e+1)/e)+Math.log(e/(e-1)))/2:0}function cr(e){return Math.asin(1/e)}function lr(e){var t=1/e;return Math.log(t+Math.sqrt(t*t+1))}function fr(e){return Math.acos(1/e)}function dr(e){var t=1/e,n=Math.sqrt(t*t-1);return Math.log(n+t)}function pr(e){return St(e)}function hr(e){return Tt(e)}function mr(e){return 1/Math.tan(e)}function vr(e){var t=Math.exp(2*e);return(t+1)/(t-1)}function gr(e){return 1/Math.sin(e)}function yr(e){return 0===e?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(e)-Math.exp(-e)))*lt(e)}function _r(e){return 1/Math.cos(e)}function br(e){return 2/(Math.exp(e)+Math.exp(-e))}function wr(e){return Mt(e)}ar.signature="number",sr.signature="number",ur.signature="number",cr.signature="number",lr.signature="number",fr.signature="number",dr.signature="number",pr.signature="number",hr.signature="number",mr.signature="number",vr.signature="number",gr.signature="number",yr.signature="number",_r.signature="number",br.signature="number",wr.signature="number";function xr(e,t){if(t<e)return 1;if(t===e)return t;var n=t+e>>1;return xr(e,n)*xr(n+1,t)}function Er(e,t){if(!ct(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(!ct(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(t>e)throw new TypeError("k must be less than or equal to n");var n=e-t;return t<n?xr(n+1,e)/xr(1,t):xr(t+1,e)/xr(1,n)}Er.signature="number, number";n(7);Ar={};var Ar,Sr=Gt("fraction",["typed","Fraction"],(function(e){var t=e.typed,n=e.Fraction,r=t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new n(e)},string:function(e){return new n(e)},"number, number":function(e,t){return new n(e,t)},null:function(e){return new n(0)},BigNumber:function(e){return new n(e.toString())},Fraction:function(e){return e},Object:function(e){return new n(e)},"Array | Matrix":function(e){return mn(e,r)}});return r}));var Tr=Gt("cos",["typed"],(function(e){var t=(0,e.typed)("cos",{number:Math.cos,Complex:function(e){return e.cos()},BigNumber:function(e){return e.cos()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return t(e.value)},"Array | Matrix":function(e){return mn(e,t)}});return t})),Mr=Gt("sin",["typed"],(function(e){var t=(0,e.typed)("sin",{number:Math.sin,Complex:function(e){return e.sin()},BigNumber:function(e){return e.sin()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return t(e.value)},"Array | Matrix":function(e){return mn(e,t,!0)}});return t}));var Nr=Gt("SparseMatrix",["typed","equalScalar","Matrix"],(function(e){var t=e.typed,n=e.equalScalar,r=e.Matrix;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!we(t))throw new Error("Invalid datatype: "+t);if(Ee(e))!function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?tt(t._values):void 0,e._index=tt(t._index),e._ptr=tt(t._ptr),e._size=tt(t._size),e._datatype=n||t._datatype):o(e,t.valueOf(),n||t._datatype)}(this,e,t);else if(e&&xe(e.index)&&xe(e.ptr)&&xe(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(xe(e))o(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+Qe(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function o(e,r,i){e._values=[],e._index=[],e._ptr=[],e._datatype=i;var o=r.length,a=0,s=n,u=0;if(we(i)&&(s=t.find(n,[i,i])||n,u=t.convert(0,i)),o>0){var c=0;do{e._ptr.push(e._index.length);for(var l=0;l<o;l++){var f=r[l];if(xe(f)){if(0===c&&a<f.length&&(a=f.length),c<f.length){var d=f[c];s(d,u)||(e._values.push(d),e._index.push(l))}}else 0===c&&a<1&&(a=1),s(f,u)||(e._values.push(f),e._index.push(l))}c++}while(c<a)}e._ptr.push(e._index.length),e._size=[o,a]}function a(e,t){if(!Me(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n,r,o,a,s=t.size();if(s.length!==e._size.length)throw new Ft(s.length,e._size.length);var u=t.min(),c=t.max();for(n=0,r=e._size.length;n<r;n++)zt(u[n],e._size[n]),zt(c[n],e._size[n]);var l=e._values,f=e._index,d=e._ptr,p=t.dimension(0),h=t.dimension(1),m=[],v=[];p.forEach((function(e,t){v[e]=t[0],m[e]=!0}));var g=l?[]:void 0,y=[],_=[];return h.forEach((function(e){for(_.push(y.length),o=d[e],a=d[e+1];o<a;o++)n=f[o],!0===m[n]&&(y.push(v[n]),g&&g.push(l[o]))})),_.push(y.length),new i({values:g,index:y,ptr:_,size:s,datatype:e._datatype})}function s(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,o=t.size(),a=t.isScalar();if(Ee(n)?(i=n.size(),n=n.toArray()):i=It(n),a){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(1!==o.length&&2!==o.length)throw new Ft(o.length,e._size.length,"<");if(i.length<o.length){for(var s=0,u=0;1===o[s]&&1===i[s];)s++;for(;1===o[s];)u++,s++;n=Lt(n,o.length,u,i)}if(!rt(o,i))throw new Ft(o,i,">");for(var c=t.min()[0],l=t.min()[1],f=i[0],d=i[1],p=0;p<f;p++)for(var h=0;h<d;h++){var m=n[p][h];e.set([p+c,h+l],m,r)}}return e}function u(e,t,n,r){if(n-t==0)return n;for(var i=t;i<n;i++)if(r[i]===e)return i;return t}function c(e,t,n,r,i,o,a){i.splice(e,0,r),o.splice(e,0,t);for(var s=n+1;s<a.length;s++)a[s]++}function l(e,r,i,o){var a=o||0,s=n,u=0;we(e._datatype)&&(s=t.find(n,[e._datatype,e._datatype])||n,u=t.convert(0,e._datatype),a=t.convert(a,e._datatype));var c,l,f,d=!s(a,u),p=e._size[0],h=e._size[1];if(i>h){for(l=h;l<i;l++)if(e._ptr[l]=e._values.length,d)for(c=0;c<p;c++)e._values.push(a),e._index.push(c);e._ptr[i]=e._values.length}else i<h&&(e._ptr.splice(i+1,h-i),e._values.splice(e._ptr[i],e._values.length),e._index.splice(e._ptr[i],e._index.length));if(h=i,r>p){if(d){var m=0;for(l=0;l<h;l++){e._ptr[l]=e._ptr[l]+m,f=e._ptr[l+1]+m;var v=0;for(c=p;c<r;c++,v++)e._values.splice(f+v,0,a),e._index.splice(f+v,0,c),m++}e._ptr[h]=e._values.length}}else if(r<p){var g=0;for(l=0;l<h;l++){e._ptr[l]=e._ptr[l]-g;var y=e._ptr[l],_=e._ptr[l+1]-g;for(f=y;f<_;f++)(c=e._index[f])>r-1&&(e._values.splice(f,1),e._index.splice(f,1),g++)}e._ptr[l]=e._values.length}return e._size[0]=r,e._size[1]=i,e}function f(e,t,n,r,i){var o,a,s=r[0],u=r[1],c=[];for(o=0;o<s;o++)for(c[o]=[],a=0;a<u;a++)c[o][a]=0;for(a=0;a<u;a++)for(var l=n[a],f=n[a+1],d=l;d<f;d++)c[o=t[d]][a]=e?i?tt(e[d]):e[d]:1;return c}return i.prototype=new r,i.prototype.createSparseMatrix=function(e,t){return new i(e,t)},i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return jt(this._values,Qe)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(e,t){return new i(e,t)},i.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},i.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,e);case 2:case 3:return s(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(e){if(!xe(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new Ft(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];zt(t,this._size[0]),zt(n,this._size[1]);var r=u(t,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===t?this._values[r]:0},i.prototype.set=function(e,r,i){if(!xe(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new Ft(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var o=e[0],a=e[1],s=this._size[0],f=this._size[1],d=n,p=0;we(this._datatype)&&(d=t.find(n,[this._datatype,this._datatype])||n,p=t.convert(0,this._datatype)),(o>s-1||a>f-1)&&(l(this,Math.max(o+1,s),Math.max(a+1,f),i),s=this._size[0],f=this._size[1]),zt(o,s),zt(a,f);var h=u(o,this._ptr[a],this._ptr[a+1],this._index);return h<this._ptr[a+1]&&this._index[h]===o?d(r,p)?function(e,t,n,r,i){n.splice(e,1),r.splice(e,1);for(var o=t+1;o<i.length;o++)i[o]--}(h,a,this._values,this._index,this._ptr):this._values[h]=r:c(h,o,a,r,this._values,this._index,this._ptr),this},i.prototype.resize=function(e,t,n){if(!xe(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");return e.forEach((function(t){if(!ve(t)||!ct(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Rt(e)+")")})),l(n?this.clone():this,e[0],e[1],t)},i.prototype.reshape=function(e,t){if(!xe(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(e.forEach((function(t){if(!ve(t)||!ct(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Rt(e)+")")})),this._size[0]*this._size[1]!=e[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return n;for(var r=[],i=0;i<n._ptr.length;i++)for(var o=0;o<n._ptr[i+1]-n._ptr[i];o++)r.push(i);for(var a=n._values.slice(),s=n._index.slice(),l=0;l<n._index.length;l++){var f=s[l],d=r[l],p=f*n._size[1]+d;r[l]=p%e[1],s[l]=Math.floor(p/e[1])}n._values.length=0,n._index.length=0,n._ptr.length=e[1]+1,n._size=e.slice();for(var h=0;h<n._ptr.length;h++)n._ptr[h]=0;for(var m=0;m<a.length;m++){var v=s[m],g=r[m],y=a[m];c(u(v,n._ptr[g],n._ptr[g+1],n._index),v,g,y,n._values,n._index,n._ptr)}return n},i.prototype.clone=function(){return new i({values:this._values?tt(this._values):void 0,index:tt(this._index),ptr:tt(this._ptr),size:tt(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(e,r){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var o=this;return function(e,r,o,a,s,u,c){var l=[],f=[],d=[],p=n,h=0;we(e._datatype)&&(p=t.find(n,[e._datatype,e._datatype])||n,h=t.convert(0,e._datatype));for(var m=function(e,t,n){e=u(e,t,n),p(e,h)||(l.push(e),f.push(t))},v=a;v<=s;v++){d.push(l.length);var g=e._ptr[v],y=e._ptr[v+1];if(c)for(var _=g;_<y;_++){var b=e._index[_];b>=r&&b<=o&&m(e._values[_],b-r,v-a)}else{for(var w={},x=g;x<y;x++){var E=e._index[x];w[E]=e._values[x]}for(var A=r;A<=o;A++){var S=A in w?w[A]:0;m(S,A-r,v-a)}}}return d.push(l.length),new i({values:l,index:f,ptr:d,size:[o-r+1,s-a+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,(function(t,n,r){return e(t,[n,r],o)}),r)},i.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],i=0;i<r;i++){var o=this._ptr[i],a=this._ptr[i+1];if(t)for(var s=o;s<a;s++){var u=this._index[s];e(this._values[s],[u,i],this)}else{for(var c={},l=o;l<a;l++){c[this._index[l]]=this._values[l]}for(var f=0;f<n;f++){e(f in c?c[f]:0,[f,i],this)}}}},i.prototype.toArray=function(){return f(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return f(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+Rt(t,e)+" x "+Rt(n,e)+"] density: "+Rt(r,e)+"\n",o=0;o<n;o++)for(var a=this._ptr[o],s=this._ptr[o+1],u=a;u<s;u++){i+="\n    ("+Rt(this._index[u],e)+", "+Rt(o,e)+") ==> "+(this._values?Rt(this._values[u],e):"X")}return i},i.prototype.toString=function(){return Rt(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(e){if(e){if(ge(e)&&(e=e.toNumber()),!ve(e)||!ct(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,n=e<0?-e:0,r=this._size[0],o=this._size[1],a=Math.min(r-n,o-t),s=[],u=[],c=[];c[0]=0;for(var l=t;l<o&&s.length<a;l++)for(var f=this._ptr[l],d=this._ptr[l+1],p=f;p<d;p++){var h=this._index[p];if(h===l-t+n){s.push(this._values[p]),u[s.length-1]=h-n;break}}return c.push(s.length),new i({values:s,index:u,ptr:c,size:[a,1]})},i.fromJSON=function(e){return new i(e)},i.diagonal=function(e,r,o,a,s){if(!xe(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(ge(e)&&(e=e.toNumber()),!ve(e)||!ct(e)||e<1)throw new Error("Size values must be positive integers");return e})),o){if(ge(o)&&(o=o.toNumber()),!ve(o)||!ct(o))throw new TypeError("The parameter k must be an integer number")}else o=0;var u=n,c=0;we(s)&&(u=t.find(n,[s,s])||n,c=t.convert(0,s));var l,f=o>0?o:0,d=o<0?-o:0,p=e[0],h=e[1],m=Math.min(p-d,h-f);if(xe(r)){if(r.length!==m)throw new Error("Invalid value array length");l=function(e){return r[e]}}else if(Ee(r)){var v=r.size();if(1!==v.length||v[0]!==m)throw new Error("Invalid matrix length");l=function(e){return r.get([e])}}else l=function(){return r};for(var g=[],y=[],_=[],b=0;b<h;b++){_.push(g.length);var w=b-f;if(w>=0&&w<m){var x=l(w);u(x,c)||(y.push(w+d),g.push(x))}}return _.push(g.length),new i({values:g,index:y,ptr:_,size:[p,h]})},i.prototype.swapRows=function(e,t){if(!(ve(e)&&ct(e)&&ve(t)&&ct(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return zt(e,this._size[0]),zt(t,this._size[0]),i._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(e,t,n,r,i){for(var o=r[e],a=r[e+1],s=o;s<a;s++)i(n[s],t[s])},i._swapRows=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=o[a],c=o[a+1],l=u(e,s,c,i),f=u(t,s,c,i);if(l<c&&f<c&&i[l]===e&&i[f]===t){if(r){var d=r[l];r[l]=r[f],r[f]=d}}else if(l<c&&i[l]===e&&(f>=c||i[f]!==t)){var p=r?r[l]:void 0;i.splice(f,0,t),r&&r.splice(f,0,p),i.splice(f<=l?l+1:l,1),r&&r.splice(f<=l?l+1:l,1)}else if(f<c&&i[f]===t&&(l>=c||i[l]!==e)){var h=r?r[f]:void 0;i.splice(l,0,e),r&&r.splice(l,0,h),i.splice(l<=f?f+1:f,1),r&&r.splice(l<=f?f+1:f,1)}}},i}),{isClass:!0}),Or=Gt("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],(function(e){var t=e.typed,n=(e.Matrix,e.DenseMatrix),r=e.SparseMatrix;return t("matrix",{"":function(){return i([])},string:function(e){return i([],e)},"string, string":function(e,t){return i([],e,t)},Array:function(e){return i(e)},Matrix:function(e){return i(e,e.storage())},"Array | Matrix, string":i,"Array | Matrix, string, string":i});function i(e,t,i){if("dense"===t||"default"===t||void 0===t)return new n(e,i);if("sparse"===t)return new r(e,i);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}})),Cr=Gt("algorithm13",["typed"],(function(e){var t=e.typed;return function(e,n,r){var i,o=e._data,a=e._size,s=e._datatype,u=n._data,c=n._size,l=n._datatype,f=[];if(a.length!==c.length)throw new Ft(a.length,c.length);for(var d=0;d<a.length;d++){if(a[d]!==c[d])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+c+")");f[d]=a[d]}var p=r;"string"==typeof s&&s===l&&(i=s,p=t.find(r,[i,i]));var h=f.length>0?function e(t,n,r,i,o,a){var s=[];if(n===r.length-1)for(var u=0;u<i;u++)s[u]=t(o[u],a[u]);else for(var c=0;c<i;c++)s[c]=e(t,n+1,r,r[n+1],o[c],a[c]);return s}(p,0,f,f[0],o,u):[];return e.createDenseMatrix({data:h,size:f,datatype:i})}})),Rr=Gt("algorithm14",["typed"],(function(e){var t=e.typed;return function(e,n,r,i){var o,a=e._data,s=e._size,u=e._datatype,c=r;"string"==typeof u&&(o=u,n=t.convert(n,o),c=t.find(r,[o,o]));var l=s.length>0?function e(t,n,r,i,o,a,s){var u=[];if(n===r.length-1)for(var c=0;c<i;c++)u[c]=s?t(a,o[c]):t(o[c],a);else for(var l=0;l<i;l++)u[l]=e(t,n+1,r,r[n+1],o[l],a,s);return u}(c,0,s,s[0],a,n,i):[];return e.createDenseMatrix({data:l,size:tt(s),datatype:o})}})),Fr=Gt("algorithm02",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i,o){var a=e._data,s=e._size,u=e._datatype,c=r._values,l=r._index,f=r._ptr,d=r._size,p=r._datatype;if(s.length!==d.length)throw new Ft(s.length,d.length);if(s[0]!==d[0]||s[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h,m=s[0],v=s[1],g=n,y=0,_=i;"string"==typeof u&&u===p&&(h=u,g=t.find(n,[h,h]),y=t.convert(0,h),_=t.find(i,[h,h]));for(var b=[],w=[],x=[],E=0;E<v;E++){x[E]=w.length;for(var A=f[E],S=f[E+1],T=A;T<S;T++){var M=l[T],N=o?_(c[T],a[M][E]):_(a[M][E],c[T]);g(N,y)||(w.push(M),b.push(N))}}return x[v]=w.length,r.createSparseMatrix({values:b,index:w,ptr:x,size:[m,v],datatype:h})}})),Pr=Gt("algorithm03",["typed"],(function(e){var t=e.typed;return function(e,n,r,i){var o=e._data,a=e._size,s=e._datatype,u=n._values,c=n._index,l=n._ptr,f=n._size,d=n._datatype;if(a.length!==f.length)throw new Ft(a.length,f.length);if(a[0]!==f[0]||a[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+f+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,h=a[0],m=a[1],v=0,g=r;"string"==typeof s&&s===d&&(p=s,v=t.convert(0,p),g=t.find(r,[p,p]));for(var y=[],_=0;_<h;_++)y[_]=[];for(var b=[],w=[],x=0;x<m;x++){for(var E=x+1,A=l[x],S=l[x+1],T=A;T<S;T++){var M=c[T];b[M]=i?g(u[T],o[M][x]):g(o[M][x],u[T]),w[M]=E}for(var N=0;N<h;N++)w[N]===E?y[N][x]=b[N]:y[N][x]=i?g(v,o[N][x]):g(o[N][x],v)}return e.createDenseMatrix({data:y,size:[h,m],datatype:p})}})),Ir=Gt("algorithm11",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i,o){var a=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,d=c[0],p=c[1],h=n,m=0,v=i;"string"==typeof l&&(f=l,h=t.find(n,[f,f]),m=t.convert(0,f),r=t.convert(r,f),v=t.find(i,[f,f]));for(var g=[],y=[],_=[],b=e.createSparseMatrix({values:g,index:y,ptr:_,size:[d,p],datatype:f}),w=0;w<p;w++){_[w]=y.length;for(var x=u[w],E=u[w+1],A=x;A<E;A++){var S=s[A],T=o?v(r,a[A]):v(a[A],r);h(T,m)||(y.push(S),g.push(T))}}return _[p]=y.length,b}})),kr=Gt("algorithm12",["typed","DenseMatrix"],(function(e){var t=e.typed,n=e.DenseMatrix;return function(e,r,i,o){var a=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,d=c[0],p=c[1],h=i;"string"==typeof l&&(f=l,r=t.convert(r,f),h=t.find(i,[f,f]));for(var m=[],v=new n({data:m,size:[d,p],datatype:f}),g=[],y=[],_=0;_<p;_++){for(var b=_+1,w=u[_],x=u[_+1],E=w;E<x;E++){var A=s[E];g[A]=a[E],y[A]=b}for(var S=0;S<d;S++)0===_&&(m[S]=[]),y[S]===b?m[S][_]=o?h(r,g[S]):h(g[S],r):m[S][_]=o?h(r,0):h(0,r)}return v}})),zr=Gt("algorithm07",["typed","DenseMatrix"],(function(e){var t=e.typed,n=e.DenseMatrix;return function(e,i,o){var a=e._size,s=e._datatype,u=i._size,c=i._datatype;if(a.length!==u.length)throw new Ft(a.length,u.length);if(a[0]!==u[0]||a[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+u+")");var l,f,d,p=a[0],h=a[1],m=0,v=o;"string"==typeof s&&s===c&&(l=s,m=t.convert(0,l),v=t.find(o,[l,l]));var g=[];for(f=0;f<p;f++)g[f]=[];var y=new n({data:g,size:[p,h],datatype:l}),_=[],b=[],w=[],x=[];for(d=0;d<h;d++){var E=d+1;for(r(e,d,w,_,E),r(i,d,x,b,E),f=0;f<p;f++){var A=w[f]===E?_[f]:m,S=x[f]===E?b[f]:m;g[f][d]=v(A,S)}}return y};function r(e,t,n,r,i){for(var o=e._values,a=e._index,s=e._ptr,u=s[t],c=s[t+1];u<c;u++){var l=a[u];n[l]=i,r[l]=o[u]}}}));function Dr(){throw new Error('No "bignumber" implementation available')}function Br(){throw new Error('No "fraction" implementation available')}Gt("unequal",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return t("unequal",{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!n(e,t)}})}));var Lr=Gt("algorithm09",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i){var o=e._values,a=e._index,s=e._ptr,u=e._size,c=e._datatype,l=r._values,f=r._index,d=r._ptr,p=r._size,h=r._datatype;if(u.length!==p.length)throw new Ft(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");var m,v=u[0],g=u[1],y=n,_=0,b=i;"string"==typeof c&&c===h&&(m=c,y=t.find(n,[m,m]),_=t.convert(0,m),b=t.find(i,[m,m]));var w,x,E,A,S,T=o&&l?[]:void 0,M=[],N=[],O=e.createSparseMatrix({values:T,index:M,ptr:N,size:[v,g],datatype:m}),C=T?[]:void 0,R=[];for(x=0;x<g;x++){N[x]=M.length;var F=x+1;if(C)for(A=d[x],S=d[x+1],E=A;E<S;E++)R[w=f[E]]=F,C[w]=l[E];for(A=s[x],S=s[x+1],E=A;E<S;E++)if(w=a[E],C){var P=R[w]===F?C[w]:_,I=b(o[E],P);y(I,_)||(M.push(w),T.push(I))}else M.push(w)}return N[g]=M.length,O}})),Ur=Gt("dotMultiply",["typed","matrix","equalScalar","multiplyScalar"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.multiplyScalar,o=Fr({typed:t,equalScalar:r}),a=Lr({typed:t,equalScalar:r}),s=Ir({typed:t,equalScalar:r}),u=Cr({typed:t}),c=Rr({typed:t}),l=t("dotMultiply",{"any, any":i,"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,i,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,i,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,i,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,i)},"Array, Array":function(e,t){return l(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return l(n(e),t)},"Matrix, Array":function(e,t){return l(e,n(t))},"SparseMatrix, any":function(e,t){return s(e,t,i,!1)},"DenseMatrix, any":function(e,t){return c(e,t,i,!1)},"any, SparseMatrix":function(e,t){return s(t,e,i,!0)},"any, DenseMatrix":function(e,t){return c(t,e,i,!0)},"Array, any":function(e,t){return c(n(e),t,i,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,i,!0).valueOf()}});return l}));function jr(e,t,n,r){if(!(this instanceof jr))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+n+(null!=r?"-"+r:"")+" expected)",this.stack=(new Error).stack}jr.prototype=new Error,jr.prototype.constructor=Error,jr.prototype.name="ArgumentsError",jr.prototype.isArgumentsError=!0;n(3);function Gr(e){var t;if(ct(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:xr(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Gr(1-e));if(e>=171.35)return 1/0;if(e>85){var n=e*e,r=n*e,i=r*e,o=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*o)+5246819/(75246796800*o*e))}--e,t=Vr[0];for(var a=1;a<Vr.length;++a)t+=Vr[a]/(e+a);var s=e+Hr+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,e+.5)*Math.exp(-s)*t}Gr.signature="number";var Hr=4.7421875,Vr=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Xr=Gt("bignumber",["typed","BigNumber"],(function(e){var t=e.typed,n=e.BigNumber,r=t("bignumber",{"":function(){return new n(0)},number:function(e){return new n(e+"")},string:function(e){return new n(e)},BigNumber:function(e){return e},Fraction:function(e){return new n(e.n).div(e.d).times(e.s)},null:function(e){return new n(0)},"Array | Matrix":function(e){return mn(e,r)}});return r})),qr=Gt("numeric",["number","?bignumber","?fraction"],(function(e){var t=e.number,n=e.bignumber,r=e.fraction,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:function(e){return t(e)},BigNumber:n?function(e){return n(e)}:Dr,Fraction:r?function(e){return r(e)}:Br};return function(e,t){var n=Qe(e);if(!(n in i))throw new TypeError("Cannot convert "+e+' of type "'+n+'"; valid input types are '+Object.keys(i).join(", "));if(!(t in o))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(o).join(", "));return t===n?e:o[t](e)}}));var Wr=Gt("equal",["typed","matrix","equalScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.DenseMatrix,o=Pr({typed:t}),a=zr({typed:t,DenseMatrix:i}),s=kr({typed:t,DenseMatrix:i}),u=Cr({typed:t}),c=Rr({typed:t}),l=t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:r(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,r)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,r,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,r,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,r)},"Array, Array":function(e,t){return l(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return l(n(e),t)},"Matrix, Array":function(e,t){return l(e,n(t))},"SparseMatrix, any":function(e,t){return s(e,t,r,!1)},"DenseMatrix, any":function(e,t){return c(e,t,r,!1)},"any, SparseMatrix":function(e,t){return s(t,e,r,!0)},"any, DenseMatrix":function(e,t){return c(t,e,r,!0)},"Array, any":function(e,t){return c(n(e),t,r,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,r,!0).valueOf()}});return l})),Yr=(Gt("equal",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t)}})})),Gt("divideScalar",["typed","numeric"],(function(e){var t=e.typed,n=e.numeric,r=t("divideScalar",{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,t){var i=e.clone(),o=n(1,Qe(t));return i.value=r(null===i.value?i._normalize(o):i.value,t),i},"number | Fraction | BigNumber, Unit":function(e,t){var i=t.clone();i=i.pow(-1);var o=n(1,Qe(e));return i.value=r(e,null===t.value?t._normalize(o):t.value),i},"Unit, Unit":function(e,t){return e.divide(t)}});return r})));var $r=Gt("deepEqual",["typed","equal"],(function(e){var t=e.typed,n=e.equal;return t("deepEqual",{"any, any":function(e,t){return function e(t,r){if(Array.isArray(t)){if(Array.isArray(r)){var i=t.length;if(i!==r.length)return!1;for(var o=0;o<i;o++)if(!e(t[o],r[o]))return!1;return!0}return!1}return!Array.isArray(r)&&n(t,r)}(e.valueOf(),t.valueOf())}})}));var Kr=Gt("dotDivide",["typed","matrix","equalScalar","divideScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.divideScalar,o=e.DenseMatrix,a=Fr({typed:t,equalScalar:r}),s=Pr({typed:t}),u=zr({typed:t,DenseMatrix:o}),c=Ir({typed:t,equalScalar:r}),l=kr({typed:t,DenseMatrix:o}),f=Cr({typed:t}),d=Rr({typed:t}),p=t("dotDivide",{"any, any":i,"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,i,!1)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,i,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,i,!1)},"DenseMatrix, DenseMatrix":function(e,t){return f(e,t,i)},"Array, Array":function(e,t){return p(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return p(n(e),t)},"Matrix, Array":function(e,t){return p(e,n(t))},"SparseMatrix, any":function(e,t){return c(e,t,i,!1)},"DenseMatrix, any":function(e,t){return d(e,t,i,!1)},"any, SparseMatrix":function(e,t){return l(t,e,i,!0)},"any, DenseMatrix":function(e,t){return d(t,e,i,!0)},"Array, any":function(e,t){return d(n(e),t,i,!1).valueOf()},"any, Array":function(e,t){return d(n(t),e,i,!0).valueOf()}});return p}));var Zr=Wt({}),Jr=en({config:ut}),Qr=tn({}),ei=an({}),ti=sn({Matrix:Qr}),ni=fn({BigNumber:Jr,Complex:Zr,DenseMatrix:ti,Fraction:ei}),ri=xn({config:ut,typed:ni}),ii=En({typed:ni}),oi=Wn({typed:ni}),ai=Sr({Fraction:ei,typed:ni}),si=Tr({typed:ni}),ui=Mr({typed:ni}),ci=Nr({Matrix:Qr,equalScalar:ri,typed:ni}),li=Or({DenseMatrix:ti,Matrix:Qr,SparseMatrix:ci,typed:ni}),fi=Ur({equalScalar:ri,matrix:li,multiplyScalar:oi,typed:ni}),di=Xr({BigNumber:Jr,typed:ni}),pi=qr({bignumber:di,fraction:ai,number:ii}),hi=Wr({DenseMatrix:ti,equalScalar:ri,matrix:li,typed:ni}),mi=Yr({numeric:pi,typed:ni}),vi=$r({equal:hi,typed:ni}),gi=Kr({DenseMatrix:ti,divideScalar:mi,equalScalar:ri,matrix:li,typed:ni});const yi=()=>Math.random().toString(36).substr(2,9),_i=e=>[e,e,e],bi=e=>"boolean"==typeof e?e?"1":"0":Array.isArray(e)?xi(e):e.toString(),wi=e=>"string"==typeof e?"_"+e:e%1==0?e+".0":e.toString(),xi=e=>"string"==typeof e?"_"+e:"number"==typeof e?`vec3(${wi(e)})`:Array.isArray(e)?`vec3(${wi(e[0])},${wi(e[1])},${wi(e[2])})`:void 0,Ei=(e,t)=>{if("string"==typeof e)return!1;for(let n=0;n<3;n++)if(e[n]!==t[n])return!1;return!0},Ai=(e,t)=>Mi[e]=t,Si=e=>"string"==typeof e||e>0?` - vec4(${xi(e)}, 0)`:"",Ti=e=>{if(Array.isArray(e.color))return`vec4(${xi(e.color)}, ${e.glsl})`;if("orbit"===e.color||0===e.color)return`vec4(orbit, ${e.glsl})`;throw new Error("Invalid coloring type")};var Mi={};var Ni=class{constructor(){this.trans=[],this.name="obj"+yi(),this.color=`col_${this.name}(p)`,this.glsl=`de_${this.name}(p)`}add(e){this.trans.push(e)}forwardDecl(){return`float de_${this.name}(vec4 p);\nvec4 col_${this.name}(vec4 p);`}compiled(e){let t=[],n=`float de_${this.name}(vec4 p) {\n\tvec4 o = p;\n\tfloat d = 1e20;\n`;return this.trans.forEach(r=>{"color"in r?(n+=`\td = min(d, ${r.glsl});\n`,"forwardDecl"in r&&!(r.name in e)&&(e[r.name]=r,t.push(r))):"orbit"in r||(n+=r.glsl)}),n+=`\treturn d;\n}\nvec4 col_${this.name}(vec4 p) {\n\tvec4 o = p;\n\tvec4 col = vec4(1e20);\n\tvec4 newCol;\n`,this.trans.forEach(e=>{"color"in e?(n+=`\tnewCol = ${"forwardDecl"in e?e.color:Ti(e)};\n`,n+="\tif (newCol.w < col.w) { col = newCol; }\n"):n+="orbit"in e?e.orbit:e.glsl}),n+="\treturn col;\n}\n",t.forEach(t=>n+=t.compiled(e)),n}};const Oi=(e=[1,1,1],t=[0,0,0])=>({orbit:`\torbit = min(orbit, abs((p.xyz - ${xi(t)})*${xi(e)}));\n`}),Ci=(e=[1,1,1],t=[0,0,0])=>({orbit:`\torbit = max(orbit, (p.xyz - ${xi(t)})*${xi(e)});\n`}),Ri=(e=[1,1,1],t=[0,0,0])=>({orbit:`\torbit += (p.xyz - ${xi(t)})*${xi(e)};\n`}),Fi=(e=[1,0,0],t=0)=>{let n="";return{glsl:n=Ei(e,[1,0,0])?`\tp.x = abs(p.x - ${wi(t)}) + ${wi(t)};\n`:Ei(e,[0,1,0])?`\tp.y = abs(p.y - ${wi(t)}) + ${wi(t)};\n`:Ei(e,[0,0,1])?`\tp.z = abs(p.z - ${wi(t)}) + ${wi(t)};\n`:Ei(e,[-1,0,0])?`\tp.x = -abs(p.x + ${wi(t)}) - ${wi(t)};\n`:Ei(e,[0,-1,0])?`\tp.y = -abs(p.y + ${wi(t)}) - ${wi(t)};\n`:Ei(e,[0,0,-1])?`\tp.z = -abs(p.z + ${wi(t)}) - ${wi(t)};\n`:`\tplaneFold(p, ${xi(e)}, ${wi(t)});\n`}},Pi=(e=[0,0,0])=>({glsl:Ei(e,[0,0,0])?"\tp.xyz = abs(p.xyz);\n":`\tabsFold(p, ${xi(e)});\n`}),Ii=(e=1,t=[0,0,0])=>{let n="";return 1!==e&&("number"==typeof e&&e>=0?n+=`\tp *= ${wi(e)};\n`:(n+=`\tp.xyz *= ${wi(e)};\n`,n+=`\tp.w *= abs(${wi(e)});\n`)),vi(t,[0,0,0])||(n+=`\tp.xyz += ${xi(t)};\n`),{glsl:n}},ki=(e=1)=>({glsl:1!==e?`\tp = p*${wi(e)};p.w = abs(p.w);p += o;\n`:"\tp += o;\n"}),zi=(e=[1,1,1])=>({glsl:`\tboxFold(p,${xi(e)});\n`}),Di=(e=.5,t=1)=>({glsl:`\tsphereFold(p,${wi(e)},${wi(t)});\n`}),Bi=e=>({glsl:"number"==typeof e?`\trotX(p, ${wi(ui(e))}, ${wi(si(e))});\n`:`\trotX(p, ${wi(e)});\n`}),Li=e=>({glsl:"number"==typeof e?`\trotY(p, ${wi(Math.sin(e))}, ${wi(Math.cos(e))});\n`:`\trotY(p, ${wi(e)});\n`}),Ui=(e=1,t=[0,0,0],n=[1,1,1])=>({color:n,glsl:`de_sphere(p${Si(t)}, ${wi(e)})`}),ji=(e=[1,1,1],t=[0,0,0],n=[1,1,1])=>({color:n,glsl:`de_box(p${Si(t)}, ${xi(e)})`}),Gi=()=>{const e=new Ni;for(let t=0;t<9;t++)e.add({glsl:"\tsierpinskiFold(p);\n"}),e.add(Ii(2,-1));return e.add(((e=1,t=[0,0,0],n=[1,1,1])=>({color:n,glsl:`de_tetrahedron(p${Si(t)},${wi(e)})`}))(1,[0,0,0],[.8,.8,.5])),e},Hi=()=>{const e=new Ni;for(let t=0;t<20;t++)e.add(Pi()),e.add({glsl:"\tmengerFold(p);\n"}),e.add(Ii(3,[-2,-2,0])),e.add(Fi([0,0,-1],-1));return e.add(ji(4,8,[.8,.2,.2])),e},Vi=()=>{const e=new Ni;return e.add((e=>({glsl:`\tp.xyz = abs(mod(p.xyz - ${wi(e)}/2.0,${wi(e)}) - ${wi(e)}/2.0);\n`}))(5)),e.add(Ui()),e},Xi=()=>{const e=new Ni;e.add({orbit:"\tvec3 orbit = vec3(0.0);\n"});for(let t=0;t<30;t++)e.add(Pi()),e.add(Ii(1.5,[-1,-.5,-.2])),e.add(Ri([.5,.03,0])),e.add(Bi(3.61)),e.add(Li(2.03));return e.add(Ui(1,[0,0,0],"orbit")),e},qi=()=>{const e=new Ni;e.add({orbit:"\tvec3 orbit = vec3(1e20);\n"});for(let t=0;t<9;t++)e.add(zi(1)),e.add(Di(.5,1)),e.add(ki(2)),e.add(Oi(1));return e.add(ji(6,[0,0,0],"orbit")),e},Wi=()=>{const e=new Ni;e.add({orbit:"\tvec3 orbit = vec3(1e20);\n"});for(let t=0;t<30;t++)e.add(Li(3.33)),e.add({glsl:"\tsierpinskiFold(p);\n"}),e.add(Bi(.15)),e.add({glsl:"\tmengerFold(p);\n"}),e.add(Ii(1.57,[-6.61,-4,-2.42])),e.add(Oi(1));return e.add(ji(4.8,[0,0,0],"orbit")),e},Yi=()=>{const e=new Ni;e.add({orbit:"\tvec3 orbit = vec3(0.0);\n"});for(let t=0;t<9;t++)e.add(zi(.34)),e.add({glsl:"\tmengerFold(p);\n"}),e.add(Ii(3.28,[-5.27,-.34,0])),e.add(Bi(Math.PI/2)),e.add(Ci([.42,.38,.19]));return e.add(ji(2,[0,0,0],"orbit")),e},$i=()=>{const e=new Ni;e.add({orbit:"\tvec3 orbit = vec3(1e20);\n"});for(let t=0;t<28;t++)e.add(Li(.44)),e.add(Pi()),e.add({glsl:"\tmengerFold(p);\n"}),e.add(Oi([.24,2.28,7.6])),e.add(Ii(1.3,[-2,-4.8,0])),e.add(Fi([0,0,-1],0));return e.add(ji(4.8,[0,0,0],"orbit")),e};var Ki={antialiasingSamples:{name:"ANTIALIASING_SAMPLES",int:!0,default:1},ambientOcclusionStrength:{name:"AMBIENT_OCCLUSION_STRENGTH",default:.01},ambientOcclusionColorDelta:{name:"AMBIENT_OCCLUSION_COLOR_DELTA",default:[.8,.8,.8]},backgroundColor:{name:"BACKGROUND_COLOR",default:[.6,.6,.9]},depthOfFieldStrength:{name:"DEPTH_OF_FIELD_STRENGTH",default:0},depthOfFieldDistance:{name:"DEPTH_OF_FIELD_DISTANCE",default:5},diffuseEnabled:{name:"DIFFUSE_ENABLED",default:!1},diffuseEnhancedEnabled:{name:"DIFFUSE_ENHANCED_ENABLED",default:!0},exposure:{name:"EXPOSURE",default:1},fieldOfView:{name:"FIELD_OF_VIEW",default:60},fogEnabled:{name:"FOG_ENABLED",default:!1},glowEnabled:{name:"GLOW_ENABLED",default:!1},glowColorDelta:{name:"GLOW_COLOR_DELTA",default:[-.2,.5,-.2]},glowSharpness:{name:"GLOW_SHARPNESS",default:4},lightColor:{name:"LIGHT_COLOR",default:[1,.9,.6]},lightDirection:{name:"LIGHT_DIRECTION",default:[-.36,.48,.8]},lodMultiplier:{name:"LOD_MULTIPLIER",default:50},maxMarches:{name:"MAX_MARCHES",int:!0,default:1e3},maxDist:{name:"MAX_DIST",default:50},minDist:{name:"MIN_DIST",default:1e-5},motionBlurLevel:{name:"MOTION_BLUR_LEVEL",int:!0,default:0},motionBlurRatio:{name:"MOTION_BLUR_RATIO",default:1},ods:{name:"ODS",default:!1},orthogonalProjection:{name:"ORTHOGONAL_PROJECTION",default:!1},orthogonalZoom:{name:"ORTHOGONAL_ZOOM",default:1},reflectionLevel:{name:"REFLECTION_LEVEL",int:!0,default:0},reflectionAttenuation:{name:"REFLECTION_ATTENUATION",default:.6},shadowsEnabled:{name:"SHADOWS_ENABLED",default:!0},shadowDarkness:{name:"SHADOW_DARKNESS",default:.8},shadowSharpness:{name:"SHADOW_SHARPNESS",default:16},specularHighlight:{name:"SPECULAR_HIGHLIGHT",int:!0,default:40},sunEnabled:{name:"SUN_ENABLED",default:!0},sunSize:{name:"SUN_SIZE",default:.005},sunSharpness:{name:"SUN_SHARPNESS",default:2},vignetteForeground:{name:"VIGNETTE_FOREGROUND",default:!1},vignetteStrength:{name:"VIGNETTE_STRENGTH",default:.5}};var Zi=class{constructor(){this.onUpdateScene=()=>{},this.gui=new pe.GUI,this.sceneProps={example:"sierpinskiTetrahedron",camera:this._getDefaultCameraProps()},this.gui.add(this.sceneProps,"example",Object.keys(r)).onFinishChange(this.updateScene.bind(this));const e=this.gui.addFolder("camera");e.add(this,"updateScene"),e.add(this.sceneProps.camera,"antialiasingSamples",1,8).step(1),e.add(this.sceneProps.camera,"ambientOcclusionStrength",0,.05),e.addColor(this.sceneProps.camera,"backgroundColor",1,8),e.add(this.sceneProps.camera,"depthOfFieldStrength",0,20),e.add(this.sceneProps.camera,"depthOfFieldDistance",0,100),e.add(this.sceneProps.camera,"diffuseEnabled"),e.add(this.sceneProps.camera,"diffuseEnhancedEnabled"),e.add(this.sceneProps.camera,"exposure",.1,10),e.add(this.sceneProps.camera,"fieldOfView",20,120),e.add(this.sceneProps.camera,"fogEnabled"),e.add(this.sceneProps.camera,"glowEnabled"),e.add(this.sceneProps.camera,"glowSharpness",1,100),e.addColor(this.sceneProps.camera,"lightColor"),e.add(this.sceneProps.camera,"lodMultiplier",0,100),e.add(this.sceneProps.camera,"maxMarches",10,1e4).step(1),e.add(this.sceneProps.camera,"maxDist",.5,200),e.add(this.sceneProps.camera,"minDist",1e-6,.01),e.add(this.sceneProps.camera,"ods"),e.add(this.sceneProps.camera,"orthogonalProjection"),e.add(this.sceneProps.camera,"orthogonalZoom",.5,50),e.add(this.sceneProps.camera,"reflectionLevel",0,8).step(1),e.add(this.sceneProps.camera,"reflectionAttenuation",.25,1),e.add(this.sceneProps.camera,"shadowsEnabled"),e.add(this.sceneProps.camera,"shadowDarkness",0,1),e.add(this.sceneProps.camera,"shadowSharpness",1,100),e.add(this.sceneProps.camera,"specularHighlight",0,1e3).step(1),e.add(this.sceneProps.camera,"sunEnabled"),e.add(this.sceneProps.camera,"sunSize",1e-4,.05),e.add(this.sceneProps.camera,"sunSharpness",.1,10),e.add(this.sceneProps.camera,"vignetteForeground"),e.add(this.sceneProps.camera,"vignetteStrength",0,1.5)}_getDefaultCameraProps(){let e={};for(let[t,n]of Object.entries(Ki))["backgroundColor","lightColor"].includes(t)?e[t]=fi(n.default,255):e[t]=n.default;return e}updateScene(){const{example:e,camera:t}=this.sceneProps;this.onUpdateScene({example:r[e](),camera:{...t,backgroundColor:gi(t.backgroundColor,255),lightColor:gi(t.lightColor,255)}})}},Ji=()=>"#version 300 es\nin vec4 vPosition;\n\nvoid main() {\n\tgl_Position = vPosition;\n}\n",Qi=({defineCode:e,varCode:t,spaceCode:n})=>`#version 300 es\nprecision highp float;\nprecision mediump int;\n\nuniform highp mat4 iMat;\nuniform mat4 iPrevMat;\nuniform vec2 iResolution;\nuniform float iIPD;\n\nout vec4 col;\n\n#define M_PI 3.14159265358979\n\n// [define]\n${e}\n// [/define]\n\n// [vars]\n${t}\n// [/vars]\n\nconst float FOCAL_DIST = 1.0 / tan(M_PI * FIELD_OF_VIEW / 360.0);\n\nfloat rand(float s, float minV, float maxV) {\n\tfloat r = sin(s*s*27.12345 + 1000.9876 / (s*s + 1e-5));\n\treturn (r + 1.0) * 0.5 * (maxV - minV) + minV;\n}\nfloat smin(float a, float b, float k) {\n\tfloat h = clamp(0.5 + 0.5*(b-a)/k, 0.0, 1.0 );\n\treturn mix(b, a, h) - k*h*(1.0 - h);\n\t//return -log(exp(-a/k) + exp(-b/k))*k;\n}\n\n//##########################################\n//\n//   Space folding functions\n//\n//##########################################\nvoid planeFold(inout vec4 z, vec3 n, float d) {\n\tz.xyz -= 2.0 * min(0.0, dot(z.xyz, n) - d) * n;\n}\nvoid absFold(inout vec4 z, vec3 c) {\n\tz.xyz = abs(z.xyz - c) + c;\n}\nvoid sierpinskiFold(inout vec4 z) {\n\tz.xy -= min(z.x + z.y, 0.0);\n\tz.xz -= min(z.x + z.z, 0.0);\n\tz.yz -= min(z.y + z.z, 0.0);\n}\nvoid mengerFold(inout vec4 z) {\n\tfloat a = min(z.x - z.y, 0.0);\n\tz.x -= a;\n\tz.y += a;\n\ta = min(z.x - z.z, 0.0);\n\tz.x -= a;\n\tz.z += a;\n\ta = min(z.y - z.z, 0.0);\n\tz.y -= a;\n\tz.z += a;\n}\nvoid sphereFold(inout vec4 z, float minR, float maxR) {\n\tfloat r2 = dot(z.xyz, z.xyz);\n\tz *= max(maxR / max(minR, r2), 1.0);\n}\nvoid boxFold(inout vec4 z, vec3 r) {\n\tz.xyz = clamp(z.xyz, -r, r) * 2.0 - z.xyz;\n}\nvoid rotX(inout vec4 z, float s, float c) {\n\tz.yz = vec2(c*z.y + s*z.z, c*z.z - s*z.y);\n}\nvoid rotY(inout vec4 z, float s, float c) {\n\tz.xz = vec2(c*z.x - s*z.z, c*z.z + s*z.x);\n}\nvoid rotZ(inout vec4 z, float s, float c) {\n\tz.xy = vec2(c*z.x + s*z.y, c*z.y - s*z.x);\n}\nvoid rotX(inout vec4 z, float a) {\n\trotX(z, sin(a), cos(a));\n}\nvoid rotY(inout vec4 z, float a) {\n\trotY(z, sin(a), cos(a));\n}\nvoid rotZ(inout vec4 z, float a) {\n\trotZ(z, sin(a), cos(a));\n}\n\n//##########################################\n//\n//   Primative distance estimators\n//\n//##########################################\nfloat de_sphere(vec4 p, float r) {\n\treturn (length(p.xyz) - r) / p.w;\n}\nfloat de_box(vec4 p, vec3 s) {\n\tvec3 a = abs(p.xyz) - s;\n\treturn (min(max(max(a.x, a.y), a.z), 0.0) + length(max(a, 0.0))) / p.w;\n}\nfloat de_tetrahedron(vec4 p, float r) {\n\tfloat md = max(max(-p.x - p.y - p.z, p.x + p.y - p.z),\n\t\t\t\t   max(-p.x + p.y + p.z, p.x - p.y + p.z));\n\treturn (md - r) / (p.w * sqrt(3.0));\n}\nfloat de_inf_cross(vec4 p, float r) {\n\tvec3 q = p.xyz * p.xyz;\n\treturn (sqrt(min(min(q.x + q.y, q.x + q.z), q.y + q.z)) - r) / p.w;\n}\nfloat de_inf_cross_xy(vec4 p, float r) {\n\tvec3 q = p.xyz * p.xyz;\n\treturn (sqrt(min(q.x, q.y) + q.z) - r) / p.w;\n}\nfloat de_inf_line(vec4 p, vec3 n, float r) {\n\treturn (length(p.xyz - n*dot(p.xyz, n)) - r) / p.w;\n}\n\n//##########################################\n//\n//   Compiled\n//\n//##########################################\n\n// [space]\n${n}\n// [/space]\n\n//##########################################\n//\n//   Main code\n//\n//##########################################\nvec4 ray_march(inout vec4 p, vec4 ray, float sharpness, float td) {\n\t//March the ray\n\tfloat d = MIN_DIST;\n\tfloat s = 0.0;\n\tfloat min_d = 1.0;\n\tfor (; s < float(MAX_MARCHES); s += 1.0) {\n\t\td = DE(p);\n\t\tif (d < MIN_DIST) {\n\t\t\ts += d / MIN_DIST;\n\t\t\tbreak;\n\t\t} else if (td > float(MAX_DIST)) {\n\t\t\tbreak;\n\t\t}\n\t\ttd += d;\n\t\tp += ray * d;\n\t\tmin_d = min(min_d, sharpness * d / td);\n\t}\n\treturn vec4(d, s, td, min_d);\n}\nvec4 ray_march(inout vec4 p, vec3 ray, float sharpness, float td) {\n\treturn ray_march(p, vec4(ray, 0.0), sharpness, td);\n}\n\n//A faster formula to find the gradient/normal direction of the DE(the w component is the average DE)\n//credit to http://www.iquilezles.org/www/articles/normalsSDF/normalsSDF.htm\nvec3 calcNormal(vec4 p, float dx) {\n\tconst vec3 k = vec3(1,-1,0);\n\treturn normalize(k.xyy*DE(p + k.xyyz*dx) +\n\t\t\t\t\t k.yyx*DE(p + k.yyxz*dx) +\n\t\t\t\t\t k.yxy*DE(p + k.yxyz*dx) +\n\t\t\t\t\t k.xxx*DE(p + k.xxxz*dx));\n}\n\nvec4 scene(inout vec4 origin, inout vec4 ray, float vignette, float td) {\n\t//Trace the ray\n\tvec4 p = origin;\n\tvec4 d_s_td_m = ray_march(p, ray, GLOW_SHARPNESS, td);\n\tfloat d = d_s_td_m.x;\n\tfloat s = d_s_td_m.y;\n\ttd = d_s_td_m.z;\n\tfloat m = d_s_td_m.w;\n\n\t//Determine the color for this pixel\n\tvec3 col = vec3(0.0);\n\tfloat min_dist = MIN_DIST * max(td * LOD_MULTIPLIER, 1.0);\n\tif (d < min_dist) {\n\t\t//Get the surface normal\n\t\tvec3 n = calcNormal(p, MIN_DIST * 10.0);\n\t\tvec3 reflected = ray.xyz - 2.0*dot(ray.xyz, n) * n;\n\n\t\t//Get coloring\n\t\tvec3 orig_col = clamp(COL(p).xyz, 0.0, 1.0);\n\n\t\t//Get if this point is in shadow\n\t\tfloat k = 1.0;\n\t\t#if SHADOWS_ENABLED\n\t\t\tvec4 light_pt = p;\n\t\t\tlight_pt.xyz += n * min_dist * 10.0;\n\t\t\tvec4 rm = ray_march(light_pt, LIGHT_DIRECTION, SHADOW_SHARPNESS, 0.0);\n\t\t\tk = rm.w * min(rm.z, 1.0);\n\t\t#endif\n\n\t\t//Get specular\n\t\t#if SPECULAR_HIGHLIGHT > 0\n\t\t\tfloat specular = max(dot(reflected, LIGHT_DIRECTION), 0.0);\n\t\t\tspecular = pow(specular, float(SPECULAR_HIGHLIGHT));\n\t\t\tcol += specular * LIGHT_COLOR * k;\n\t\t#endif\n\n\t\t//Get diffuse lighting\n\t\t#if DIFFUSE_ENHANCED_ENABLED\n\t\t\tk = min(k, SHADOW_DARKNESS * 0.5 * (dot(n, LIGHT_DIRECTION) - 1.0) + 1.0);\n\t\t#elif DIFFUSE_ENABLED\n\t\t\tk = min(k, dot(n, LIGHT_DIRECTION));\n\t\t#endif\n\n\t\t//Don't make shadows entirely dark\n\t\tk = max(k, 1.0 - SHADOW_DARKNESS);\n\t\tcol += orig_col * LIGHT_COLOR * k;\n\n\t\t//Add small amount of ambient occlusion\n\t\tfloat a = 1.0 / (1.0 + s * AMBIENT_OCCLUSION_STRENGTH);\n\t\tcol += (1.0 - a) * AMBIENT_OCCLUSION_COLOR_DELTA;\n\n\t\t//Add fog effects\n\t\t#if FOG_ENABLED\n\t\t\ta = td / float(MAX_DIST);\n\t\t\tcol = (1.0 - a) * col + a * BACKGROUND_COLOR;\n\t\t#endif\n\n\t\t//Set up the reflection\n\t\torigin = p + vec4(n * min_dist * 100.0, 0.0);\n\t\tray = vec4(reflected, 0.0);\n\n\t\t//Apply vignette if needed\n\t\t#if VIGNETTE_FOREGROUND\n\t\t\tcol *= vignette;\n\t\t#endif\n\t} else {\n\t\t//Ray missed, start with solid background color\n\t\tcol += BACKGROUND_COLOR;\n\n\t\t//Apply glow\n\t\t#if GLOW_ENABLED\n\t\t\tcol += (1.0 - m) * (1.0 - m) * GLOW_COLOR_DELTA;\n\t\t#endif\n\n\t\tcol *= vignette;\n\t\t//Background specular\n\t\t#if SUN_ENABLED\n\t\t\tfloat sun_spec = dot(ray.xyz, LIGHT_DIRECTION) - 1.0 + SUN_SIZE;\n\t\t\tsun_spec = min(exp(sun_spec * SUN_SHARPNESS / SUN_SIZE), 1.0);\n\t\t\tcol += LIGHT_COLOR * sun_spec;\n\t\t#endif\n\t}\n\treturn vec4(col, td);\n}\n\nvoid main() {\n\tcol = vec4(0.0);\n\tfor (int k = 0; k < MOTION_BLUR_LEVEL + 1; ++k) {\n\t\tfor (int i = 0; i < ANTIALIASING_SAMPLES; ++i) {\n\t\t\tfor (int j = 0; j < ANTIALIASING_SAMPLES; ++j) {\n\t\t\t\tmat4 mat = iMat;\n\t\t\t\t#if MOTION_BLUR_LEVEL > 0\n\t\t\t\t\tfloat a = MOTION_BLUR_RATIO * float(k) / (MOTION_BLUR_LEVEL + 1);\n\t\t\t\t\tmat = iPrevMat*a + iMat*(1.0 - a);\n\t\t\t\t#endif\n\n\t\t\t\tvec2 delta = vec2(i, j) / float(ANTIALIASING_SAMPLES);\n\t\t\t\tvec2 delta2 = vec2(rand(float(i),0.0,1.0), rand(float(j)+0.1,0.0,1.0));\n\t\t\t\tvec4 dxy = vec4(delta2.x, delta2.y, 0.0, 0.0) * DEPTH_OF_FIELD_STRENGTH / iResolution.x;\n\n\t\t\t\t#if ODS\n\t\t\t\t\t//Get the normalized screen coordinate\n\t\t\t\t\tvec2 screen_pos;\n\t\t\t\t\tfloat scale;\n\t\t\t\t\tvec2 ods_coord = vec2(gl_FragCoord.x, gl_FragCoord.y * 2.0);\n\t\t\t\t\tif (ods_coord.y < iResolution.y) {\n\t\t\t\t\t\tscreen_pos = (ods_coord + delta) / iResolution.xy;\n\t\t\t\t\t\tscale = -iIPD*0.5;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscreen_pos = (ods_coord - vec2(0, iResolution.y) + delta) / iResolution.xy;\n\t\t\t\t\t\tscale = iIPD*0.5;\n\t\t\t\t\t}\n\t\t\t\t\tfloat theta = -2.0*M_PI*screen_pos.x;\n\t\t\t\t\tfloat phi = -0.5*M_PI + screen_pos.y*M_PI;\n\t\t\t\t\tscale *= cos(phi);\n\t\t\t\t\tvec4 p = mat[3] - mat * vec4(cos(theta) * scale, 0, sin(theta) * scale, 0);\n\t\t\t\t\tvec4 ray = mat * vec4(sin(theta)*cos(phi), sin(phi), cos(theta)*cos(phi), 0);\n\t\t\t\t#else\n\t\t\t\t\t//Get normalized screen coordinate\n\t\t\t\t\tvec2 screen_pos = (gl_FragCoord.xy + delta) / iResolution.xy;\n\t\t\t\t\tvec2 uv = 2.0*screen_pos - 1.0;\n\t\t\t\t\tuv.x *= iResolution.x / iResolution.y;\n\n\t\t\t\t\t//Convert screen coordinate to 3d ray\n\t\t\t\t\t#if ORTHOGONAL_PROJECTION\n\t\t\t\t\t\tvec4 ray = vec4(0.0, 0.0, -FOCAL_DIST, 0.0);\n\t\t\t\t\t\tray = mat * normalize(ray);\n\t\t\t\t\t#else\n\t\t\t\t\t\tvec4 ray = normalize(vec4(uv.x, uv.y, -FOCAL_DIST, 0.0));\n\t\t\t\t\t\tray = mat * normalize(ray * DEPTH_OF_FIELD_DISTANCE + dxy);\n\t\t\t\t\t#endif\n\n\t\t\t\t\t//Cast the first ray\n\t\t\t\t\t#if ORTHOGONAL_PROJECTION\n\t\t\t\t\t\tvec4 p = mat[3] + mat * vec4(uv.x, uv.y, 0.0, 0.0) * ORTHOGONAL_ZOOM;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvec4 p = mat[3] - mat * dxy;\n\t\t\t\t\t#endif\n\t\t\t\t#endif\n\n\t\t\t\t//Reflect light if needed\n\t\t\t\tfloat vignette = 1.0 - float(VIGNETTE_STRENGTH) * length(screen_pos - 0.5);\n\t\t\t\t#if REFLECTION_LEVEL > 0\n\t\t\t\t\tvec4 newCol = vec4(0.0);\n\t\t\t\t\tvec4 prevRay = ray;\n\t\t\t\t\tfloat ref_alpha = 1.0;\n\t\t\t\t\tfor (int r = 0; r < REFLECTION_LEVEL + 1; ++r) {\n\t\t\t\t\t\tref_alpha *= REFLECTION_ATTENUATION;\n\t\t\t\t\t\tnewCol += ref_alpha * scene(p, ray, vignette, 0.0);\n\t\t\t\t\t\tif (ray == prevRay || r >= REFLECTION_LEVEL) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcol += newCol;\n\t\t\t\t#else\n\t\t\t\t\tcol += scene(p, ray, vignette, 0.0);\n\t\t\t\t#endif\n\n\t\t\t}\n\t\t}\n\t}\n\n\tcol.rgb /= vec3(float(ANTIALIASING_SAMPLES * ANTIALIASING_SAMPLES * (MOTION_BLUR_LEVEL + 1)));\n\tcol.rgb = clamp(col.rgb * EXPOSURE, 0.0, 1.0);\n\tcol.a = 1.0;\n\tgl_FragDepth = min(col.w / float(MAX_DIST), 0.999);\n}\n`;var eo=class{constructor(e,t){this.gl=e,this.obj=t,this.keys={}}set(e,t){if(e in Mi){const n=Mi[e];if("number"==typeof t&&"number"==typeof n&&(t=_i(t)),Ai(e,t),this.keys.includes(e)){const n=this.keys[e];"number"==typeof t?this.gl.uniform1f(n,t):this.gl.uniform3fv(n,Float32Array(t))}}}get(e){return Mi[e]}compile(e={}){let t="";Object.keys(Ki).map(n=>{const r=Ki[n],i=void 0!==e[n]?e[n]:r.default,o="number"!=typeof i||r.int?bi(i):wi(i);t+=`#define ${r.name} ${o}\n`}),t+=`#define DE de_${this.obj.name}\n`,t+=`#define COL col_${this.obj.name}`;let n={},r=this.obj.compiled(n),i="";Object.keys(n).map(e=>i+=n[e].forwardDecl()),r=i+r;let o="";Object.keys(Mi).map(e=>{const t="number"==typeof Mi[e]?"float":"vec3";o+=`uniform ${t} _${e};\n`});const a=Ji(),s=Qi({defineCode:t,varCode:o,spaceCode:r}),u=this.compileProgram(a,s);return Object.keys(Mi).forEach(e=>this.keys=this.gl.getUniformLocation(u,"_"+e)),u}compileShader(e,t){const n=this.gl.createShader(t);if(this.gl.shaderSource(n,e),this.gl.compileShader(n),!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS))throw console.log(e),new Error(this.gl.getShaderInfoLog(n));return n}compileProgram(e,t){let n=null,r=null;const i=this.gl.createProgram();if(e&&(console.log("Compiling Vertex Shader..."),n=this.compileShader(e,this.gl.VERTEX_SHADER),this.gl.attachShader(i,n)),t&&(console.log("Compiling Fragment Shader..."),r=this.compileShader(t,this.gl.FRAGMENT_SHADER),this.gl.attachShader(i,r)),this.gl.bindAttribLocation(i,0,"vPosition"),this.gl.linkProgram(i),!this.gl.getProgramParameter(i,this.gl.LINK_STATUS))throw new Error(this.gl.getProgramInfoLog(i));return n&&(this.gl.detachShader(i,n),this.gl.deleteShader(n)),r&&(this.gl.detachShader(i,r),this.gl.deleteShader(r)),i}},to={gl:null,program:null,canvas:null,ui:{dragging:!1,mouse:{lastX:-1,lastY:-1},pressedKeys:{}},animation:{},app:{angle:{x:0,y:45},eye:{roll:0},distance:25}};function no(e){to.ui.pressedKeys[e.keyCode]=!0}function ro(e){to.ui.pressedKeys[e.keyCode]=!1}function io(e){to.app.distance-Math.sign(e.deltaY)>=0&&(to.app.distance-=Math.sign(e.deltaY))}function oo(e){const t=e.clientX,n=e.clientY,r=e.target.getBoundingClientRect();r.left<=t&&t<r.right&&r.top<=n&&n<r.bottom&&(to.ui.mouse.lastX=t,to.ui.mouse.lastY=n,to.ui.dragging=!0)}function ao(e){to.ui.dragging=!1}function so(e){const t=e.clientX,n=e.clientY;if(to.ui.dragging){const e=500/to.canvas.height,r=e*(t-to.ui.mouse.lastX),i=e*(n-to.ui.mouse.lastY);to.app.angle.x+i<=180&&to.app.angle.x+i>=-180&&(to.app.angle.x+=i,to.app.angle.y-=r)}to.ui.mouse.lastX=t,to.ui.mouse.lastY=n}!function(){const e=document.createElement("canvas");e.width=window.innerWidth,e.height=window.innerHeight,document.body.appendChild(e);const t=Object(i.getContext)(e,{alpha:!1,antialias:!1,powerPreference:"high-performance",depth:!0});if(!Object(i.isWebGL2)(t))return window.alert("Dein Browser unterstützt kein WebGL2!"),null;to.gl=t,to.canvas=e,a()();const n=new Zi;to.canvas.addEventListener("mousemove",so,!1),to.canvas.addEventListener("mousedown",oo,!1),to.canvas.addEventListener("mouseup",ao,!1),to.canvas.addEventListener("wheel",io,!1),document.addEventListener("keydown",no),document.addEventListener("keyup",ro),n.onUpdateScene=e=>{to.program=function(e,t){const n=new eo(e,t.example).compile(t.camera);console.log("Compiled!");const r=e.getAttribLocation(n,"vPosition"),i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),e.STATIC_DRAW);const o=e.createVertexArray();e.bindVertexArray(o),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,3,e.FLOAT,!1,0,0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(n),e.bindVertexArray(o);const a=e.getUniformLocation(n,"iIPD");return e.uniform1f(a,.04),n}(t,e)},n.updateScene(),window.requestAnimationFrame((function e(n){to.ui.pressedKeys[37]?to.app.eye.roll+=.05:to.ui.pressedKeys[39]&&(to.app.eye.roll-=.05),function(e){const t=e.getUniformLocation(to.program,"iMat"),n=e.getUniformLocation(to.program,"iResolution");to.canvas.width=window.innerWidth,to.canvas.height=window.innerHeight,e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.uniform2fv(n,[to.canvas.width,to.canvas.height]),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const{angle:r,distance:o}=to.app,a=Math.sin(r.y*Math.PI/360)*Math.cos(to.app.angle.x*Math.PI/360),s=Math.sin(r.x*Math.PI/360),u=Math.cos(r.y*Math.PI/360)*Math.cos(r.x*Math.PI/360);let c=o<=0?i.m4.lookAt([0,0,0],[-a,-s,-u],[0,1,0]):i.m4.lookAt([a*o,s*o,u*o],[0,0,0],[0,1,0]);i.m4.axisRotate(c,[0,0,1],to.app.eye.roll,c),e.uniformMatrix4fv(t,!1,c),e.drawArrays(e.TRIANGLE_STRIP,0,4)}(t),window.requestAnimationFrame(e)}))}()}]);